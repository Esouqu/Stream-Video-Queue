var pl=Object.defineProperty;var Ka=e=>{throw TypeError(e)};var ml=(e,t,r)=>t in e?pl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var re=(e,t,r)=>ml(e,typeof t!="symbol"?t+"":t,r),_s=(e,t,r)=>t.has(e)||Ka("Cannot "+r);var M=(e,t,r)=>(_s(e,t,"read from private field"),r?r.call(e):t.get(e)),W=(e,t,r)=>t.has(e)?Ka("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Re=(e,t,r,o)=>(_s(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r),ir=(e,t,r)=>(_s(e,t,"access private method"),r);var ws=(e,t,r,o)=>({set _(c){Re(e,t,c,r)},get _(){return M(e,t,o)}});import{o as Be,x as fr,m as Lc,C as ji,n as qs,V as gl,at as $c,X as yl,Y as Ba,w as dr,y as St,aw as Di,Z as Vs,_ as No,a0 as Fc,a3 as Kc,A as hr,ax as zs,ay as qa,az as Ws,aA as vl,as as bl,aB as _l,aC as Hs,aD as Bc,z as qc,ap as wl,am as Vc,aE as xl,G as kl,N as Va,aF as Cl,v as Sl,W as Us,av as tt,aG as zc,aH as El,R as za,aI as Al,aJ as Ol,aK as Pl,aL as Tl,a1 as Il,g as ot,ah as Rl,aM as Nl,aN as Dl,aO as Ml,al as Wa,aa as Ha,J as Te,j as V,D as Ae,au as Wc,b as Ne,l as he,aP as jl,aQ as Ll,aR as $l,aS as Fl,I as Kl,p as mn,f as zt,a as gn,c as Li,r as $i,t as pr,s as Bl}from"./runtime.Ctm-79fp.js";import{d as Ua,e as ql,i as Vl,f as zl,g as Wl,j as Hl,n as Ul,k as Gl,l as Xl}from"./store.BTqSLNIM.js";import{a as xe,p as Le,i as Hc,r as Uc,l as Ga,b as Xa}from"./index-client.DpACmXYB.js";import{d as Jl,c as Wt,a as st,t as Gs,n as Yl}from"./disclose-version.Cz5Qo27d.js";import"./legacy._zovnSf6.js";import{i as Ql}from"./stores.N1HH8j_I.js";let hn=null;function Ja(e){hn=e}function Zl(e,t){return t}function ef(e,t,r,o){for(var c=[],u=t.length,d=0;d<u;d++)vl(t[d].e,c,!0);var m=u>0&&c.length===0&&r!==null;if(m){var b=r.parentNode;bl(b),b.append(r),o.clear(),Bt(e,t[0].prev,t[u-1].next)}_l(c,()=>{for(var C=0;C<u;C++){var v=t[C];m||(o.delete(v.k),Bt(e,v.prev,v.next)),Hs(v.e,!m)}})}function tf(e,t,r,o,c,u=null){var d=e,m={flags:t,items:new Map,first:null},b=(t&Bc)!==0;if(b){var C=e;d=Be?fr(qc(C)):C.appendChild(Lc())}Be&&ji();var v=null,O=!1;qs(()=>{var x=r(),P=gl(x)?x:x==null?[]:$c(x),p=P.length;if(O&&p===0)return;O=p===0;let h=!1;if(Be){var y=d.data===yl;y!==(p===0)&&(d=Ba(),fr(d),dr(!1),h=!0)}if(Be){for(var N=null,j,L=0;L<p;L++){if(St.nodeType===8&&St.data===wl){d=St,h=!0,dr(!1);break}var $=P[L],z=o($,L);j=Gc(St,m,N,null,$,z,L,c,t),m.items.set(z,j),N=j}p>0&&fr(Ba())}if(!Be){var ie=Vc;nf(P,m,d,c,t,(ie.f&Di)!==0,o)}u!==null&&(p===0?v?Vs(v):v=No(()=>u(d)):v!==null&&Fc(v,()=>{v=null})),h&&dr(!0),r()}),Be&&(d=St)}function nf(e,t,r,o,c,u,d){var oe,ge,fe,ye;var m=(c&xl)!==0,b=(c&(zs|Ws))!==0,C=e.length,v=t.items,O=t.first,x=O,P,p=null,h,y=[],N=[],j,L,$,z;if(m)for(z=0;z<C;z+=1)j=e[z],L=d(j,z),$=v.get(L),$!==void 0&&((oe=$.a)==null||oe.measure(),(h??(h=new Set)).add($));for(z=0;z<C;z+=1){if(j=e[z],L=d(j,z),$=v.get(L),$===void 0){var ie=x?x.e.nodes_start:r;p=Gc(ie,t,p,p===null?t.first:p.next,j,L,z,o,c),v.set(L,p),y=[],N=[],x=p.next;continue}if(b&&rf($,j,z,c),$.e.f&Di&&(Vs($.e),m&&((ge=$.a)==null||ge.unfix(),(h??(h=new Set)).delete($))),$!==x){if(P!==void 0&&P.has($)){if(y.length<N.length){var ne=N[0],ce;p=ne.prev;var le=y[0],ee=y[y.length-1];for(ce=0;ce<y.length;ce+=1)Ya(y[ce],ne,r);for(ce=0;ce<N.length;ce+=1)P.delete(N[ce]);Bt(t,le.prev,ee.next),Bt(t,p,le),Bt(t,ee,ne),x=ne,p=ee,z-=1,y=[],N=[]}else P.delete($),Ya($,x,r),Bt(t,$.prev,$.next),Bt(t,$,p===null?t.first:p.next),Bt(t,p,$),p=$;continue}for(y=[],N=[];x!==null&&x.k!==L;)(u||!(x.e.f&Di))&&(P??(P=new Set)).add(x),N.push(x),x=x.next;if(x===null)continue;$=x}y.push($),p=$,x=$.next}if(x!==null||P!==void 0){for(var ke=P===void 0?[]:$c(P);x!==null;)(u||!(x.e.f&Di))&&ke.push(x),x=x.next;var G=ke.length;if(G>0){var ae=c&Bc&&C===0?r:null;if(m){for(z=0;z<G;z+=1)(fe=ke[z].a)==null||fe.measure();for(z=0;z<G;z+=1)(ye=ke[z].a)==null||ye.fix()}ef(t,ke,ae,v)}}m&&Kc(()=>{var pe;if(h!==void 0)for($ of h)(pe=$.a)==null||pe.apply()}),hr.first=t.first&&t.first.e,hr.last=p&&p.e}function rf(e,t,r,o){o&zs&&qa(e.v,t),o&Ws?qa(e.i,r):e.i=r}function Gc(e,t,r,o,c,u,d,m,b){var C=hn,v=(b&zs)!==0,O=(b&Cl)===0,x=v?O?kl(c):Va(c):c,P=b&Ws?Va(d):d,p={i:P,v:x,k:u,a:null,e:null,prev:r,next:o};hn=p;try{return p.e=No(()=>m(e,x,P),Be),p.e.prev=r&&r.e,p.e.next=o&&o.e,r===null?t.first=p:(r.next=p,r.e.next=p.e),o!==null&&(o.prev=p,o.e.prev=p.e),p}finally{hn=C}}function Ya(e,t,r){for(var o=e.next?e.next.e.nodes_start:r,c=t?t.e.nodes_start:r,u=e.e.nodes_start;u!==o;){var d=Sl(u);c.before(u),u=d}}function Bt(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function of(e,t,r,o,c){var m;Be&&ji();var u=(m=t.$$slots)==null?void 0:m[r],d=!1;u===!0&&(u=t.children,d=!0),u===void 0||u(e,d?()=>o:o)}function Ht(e,t,...r){var o=e,c=tt,u;qs(()=>{c!==(c=t())&&(u&&(Hs(u),u=null),u=No(()=>c(o,...r)))},Us),Be&&(o=St)}function sf(e,t,r,o,c,u){let d=Be;Be&&ji();var m,b,C=null;Be&&St.nodeType===1&&(C=St,ji());var v=Be?St:e,O,x=hn;qs(()=>{const P=t()||null;var p=r||P==="svg"?zc:null;if(P!==m){var h=hn;Ja(x),O&&(P===null?Fc(O,()=>{O=null,b=null}):P===b?Vs(O):(Hs(O),Ua(!1))),P&&P!==b&&(O=No(()=>{if(C=Be?C:p?document.createElementNS(p,P):document.createElement(P),Jl(C,C),o){var y=Be?qc(C):C.appendChild(Lc());Be&&(y===null?dr(!1):fr(y)),o(C,y)}hr.nodes_end=C,v.before(C)})),m=P,m&&(b=m),Ua(!0),Ja(h)}},Us),d&&(dr(!0),fr(v))}function dm(e){if(Be){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;Os(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var c=e.checked;Os(e,"checked",null),e.checked=c}}};e.__on_r=r,El(r),ql()}}function Os(e,t,r,o){var c=e.__attributes??(e.__attributes={});Be&&(c[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||c[t]!==(c[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Al]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Xc(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function mr(e,t,r,o,c=!1,u=!1,d=!1){var m=t||{},b=e.tagName==="OPTION";for(var C in t)C in r||(r[C]=null);o!==void 0&&(r.class=r.class?r.class+" "+o:o);var v=Xc(e),O=e.__attributes??(e.__attributes={});for(const y in r){let N=r[y];if(b&&y==="value"&&N==null){e.value=e.__value="",m[y]=N;continue}var x=m[y];if(N!==x){m[y]=N;var P=y[0]+y[1];if(P!=="$$"){if(P==="on"){const j={},L="$$"+y;let $=y.slice(2);var p=Gl($);if(Vl($)&&($=$.slice(0,-7),j.capture=!0),!p&&x){if(N!=null)continue;e.removeEventListener($,m[L],j),m[L]=null}if(N!=null)if(p)e[`__${$}`]=N,Wl([$]);else{let z=function(ie){m[y].call(this,ie)};m[L]=zl($,e,z,j)}else p&&(e[`__${$}`]=void 0)}else if(y==="style"&&N!=null)e.style.cssText=N+"";else if(y==="autofocus")Hl(e,!!N);else if(y==="__value"||y==="value"&&N!=null)e.value=e[y]=e.__value=N;else{var h=y;c||(h=Ul(h)),N==null&&!u?(O[y]=null,e.removeAttribute(y)):v.includes(h)&&(u||typeof N!="string")?e[h]=N:typeof N!="function"&&(Be&&(h==="src"||h==="href"||h==="srcset")||Os(e,h,N))}y==="style"&&"__styles"in e&&(e.__styles={})}}}return m}var Qa=new Map;function Xc(e){var t=Qa.get(e.nodeName);if(t)return t;Qa.set(e.nodeName,t=[]);for(var r,o=za(e),c=Element.prototype;c!==o;){r=Ol(o);for(var u in r)r[u].set&&t.push(u);o=za(o)}return t}const af=()=>performance.now(),Et={tick:e=>requestAnimationFrame(e),now:()=>af(),tasks:new Set};function Jc(){const e=Et.now();Et.tasks.forEach(t=>{t.c(e)||(Et.tasks.delete(t),t.f())}),Et.tasks.size!==0&&Et.tick(Jc)}function cf(e){let t;return Et.tasks.size===0&&Et.tick(Jc),{promise:new Promise(r=>{Et.tasks.add(t={c:e,f:r})}),abort(){Et.tasks.delete(t)}}}function Ii(e,t){e.dispatchEvent(new CustomEvent(t))}function uf(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Za(e){const t={},r=e.split(";");for(const o of r){const[c,u]=o.split(":");if(!c||u===void 0)break;const d=uf(c.trim());t[d]=u.trim()}return t}const lf=e=>e;function hm(e,t,r){var o=hn,c,u,d,m=null;o.a??(o.a={element:e,measure(){c=this.element.getBoundingClientRect()},apply(){if(d==null||d.abort(),u=this.element.getBoundingClientRect(),c.left!==u.left||c.right!==u.right||c.top!==u.top||c.bottom!==u.bottom){const b=t()(this.element,{from:c,to:u},r==null?void 0:r());d=Fi(this.element,b,void 0,1,()=>{d==null||d.abort(),d=void 0})}},fix(){if(!e.getAnimations().length){var{position:b,width:C,height:v}=getComputedStyle(e);if(b!=="absolute"&&b!=="fixed"){var O=e.style;m={position:O.position,width:O.width,height:O.height,transform:O.transform},O.position="absolute",O.width=C,O.height=v;var x=e.getBoundingClientRect();if(c.left!==x.left||c.top!==x.top){var P=`translate(${c.left-x.left}px, ${c.top-x.top}px)`;O.transform=O.transform?`${O.transform} ${P}`:P}}}},unfix(){if(m){var b=e.style;b.position=m.position,b.width=m.width,b.height=m.height,b.transform=m.transform}}}),o.a.element=e}function pm(e,t,r,o){var c=(e&Nl)!==0,u=(e&Dl)!==0,d=c&&u,m=(e&Ml)!==0,b=d?"both":c?"in":"out",C,v=t.inert,O,x;function P(){var j=Vc,L=hr;Wa(null),Ha(null);try{return C??(C=r()(t,(o==null?void 0:o())??{},{direction:b}))}finally{Wa(j),Ha(L)}}var p={is_global:m,in(){var j;if(t.inert=v,!c){x==null||x.abort(),(j=x==null?void 0:x.reset)==null||j.call(x);return}u||O==null||O.abort(),Ii(t,"introstart"),O=Fi(t,P(),x,1,()=>{Ii(t,"introend"),O==null||O.abort(),O=C=void 0})},out(j){if(!u){j==null||j(),C=void 0;return}t.inert=!0,Ii(t,"outrostart"),x=Fi(t,P(),O,0,()=>{Ii(t,"outroend"),j==null||j()})},stop:()=>{O==null||O.abort(),x==null||x.abort()}},h=hr;if((h.transitions??(h.transitions=[])).push(p),c&&Xl){var y=m;if(!y){for(var N=h.parent;N&&N.f&Us;)for(;(N=N.parent)&&!(N.f&Pl););y=!N||(N.f&Tl)!==0}y&&Il(()=>{ot(()=>p.in())})}}function Fi(e,t,r,o,c){var u=o===1;if(Rl(t)){var d,m=!1;return Kc(()=>{if(!m){var y=t({direction:u?"in":"out"});d=Fi(e,y,r,o,c)}}),{abort:()=>{m=!0,d==null||d.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return c(),{abort:tt,deactivate:tt,reset:tt,t:()=>o};const{delay:b=0,css:C,tick:v,easing:O=lf}=t;var x=[];if(u&&r===void 0&&(v&&v(0,1),C)){var P=Za(C(0,1));x.push(P,P)}var p=()=>1-o,h=e.animate(x,{duration:b});return h.onfinish=()=>{var y=(r==null?void 0:r.t())??1-o;r==null||r.abort();var N=o-y,j=t.duration*Math.abs(N),L=[];if(j>0){if(C)for(var $=Math.ceil(j/16.666666666666668),z=0;z<=$;z+=1){var ie=y+N*O(z/$),ne=C(ie,1-ie);L.push(Za(ne))}p=()=>{var ce=h.currentTime;return y+N*O(ce/j)},v&&cf(()=>{if(h.playState!=="running")return!1;var ce=p();return v(ce,1-ce),!0})}h=e.animate(L,{duration:j,fill:"forwards"}),h.onfinish=()=>{p=()=>o,v==null||v(o,1-o),c()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=tt)},deactivate:()=>{c=tt},reset:()=>{o===0&&(v==null||v(1,0))},t:()=>p()}}function Yc(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(r=Yc(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function Qc(){for(var e,t,r=0,o="",c=arguments.length;r<c;r++)(e=arguments[r])&&(t=Yc(e))&&(o&&(o+=" "),o+=t);return o}const Xs="-",ff=e=>{const t=hf(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:d=>{const m=d.split(Xs);return m[0]===""&&m.length!==1&&m.shift(),Zc(m,t)||df(d)},getConflictingClassGroupIds:(d,m)=>{const b=r[d]||[];return m&&o[d]?[...b,...o[d]]:b}}},Zc=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],o=t.nextPart.get(r),c=o?Zc(e.slice(1),o):void 0;if(c)return c;if(t.validators.length===0)return;const u=e.join(Xs);return(d=t.validators.find(({validator:m})=>m(u)))==null?void 0:d.classGroupId},ec=/^\[(.+)\]$/,df=e=>{if(ec.test(e)){const t=ec.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},hf=e=>{const{theme:t,prefix:r}=e,o={nextPart:new Map,validators:[]};return mf(Object.entries(e.classGroups),r).forEach(([u,d])=>{Ps(d,o,u,t)}),o},Ps=(e,t,r,o)=>{e.forEach(c=>{if(typeof c=="string"){const u=c===""?t:tc(t,c);u.classGroupId=r;return}if(typeof c=="function"){if(pf(c)){Ps(c(o),t,r,o);return}t.validators.push({validator:c,classGroupId:r});return}Object.entries(c).forEach(([u,d])=>{Ps(d,tc(t,u),r,o)})})},tc=(e,t)=>{let r=e;return t.split(Xs).forEach(o=>{r.nextPart.has(o)||r.nextPart.set(o,{nextPart:new Map,validators:[]}),r=r.nextPart.get(o)}),r},pf=e=>e.isThemeGetter,mf=(e,t)=>t?e.map(([r,o])=>{const c=o.map(u=>typeof u=="string"?t+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([d,m])=>[t+d,m])):u);return[r,c]}):e,gf=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,o=new Map;const c=(u,d)=>{r.set(u,d),t++,t>e&&(t=0,o=r,r=new Map)};return{get(u){let d=r.get(u);if(d!==void 0)return d;if((d=o.get(u))!==void 0)return c(u,d),d},set(u,d){r.has(u)?r.set(u,d):c(u,d)}}},eu="!",yf=e=>{const{separator:t,experimentalParseClassName:r}=e,o=t.length===1,c=t[0],u=t.length,d=m=>{const b=[];let C=0,v=0,O;for(let y=0;y<m.length;y++){let N=m[y];if(C===0){if(N===c&&(o||m.slice(y,y+u)===t)){b.push(m.slice(v,y)),v=y+u;continue}if(N==="/"){O=y;continue}}N==="["?C++:N==="]"&&C--}const x=b.length===0?m:m.substring(v),P=x.startsWith(eu),p=P?x.substring(1):x,h=O&&O>v?O-v:void 0;return{modifiers:b,hasImportantModifier:P,baseClassName:p,maybePostfixModifierPosition:h}};return r?m=>r({className:m,parseClassName:d}):d},vf=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(o=>{o[0]==="["?(t.push(...r.sort(),o),r=[]):r.push(o)}),t.push(...r.sort()),t},bf=e=>({cache:gf(e.cacheSize),parseClassName:yf(e),...ff(e)}),_f=/\s+/,wf=(e,t)=>{const{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:c}=t,u=[],d=e.trim().split(_f);let m="";for(let b=d.length-1;b>=0;b-=1){const C=d[b],{modifiers:v,hasImportantModifier:O,baseClassName:x,maybePostfixModifierPosition:P}=r(C);let p=!!P,h=o(p?x.substring(0,P):x);if(!h){if(!p){m=C+(m.length>0?" "+m:m);continue}if(h=o(x),!h){m=C+(m.length>0?" "+m:m);continue}p=!1}const y=vf(v).join(":"),N=O?y+eu:y,j=N+h;if(u.includes(j))continue;u.push(j);const L=c(h,p);for(let $=0;$<L.length;++$){const z=L[$];u.push(N+z)}m=C+(m.length>0?" "+m:m)}return m};function xf(){let e=0,t,r,o="";for(;e<arguments.length;)(t=arguments[e++])&&(r=tu(t))&&(o&&(o+=" "),o+=r);return o}const tu=e=>{if(typeof e=="string")return e;let t,r="";for(let o=0;o<e.length;o++)e[o]&&(t=tu(e[o]))&&(r&&(r+=" "),r+=t);return r};function Ts(e,...t){let r,o,c,u=d;function d(b){const C=t.reduce((v,O)=>O(v),e());return r=bf(C),o=r.cache.get,c=r.cache.set,u=m,m(b)}function m(b){const C=o(b);if(C)return C;const v=wf(b,r);return c(b,v),v}return function(){return u(xf.apply(null,arguments))}}const Me=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},nu=/^\[(?:([a-z-]+):)?(.+)\]$/i,kf=/^\d+\/\d+$/,Cf=new Set(["px","full","screen"]),Sf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ef=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Af=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Of=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Pf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wt=e=>An(e)||Cf.has(e)||kf.test(e),Ft=e=>Kn(e,"length",Lf),An=e=>!!e&&!Number.isNaN(Number(e)),xs=e=>Kn(e,"number",An),or=e=>!!e&&Number.isInteger(Number(e)),Tf=e=>e.endsWith("%")&&An(e.slice(0,-1)),we=e=>nu.test(e),Kt=e=>Sf.test(e),If=new Set(["length","size","percentage"]),Rf=e=>Kn(e,If,ru),Nf=e=>Kn(e,"position",ru),Df=new Set(["image","url"]),Mf=e=>Kn(e,Df,Ff),jf=e=>Kn(e,"",$f),sr=()=>!0,Kn=(e,t,r)=>{const o=nu.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):r(o[2]):!1},Lf=e=>Ef.test(e)&&!Af.test(e),ru=()=>!1,$f=e=>Of.test(e),Ff=e=>Pf.test(e),Is=()=>{const e=Me("colors"),t=Me("spacing"),r=Me("blur"),o=Me("brightness"),c=Me("borderColor"),u=Me("borderRadius"),d=Me("borderSpacing"),m=Me("borderWidth"),b=Me("contrast"),C=Me("grayscale"),v=Me("hueRotate"),O=Me("invert"),x=Me("gap"),P=Me("gradientColorStops"),p=Me("gradientColorStopPositions"),h=Me("inset"),y=Me("margin"),N=Me("opacity"),j=Me("padding"),L=Me("saturate"),$=Me("scale"),z=Me("sepia"),ie=Me("skew"),ne=Me("space"),ce=Me("translate"),le=()=>["auto","contain","none"],ee=()=>["auto","hidden","clip","visible","scroll"],ke=()=>["auto",we,t],G=()=>[we,t],ae=()=>["",wt,Ft],oe=()=>["auto",An,we],ge=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],fe=()=>["solid","dashed","dotted","double","none"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pe=()=>["start","end","center","between","around","evenly","stretch"],be=()=>["","0",we],Pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ke=()=>[An,we];return{cacheSize:500,separator:":",theme:{colors:[sr],spacing:[wt,Ft],blur:["none","",Kt,we],brightness:Ke(),borderColor:[e],borderRadius:["none","","full",Kt,we],borderSpacing:G(),borderWidth:ae(),contrast:Ke(),grayscale:be(),hueRotate:Ke(),invert:be(),gap:G(),gradientColorStops:[e],gradientColorStopPositions:[Tf,Ft],inset:ke(),margin:ke(),opacity:Ke(),padding:G(),saturate:Ke(),scale:Ke(),sepia:be(),skew:Ke(),space:G(),translate:G()},classGroups:{aspect:[{aspect:["auto","square","video",we]}],container:["container"],columns:[{columns:[Kt]}],"break-after":[{"break-after":Pe()}],"break-before":[{"break-before":Pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ge(),we]}],overflow:[{overflow:ee()}],"overflow-x":[{"overflow-x":ee()}],"overflow-y":[{"overflow-y":ee()}],overscroll:[{overscroll:le()}],"overscroll-x":[{"overscroll-x":le()}],"overscroll-y":[{"overscroll-y":le()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",or,we]}],basis:[{basis:ke()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",we]}],grow:[{grow:be()}],shrink:[{shrink:be()}],order:[{order:["first","last","none",or,we]}],"grid-cols":[{"grid-cols":[sr]}],"col-start-end":[{col:["auto",{span:["full",or,we]},we]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[sr]}],"row-start-end":[{row:["auto",{span:[or,we]},we]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",we]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",we]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...pe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...pe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...pe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[j]}],px:[{px:[j]}],py:[{py:[j]}],ps:[{ps:[j]}],pe:[{pe:[j]}],pt:[{pt:[j]}],pr:[{pr:[j]}],pb:[{pb:[j]}],pl:[{pl:[j]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[ne]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ne]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",we,t]}],"min-w":[{"min-w":[we,t,"min","max","fit"]}],"max-w":[{"max-w":[we,t,"none","full","min","max","fit","prose",{screen:[Kt]},Kt]}],h:[{h:[we,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[we,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[we,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[we,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kt,Ft]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xs]}],"font-family":[{font:[sr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",we]}],"line-clamp":[{"line-clamp":["none",An,xs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wt,we]}],"list-image":[{"list-image":["none",we]}],"list-style-type":[{list:["none","disc","decimal",we]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wt,Ft]}],"underline-offset":[{"underline-offset":["auto",wt,we]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:G()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ge(),Nf]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Rf]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mf]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[m]}],"border-w-x":[{"border-x":[m]}],"border-w-y":[{"border-y":[m]}],"border-w-s":[{"border-s":[m]}],"border-w-e":[{"border-e":[m]}],"border-w-t":[{"border-t":[m]}],"border-w-r":[{"border-r":[m]}],"border-w-b":[{"border-b":[m]}],"border-w-l":[{"border-l":[m]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...fe(),"hidden"]}],"divide-x":[{"divide-x":[m]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[m]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:fe()}],"border-color":[{border:[c]}],"border-color-x":[{"border-x":[c]}],"border-color-y":[{"border-y":[c]}],"border-color-s":[{"border-s":[c]}],"border-color-e":[{"border-e":[c]}],"border-color-t":[{"border-t":[c]}],"border-color-r":[{"border-r":[c]}],"border-color-b":[{"border-b":[c]}],"border-color-l":[{"border-l":[c]}],"divide-color":[{divide:[c]}],"outline-style":[{outline:["",...fe()]}],"outline-offset":[{"outline-offset":[wt,we]}],"outline-w":[{outline:[wt,Ft]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[wt,Ft]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kt,jf]}],"shadow-color":[{shadow:[sr]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...ye(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ye()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[o]}],contrast:[{contrast:[b]}],"drop-shadow":[{"drop-shadow":["","none",Kt,we]}],grayscale:[{grayscale:[C]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[O]}],saturate:[{saturate:[L]}],sepia:[{sepia:[z]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[b]}],"backdrop-grayscale":[{"backdrop-grayscale":[C]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[O]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[L]}],"backdrop-sepia":[{"backdrop-sepia":[z]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",we]}],duration:[{duration:Ke()}],ease:[{ease:["linear","in","out","in-out",we]}],delay:[{delay:Ke()}],animate:[{animate:["none","spin","ping","pulse","bounce",we]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[$]}],"scale-x":[{"scale-x":[$]}],"scale-y":[{"scale-y":[$]}],rotate:[{rotate:[or,we]}],"translate-x":[{"translate-x":[ce]}],"translate-y":[{"translate-y":[ce]}],"skew-x":[{"skew-x":[ie]}],"skew-y":[{"skew-y":[ie]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",we]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":G()}],"scroll-mx":[{"scroll-mx":G()}],"scroll-my":[{"scroll-my":G()}],"scroll-ms":[{"scroll-ms":G()}],"scroll-me":[{"scroll-me":G()}],"scroll-mt":[{"scroll-mt":G()}],"scroll-mr":[{"scroll-mr":G()}],"scroll-mb":[{"scroll-mb":G()}],"scroll-ml":[{"scroll-ml":G()}],"scroll-p":[{"scroll-p":G()}],"scroll-px":[{"scroll-px":G()}],"scroll-py":[{"scroll-py":G()}],"scroll-ps":[{"scroll-ps":G()}],"scroll-pe":[{"scroll-pe":G()}],"scroll-pt":[{"scroll-pt":G()}],"scroll-pr":[{"scroll-pr":G()}],"scroll-pb":[{"scroll-pb":G()}],"scroll-pl":[{"scroll-pl":G()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wt,Ft,xs]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Kf=(e,{cacheSize:t,prefix:r,separator:o,experimentalParseClassName:c,extend:u={},override:d={}})=>{ur(e,"cacheSize",t),ur(e,"prefix",r),ur(e,"separator",o),ur(e,"experimentalParseClassName",c);for(const m in d)Bf(e[m],d[m]);for(const m in u)qf(e[m],u[m]);return e},ur=(e,t,r)=>{r!==void 0&&(e[t]=r)},Bf=(e,t)=>{if(t)for(const r in t)ur(e,r,t[r])},qf=(e,t)=>{if(t)for(const r in t){const o=t[r];o!==void 0&&(e[r]=(e[r]||[]).concat(o))}},Vf=(e,...t)=>typeof e=="function"?Ts(Is,e,...t):Ts(()=>Kf(Is(),e),...t),iu=Ts(Is);function nc(...e){return iu(Qc(e))}function mm(e){return e*parseFloat(getComputedStyle(document.body).fontSize)}function zf(e){return Math.floor(Math.random()*e.length)}function Wf(e){const t=/(?:youtu\.be\/|youtube\.com\/(?:shorts\/|watch\?v=|embed\/|v\/)|youtu\.be\/|\/video\/|watch\?v=|&v=)([a-zA-Z0-9_-]{11})?/,r=e.match(t);if(!r||!r[1])return;const o=/&t=(\d+)/,c=e.match(o),u=c?Number(c[1]):0;return{videoId:r[1],startSeconds:u}}function Hf(e,t){const r=new RegExp("(?<![a-zA-Z]|[а-яА-Я])("+t.join("|")+")(?![a-zA-Z]|[а-яА-Я])","i"),o=e.match(r);if(o&&o[0])return Uf(o[0])}function Uf(e){if(!e)return"";const t=e.charAt(0).toUpperCase(),r=e.slice(1).toLowerCase();return t+r}function Gf(e){const t=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3);return[String(t).padStart(2,"0"),String(r).padStart(2,"0"),String(o).padStart(2,"0")].join(":")}function gm(e){const t=localStorage.getItem("version");parseInt(t||"0",10)!==e&&(localStorage.clear(),localStorage.setItem("version",e.toString()))}var Ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ou(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),r}var su={exports:{}};const Jf={},Yf=Object.freeze(Object.defineProperty({__proto__:null,default:Jf},Symbol.toStringTag,{value:"Module"})),Rs=Xf(Yf);var au={exports:{}};const Qf=/^\u0001ACTION ([^\u0001]+)\u0001$/,Zf=/^(justinfan)(\d+$)/,ed=/\\([sn:r\\])/g,td=/([ \n;\r\\])/g,rc={s:" ",n:"",":":";",r:""},ic={" ":"s","\n":"n",";":":","\r":"r"},nd=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),rd=/[|\\^$*+?:#]/,Ri=au.exports={get:(e,t)=>typeof e>"u"?t:e,hasOwn:(e,t)=>({}).hasOwnProperty.call(e,t),promiseDelay:e=>new Promise(t=>setTimeout(t,e)),isFinite:e=>isFinite(e)&&!isNaN(parseFloat(e)),toNumber(e,t){if(e===null)return 0;const r=Math.pow(10,Ri.isFinite(t)?t:0);return Math.round(e*r)/r},isInteger:e=>!isNaN(Ri.toNumber(e,0)),isRegex:e=>rd.test(e),isURL:e=>nd.test(e),justinfan:()=>`justinfan${Math.floor(Math.random()*8e4+1e3)}`,isJustinfan:e=>Zf.test(e),channel(e){const t=(e||"").toLowerCase();return t[0]==="#"?t:"#"+t},username(e){const t=(e||"").toLowerCase();return t[0]==="#"?t.slice(1):t},token:e=>e?e.toLowerCase().replace("oauth:",""):"",password(e){const t=Ri.token(e);return t?`oauth:${t}`:""},actionMessage:e=>e.match(Qf),replaceAll(e,t){if(e===null||typeof e>"u")return null;for(const r in t)e=e.replace(new RegExp(r,"g"),t[r]);return e},unescapeHtml:e=>e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'"),unescapeIRC(e){return!e||typeof e!="string"||!e.includes("\\")?e:e.replace(ed,(t,r)=>r in rc?rc[r]:r)},escapeIRC(e){return!e||typeof e!="string"?e:e.replace(td,(t,r)=>r in ic?`\\${ic[r]}`:r)},addWord:(e,t)=>e.length?e+" "+t:e+t,splitLine(e,t){let r=e.substring(0,t).lastIndexOf(" ");return r===-1&&(r=t-1),[e.substring(0,r),e.substring(r+1)]},extractNumber(e){const t=e.split(" ");for(let r=0;r<t.length;r++)if(Ri.isInteger(t[r]))return~~t[r];return 0},formatDate(e){let t=e.getHours(),r=e.getMinutes();return t=(t<10?"0":"")+t,r=(r<10?"0":"")+r,`${t}:${r}`},inherits(e,t){e.super_=t;const r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},isNode(){try{return typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]"}catch{}return!1}};var ni=au.exports;const id=Rs,oc=ni;var od=function(t,r){let o=t.url!==void 0?t.url:t.uri;if(oc.isURL(o)||(o=`https://api.twitch.tv/kraken${o[0]==="/"?o:`/${o}`}`),oc.isNode()){const c=Object.assign({method:"GET",json:!0},t);if(c.qs){const b=new URLSearchParams(c.qs);o+=`?${b}`}const u={};"fetchAgent"in this.opts.connection&&(u.agent=this.opts.connection.fetchAgent);const d=id(o,{...u,method:c.method,headers:c.headers,body:c.body});let m={};d.then(b=>(m={statusCode:b.status,headers:b.headers},c.json?b.json():b.text())).then(b=>r(null,m,b),b=>r(b,m,null))}else{const c=Object.assign({method:"GET",headers:{}},t,{url:o}),u=new XMLHttpRequest;u.open(c.method,c.url,!0);for(const d in c.headers)u.setRequestHeader(d,c.headers[d]);u.responseType="json",u.addEventListener("load",d=>{u.readyState===4&&(u.status!==200?r(u.status,null,null):r(null,null,u.response))}),u.send()}};const de=ni;function sc(e,t){return e=de.channel(e),t=de.get(t,30),this._sendCommand(null,e,`/followers ${t}`,(r,o)=>{this.once("_promiseFollowers",c=>{c?o(c):r([e,~~t])})})}function ac(e){return e=de.channel(e),this._sendCommand(null,e,"/followersoff",(t,r)=>{this.once("_promiseFollowersoff",o=>{o?r(o):t([e])})})}function cc(e){return e=de.channel(e),this._sendCommand(null,null,`PART ${e}`,(t,r)=>{this.once("_promisePart",o=>{o?r(o):t([e])})})}function uc(e){return e=de.channel(e),this._sendCommand(null,e,"/r9kbeta",(t,r)=>{this.once("_promiseR9kbeta",o=>{o?r(o):t([e])})})}function lc(e){return e=de.channel(e),this._sendCommand(null,e,"/r9kbetaoff",(t,r)=>{this.once("_promiseR9kbetaoff",o=>{o?r(o):t([e])})})}function fc(e,t){return e=de.channel(e),t=de.get(t,300),this._sendCommand(null,e,`/slow ${t}`,(r,o)=>{this.once("_promiseSlow",c=>{c?o(c):r([e,~~t])})})}function dc(e){return e=de.channel(e),this._sendCommand(null,e,"/slowoff",(t,r)=>{this.once("_promiseSlowoff",o=>{o?r(o):t([e])})})}var sd={action(e,t){return e=de.channel(e),t=`ACTION ${t}`,this._sendMessage(this._getPromiseDelay(),e,t,(r,o)=>{r([e,t])})},ban(e,t,r){return e=de.channel(e),t=de.username(t),r=de.get(r,""),this._sendCommand(null,e,`/ban ${t} ${r}`,(o,c)=>{this.once("_promiseBan",u=>{u?c(u):o([e,t,r])})})},clear(e){return e=de.channel(e),this._sendCommand(null,e,"/clear",(t,r)=>{this.once("_promiseClear",o=>{o?r(o):t([e])})})},color(e,t){return t=de.get(t,e),this._sendCommand(null,"#tmijs",`/color ${t}`,(r,o)=>{this.once("_promiseColor",c=>{c?o(c):r([t])})})},commercial(e,t){return e=de.channel(e),t=de.get(t,30),this._sendCommand(null,e,`/commercial ${t}`,(r,o)=>{this.once("_promiseCommercial",c=>{c?o(c):r([e,~~t])})})},deletemessage(e,t){return e=de.channel(e),this._sendCommand(null,e,`/delete ${t}`,(r,o)=>{this.once("_promiseDeletemessage",c=>{c?o(c):r([e])})})},emoteonly(e){return e=de.channel(e),this._sendCommand(null,e,"/emoteonly",(t,r)=>{this.once("_promiseEmoteonly",o=>{o?r(o):t([e])})})},emoteonlyoff(e){return e=de.channel(e),this._sendCommand(null,e,"/emoteonlyoff",(t,r)=>{this.once("_promiseEmoteonlyoff",o=>{o?r(o):t([e])})})},followersonly:sc,followersmode:sc,followersonlyoff:ac,followersmodeoff:ac,host(e,t){return e=de.channel(e),t=de.username(t),this._sendCommand(2e3,e,`/host ${t}`,(r,o)=>{this.once("_promiseHost",(c,u)=>{c?o(c):r([e,t,~~u])})})},join(e){return e=de.channel(e),this._sendCommand(void 0,null,`JOIN ${e}`,(t,r)=>{const o="_promiseJoin";let c=!1;const u=(m,b)=>{e===de.channel(b)&&(this.removeListener(o,u),c=!0,m?r(m):t([e]))};this.on(o,u);const d=this._getPromiseDelay();de.promiseDelay(d).then(()=>{c||this.emit(o,"No response from Twitch.",e)})})},mod(e,t){return e=de.channel(e),t=de.username(t),this._sendCommand(null,e,`/mod ${t}`,(r,o)=>{this.once("_promiseMod",c=>{c?o(c):r([e,t])})})},mods(e){return e=de.channel(e),this._sendCommand(null,e,"/mods",(t,r)=>{this.once("_promiseMods",(o,c)=>{o?r(o):(c.forEach(u=>{this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(u)||this.moderators[e].push(u)}),t(c))})})},part:cc,leave:cc,ping(){return this._sendCommand(null,null,"PING",(e,t)=>{this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout))},de.get(this.opts.connection.timeout,9999)),this.once("_promisePing",r=>e([parseFloat(r)]))})},r9kbeta:uc,r9kmode:uc,r9kbetaoff:lc,r9kmodeoff:lc,raw(e){return this._sendCommand(null,null,e,(t,r)=>{t([e])})},say(e,t){return e=de.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?t.substr(1,3)==="me "?this.action(e,t.substr(4)):this._sendCommand(null,e,t,(r,o)=>{r([e,t])}):this._sendMessage(this._getPromiseDelay(),e,t,(r,o)=>{r([e,t])})},slow:fc,slowmode:fc,slowoff:dc,slowmodeoff:dc,subscribers(e){return e=de.channel(e),this._sendCommand(null,e,"/subscribers",(t,r)=>{this.once("_promiseSubscribers",o=>{o?r(o):t([e])})})},subscribersoff(e){return e=de.channel(e),this._sendCommand(null,e,"/subscribersoff",(t,r)=>{this.once("_promiseSubscribersoff",o=>{o?r(o):t([e])})})},timeout(e,t,r,o){return e=de.channel(e),t=de.username(t),r!==null&&!de.isInteger(r)&&(o=r,r=300),r=de.get(r,300),o=de.get(o,""),this._sendCommand(null,e,`/timeout ${t} ${r} ${o}`,(c,u)=>{this.once("_promiseTimeout",d=>{d?u(d):c([e,t,~~r,o])})})},unban(e,t){return e=de.channel(e),t=de.username(t),this._sendCommand(null,e,`/unban ${t}`,(r,o)=>{this.once("_promiseUnban",c=>{c?o(c):r([e,t])})})},unhost(e){return e=de.channel(e),this._sendCommand(2e3,e,"/unhost",(t,r)=>{this.once("_promiseUnhost",o=>{o?r(o):t([e])})})},unmod(e,t){return e=de.channel(e),t=de.username(t),this._sendCommand(null,e,`/unmod ${t}`,(r,o)=>{this.once("_promiseUnmod",c=>{c?o(c):r([e,t])})})},unvip(e,t){return e=de.channel(e),t=de.username(t),this._sendCommand(null,e,`/unvip ${t}`,(r,o)=>{this.once("_promiseUnvip",c=>{c?o(c):r([e,t])})})},vip(e,t){return e=de.channel(e),t=de.username(t),this._sendCommand(null,e,`/vip ${t}`,(r,o)=>{this.once("_promiseVip",c=>{c?o(c):r([e,t])})})},vips(e){return e=de.channel(e),this._sendCommand(null,e,"/vips",(t,r)=>{this.once("_promiseVips",(o,c)=>{o?r(o):t(c)})})},whisper(e,t){return e=de.username(e),e===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs",`/w ${e} ${t}`,(r,o)=>{this.once("_promiseWhisper",c=>{c&&o(c)})}).catch(r=>{if(r&&typeof r=="string"&&r.indexOf("No response from Twitch.")!==0)throw r;const o=de.channel(e),c=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:this.getUsername()},this.globaluserstate);return this.emits(["whisper","message"],[[o,c,t,!0],[o,c,t,!0]]),[e,t]})}};function We(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var ad=We;We.EventEmitter=We;We.prototype._events=void 0;We.prototype._maxListeners=void 0;We.defaultMaxListeners=10;We.prototype.setMaxListeners=function(e){if(!cd(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};We.prototype.emit=function(e){var t,r,o,c,u,d;if(this._events||(this._events={}),e==="error"&&(!this._events.error||gr(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(r=this._events[e],cu(r))return!1;if(At(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),r.apply(this,c)}else if(gr(r))for(c=Array.prototype.slice.call(arguments,1),d=r.slice(),o=d.length,u=0;u<o;u++)d[u].apply(this,c);return!0};We.prototype.addListener=function(e,t){var r;if(!At(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,At(t.listener)?t.listener:t),this._events[e]?gr(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,gr(this._events[e])&&!this._events[e].warned&&(cu(this._maxListeners)?r=We.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};We.prototype.on=We.prototype.addListener;We.prototype.once=function(e,t){if(!At(t))throw TypeError("listener must be a function");var r=!1;if(this._events.hasOwnProperty(e)&&e.charAt(0)==="_"){var o=1,c=e;for(var u in this._events)this._events.hasOwnProperty(u)&&u.startsWith(c)&&o++;e=e+o}function d(){e.charAt(0)==="_"&&!isNaN(e.substr(e.length-1))&&(e=e.substring(0,e.length-1)),this.removeListener(e,d),r||(r=!0,t.apply(this,arguments))}return d.listener=t,this.on(e,d),this};We.prototype.removeListener=function(e,t){var r,o,c,u;if(!At(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],c=r.length,o=-1,r===t||At(r.listener)&&r.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&e.charAt(0)==="_"){var d=e;for(var m in this._events)this._events.hasOwnProperty(m)&&m.startsWith(d)&&(isNaN(parseInt(m.substr(m.length-1)))||(this._events[e+parseInt(m.substr(m.length-1)-1)]=this._events[m],delete this._events[m]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(gr(r)){for(u=c;u-- >0;)if(r[u]===t||r[u].listener&&r[u].listener===t){o=u;break}if(o<0)return this;r.length===1?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};We.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],At(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this};We.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:At(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};We.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(At(t))return 1;if(t)return t.length}return 0};We.listenerCount=function(e,t){return e.listenerCount(t)};function At(e){return typeof e=="function"}function cd(e){return typeof e=="number"}function gr(e){return typeof e=="object"&&e!==null}function cu(e){return e===void 0}const ud=ni;let uu="info";const hc={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function Sn(e){return function(t){hc[e]>=hc[uu]&&console.log(`[${ud.formatDate(new Date)}] ${e}: ${t}`)}}var ld={setLevel(e){uu=e},trace:Sn("trace"),debug:Sn("debug"),info:Sn("info"),warn:Sn("warn"),error:Sn("error"),fatal:Sn("fatal")};const ks=ni,En=/\S+/g;function Cs(e,t,r=",",o="/",c){const u=e[t];if(u===void 0)return e;const d=typeof u=="string";if(e[t+"-raw"]=d?u:null,u===!0)return e[t]=null,e;if(e[t]={},d){const m=u.split(r);for(let b=0;b<m.length;b++){const C=m[b].split(o);let v=C[1];c!==void 0&&v&&(v=v.split(c)),e[t][C[0]]=v||null}}return e}var fd={badges:e=>Cs(e,"badges"),badgeInfo:e=>Cs(e,"badge-info"),emotes:e=>Cs(e,"emotes","/",":",","),emoteRegex(e,t,r,o){En.lastIndex=0;const c=new RegExp("(\\b|^|\\s)"+ks.unescapeHtml(t)+"(\\b|$|\\s)");let u;for(;(u=En.exec(e))!==null;)c.test(u[0])&&(o[r]=o[r]||[],o[r].push([u.index,En.lastIndex-1]))},emoteString(e,t,r,o){En.lastIndex=0;let c;for(;(c=En.exec(e))!==null;)c[0]===ks.unescapeHtml(t)&&(o[r]=o[r]||[],o[r].push([c.index,En.lastIndex-1]))},transformEmotes(e){let t="";return Object.keys(e).forEach(r=>{t=`${t+r}:`,e[r].forEach(o=>t=`${t+o.join("-")},`),t=`${t.slice(0,-1)}/`}),t.slice(0,-1)},formTags(e){const t=[];for(const r in e){const o=ks.escapeIRC(e[r]);t.push(`${r}=${o}`)}return`@${t.join(";")}`},msg(e){const t={raw:e,tags:{},prefix:null,command:null,params:[]};let r=0,o=0;if(e.charCodeAt(0)===64){if(o=e.indexOf(" "),o===-1)return null;const c=e.slice(1,o).split(";");for(let u=0;u<c.length;u++){const d=c[u],m=d.split("=");t.tags[m[0]]=d.substring(d.indexOf("=")+1)||!0}r=o+1}for(;e.charCodeAt(r)===32;)r++;if(e.charCodeAt(r)===58){if(o=e.indexOf(" ",r),o===-1)return null;for(t.prefix=e.slice(r+1,o),r=o+1;e.charCodeAt(r)===32;)r++}if(o=e.indexOf(" ",r),o===-1)return e.length>r?(t.command=e.slice(r),t):null;for(t.command=e.slice(r,o),r=o+1;e.charCodeAt(r)===32;)r++;for(;r<e.length;){if(o=e.indexOf(" ",r),e.charCodeAt(r)===58){t.params.push(e.slice(r+1));break}if(o!==-1){for(t.params.push(e.slice(r,o)),r=o+1;e.charCodeAt(r)===32;)r++;continue}if(o===-1){t.params.push(e.slice(r));break}}return t}};let dd=class{constructor(t){this.queue=[],this.index=0,this.defaultDelay=t===void 0?3e3:t}add(t,r){this.queue.push({fn:t,delay:r})}next(){const t=this.index++,r=this.queue[t];if(!r)return;const o=this.queue[this.index];if(r.fn(),o){const c=o.delay===void 0?this.defaultDelay:o.delay;setTimeout(()=>this.next(),c)}}};var hd=dd;(function(e){const t=typeof Ln<"u"?Ln:typeof window<"u"?window:{},r=t.WebSocket||Rs,o=t.fetch||Rs,c=od,u=sd,d=ad.EventEmitter,m=ld,b=fd,C=hd,v=ni;let O=!1;const x=function P(p){if(!(this instanceof P))return new P(p);this.opts=v.get(p,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=v.get(this.opts.options.clientId,null),this._globalDefaultChannel=v.channel(v.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=v.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=v.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=v.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=v.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=v.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=v.get(this.opts.connection.reconnect,!0),this.reconnectDecay=v.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=v.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=v.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;let h="error";this.opts.options.debug&&(h="info"),this.log=this.opts.logger||m;try{m.setLevel(h)}catch{}this.opts.channels.forEach((y,N,j)=>j[N]=v.channel(y)),d.call(this),this.setMaxListeners(0)};v.inherits(x,d);for(const P in u)x.prototype[P]=u[P];x.prototype.emits=function(p,h){for(let y=0;y<p.length;y++){const N=y<h.length?h[y]:h[h.length-1];this.emit.apply(this,[p[y]].concat(N))}},x.prototype.api=function(...P){O||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),O=!0),c(...P)},x.prototype.handleMessage=function(p){if(!p)return;this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(p)),p);const h=v.channel(v.get(p.params[0],null));let y=v.get(p.params[1],null);const N=v.get(p.tags["msg-id"],null),j=p.tags=b.badges(b.badgeInfo(b.emotes(p.tags)));for(const L in j){if(L==="emote-sets"||L==="ban-duration"||L==="bits")continue;let $=j[L];typeof $=="boolean"?$=null:$==="1"?$=!0:$==="0"?$=!1:typeof $=="string"&&($=v.unescapeIRC($)),j[L]=$}if(p.prefix===null)switch(p.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":{const L=new Date;this.currentLatency=(L.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break}default:this.log.warn(`Could not parse message with no prefix:
${JSON.stringify(p,null,4)}`);break}else if(p.prefix==="tmi.twitch.tv")switch(p.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=p.params[0];break;case"376":{this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(()=>{this._isConnected()&&this.ws.send("PING"),this.latency=new Date,this.pingTimeout=setTimeout(()=>{this.ws!==null&&(this.wasCloseCalled=!1,this.log.error("Ping timeout."),this.ws.close(),clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer))},v.get(this.opts.connection.timeout,9999))},6e4);let L=v.get(this.opts.options.joinInterval,2e3);L<300&&(L=300);const $=new C(L),z=[...new Set([...this.opts.channels,...this.channels])];this.channels=[];for(let ie=0;ie<z.length;ie++){const ne=z[ie];$.add(()=>{this._isConnected()&&this.join(ne).catch(ce=>this.log.error(ce))})}$.next();break}case"NOTICE":{const L=[null],$=[h,N,y],z=[N],ie=[h,!0],ne=[h,!1],ce=[$,L],le=[$,z],ee=`[${h}] ${y}`;switch(N){case"subs_on":this.log.info(`[${h}] This room is now in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribers"],[ie,ie,L]);break;case"subs_off":this.log.info(`[${h}] This room is no longer in subscribers-only mode.`),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[ne,ne,L]);break;case"emote_only_on":this.log.info(`[${h}] This room is now in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonly"],[ie,L]);break;case"emote_only_off":this.log.info(`[${h}] This room is no longer in emote-only mode.`),this.emits(["emoteonly","_promiseEmoteonlyoff"],[ne,L]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info(`[${h}] This room is now in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[ie,ie,L]);break;case"r9k_off":this.log.info(`[${h}] This room is no longer in r9k mode.`),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[ne,ne,L]);break;case"room_mods":{const ke=y.split(": "),G=(ke.length>1?ke[1]:"").toLowerCase().split(", ").filter(ae=>ae);this.emits(["_promiseMods","mods"],[[null,G],[h,G]]);break}case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[h,[]]]);break;case"vips_success":{y.endsWith(".")&&(y=y.slice(0,-1));const ke=y.split(": "),G=(ke.length>1?ke[1]:"").toLowerCase().split(", ").filter(ae=>ae);this.emits(["_promiseVips","vips"],[[null,G],[h,G]]);break}case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[h,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(ee),this.emits(["notice","_promiseBan"],le);break;case"ban_success":this.log.info(ee),this.emits(["notice","_promiseBan"],ce);break;case"usage_clear":this.log.info(ee),this.emits(["notice","_promiseClear"],le);break;case"usage_mods":this.log.info(ee),this.emits(["notice","_promiseMods"],[$,[N,[]]]);break;case"mod_success":this.log.info(ee),this.emits(["notice","_promiseMod"],ce);break;case"usage_vips":this.log.info(ee),this.emits(["notice","_promiseVips"],[$,[N,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(ee),this.emits(["notice","_promiseVip"],[$,[N,[]]]);break;case"vip_success":this.log.info(ee),this.emits(["notice","_promiseVip"],ce);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(ee),this.emits(["notice","_promiseMod"],le);break;case"unmod_success":this.log.info(ee),this.emits(["notice","_promiseUnmod"],ce);break;case"unvip_success":this.log.info(ee),this.emits(["notice","_promiseUnvip"],ce);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(ee),this.emits(["notice","_promiseUnmod"],le);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(ee),this.emits(["notice","_promiseUnvip"],le);break;case"color_changed":this.log.info(ee),this.emits(["notice","_promiseColor"],ce);break;case"usage_color":case"turbo_only_color":this.log.info(ee),this.emits(["notice","_promiseColor"],le);break;case"commercial_success":this.log.info(ee),this.emits(["notice","_promiseCommercial"],ce);break;case"usage_commercial":case"bad_commercial_error":this.log.info(ee),this.emits(["notice","_promiseCommercial"],le);break;case"hosts_remaining":{this.log.info(ee);const ke=isNaN(y[0])?0:parseInt(y[0]);this.emits(["notice","_promiseHost"],[$,[null,~~ke]]);break}case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(ee),this.emits(["notice","_promiseHost"],[$,[N,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(ee),this.emits(["notice","_promiseR9kbeta"],le);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(ee),this.emits(["notice","_promiseR9kbetaoff"],le);break;case"timeout_success":this.log.info(ee),this.emits(["notice","_promiseTimeout"],ce);break;case"delete_message_success":this.log.info(`[${h} ${y}]`),this.emits(["notice","_promiseDeletemessage"],ce);break;case"already_subs_off":case"usage_subs_off":this.log.info(ee),this.emits(["notice","_promiseSubscribersoff"],le);break;case"already_subs_on":case"usage_subs_on":this.log.info(ee),this.emits(["notice","_promiseSubscribers"],le);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(ee),this.emits(["notice","_promiseEmoteonlyoff"],le);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(ee),this.emits(["notice","_promiseEmoteonly"],le);break;case"usage_slow_on":this.log.info(ee),this.emits(["notice","_promiseSlow"],le);break;case"usage_slow_off":this.log.info(ee),this.emits(["notice","_promiseSlowoff"],le);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(ee),this.emits(["notice","_promiseTimeout"],le);break;case"untimeout_success":case"unban_success":this.log.info(ee),this.emits(["notice","_promiseUnban"],ce);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(ee),this.emits(["notice","_promiseUnban"],le);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(ee),this.emits(["notice","_promiseDeletemessage"],le);break;case"usage_unhost":case"not_hosting":this.log.info(ee),this.emits(["notice","_promiseUnhost"],le);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(ee),this.emits(["notice","_promiseWhisper"],le);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(ee),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[$,[N,h]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(ee),this.emit("automod",h,N,y);break;case"unrecognized_cmd":this.log.info(ee),this.emit("notice",h,N,y);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(ee),this.emit("notice",h,N,y);break;case"host_on":case"host_off":break;default:y.includes("Login unsuccessful")||y.includes("Login authentication failed")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=y,this.log.error(this.reason),this.ws.close()):y.includes("Error logging in")||y.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=y,this.log.error(this.reason),this.ws.close()):y.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn(`Could not parse NOTICE from tmi.twitch.tv:
${JSON.stringify(p,null,4)}`),this.emit("notice",h,N,y));break}break}case"USERNOTICE":{const L=j["display-name"]||j.login,$=j["msg-param-sub-plan"]||"",z=v.unescapeIRC(v.get(j["msg-param-sub-plan-name"],""))||null,ne={prime:$.includes("Prime"),plan:$,planName:z},ce=~~(j["msg-param-streak-months"]||0),le=j["msg-param-recipient-display-name"]||j["msg-param-recipient-user-name"],ee=~~j["msg-param-mass-gift-count"];switch(j["message-type"]=N,N){case"resub":this.emits(["resub","subanniversary"],[[h,L,ce,y,j,ne]]);break;case"sub":this.emits(["subscription","sub"],[[h,L,ne,y,j]]);break;case"subgift":this.emit("subgift",h,L,ce,le,ne,j);break;case"anonsubgift":this.emit("anonsubgift",h,ce,le,ne,j);break;case"submysterygift":this.emit("submysterygift",h,L,ee,ne,j);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",h,ee,ne,j);break;case"primepaidupgrade":this.emit("primepaidupgrade",h,L,ne,j);break;case"giftpaidupgrade":{const ke=j["msg-param-sender-name"]||j["msg-param-sender-login"];this.emit("giftpaidupgrade",h,L,ke,j);break}case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",h,L,j);break;case"raid":{const ke=j["msg-param-displayName"]||j["msg-param-login"],G=+j["msg-param-viewerCount"];this.emit("raided",h,ke,G,j);break}case"ritual":{const ke=j["msg-param-ritual-name"];switch(ke){case"new_chatter":this.emit("newchatter",h,L,j,y);break;default:this.emit("ritual",ke,h,L,j,y);break}break}default:this.emit("usernotice",N,h,j,y);break}break}case"HOSTTARGET":{const L=y.split(" "),$=~~L[1]||0;L[0]==="-"?(this.log.info(`[${h}] Exited host mode.`),this.emits(["unhost","_promiseUnhost"],[[h,$],[null]])):(this.log.info(`[${h}] Now hosting ${L[0]} for ${$} viewer(s).`),this.emit("hosting",h,L[0],$));break}case"CLEARCHAT":if(p.params.length>1){const L=v.get(p.tags["ban-duration"],null);L===null?(this.log.info(`[${h}] ${y} has been banned.`),this.emit("ban",h,y,null,p.tags)):(this.log.info(`[${h}] ${y} has been timed out for ${L} seconds.`),this.emit("timeout",h,y,null,~~L,p.tags))}else this.log.info(`[${h}] Chat was cleared by a moderator.`),this.emits(["clearchat","_promiseClear"],[[h],[null]]);break;case"CLEARMSG":if(p.params.length>1){const L=y,$=j.login;j["message-type"]="messagedeleted",this.log.info(`[${h}] ${$}'s message has been deleted.`),this.emit("messagedeleted",h,$,L,j)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info(`Disconnecting and reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.disconnect().catch(L=>this.log.error(L)),setTimeout(()=>this.connect().catch(L=>this.log.error(L)),this.reconnectTimer);break;case"USERSTATE":p.tags.username=this.username,p.tags["user-type"]==="mod"&&(this.moderators[h]||(this.moderators[h]=[]),this.moderators[h].includes(this.username)||this.moderators[h].push(this.username)),!v.isJustinfan(this.getUsername())&&!this.userstate[h]&&(this.userstate[h]=j,this.lastJoined=h,this.channels.push(h),this.log.info(`Joined ${h}`),this.emit("join",h,v.username(this.getUsername()),!0)),p.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(p.tags["emote-sets"]),this.userstate[h]=j;break;case"GLOBALUSERSTATE":this.globaluserstate=j,this.emit("globaluserstate",j),typeof p.tags["emote-sets"]<"u"&&this._updateEmoteset(p.tags["emote-sets"]);break;case"ROOMSTATE":if(v.channel(this.lastJoined)===h&&this.emit("_promiseJoin",null,h),p.tags.channel=h,this.emit("roomstate",h,p.tags),!v.hasOwn(p.tags,"subs-only")){if(v.hasOwn(p.tags,"slow"))if(typeof p.tags.slow=="boolean"&&!p.tags.slow){const L=[h,!1,0];this.log.info(`[${h}] This room is no longer in slow mode.`),this.emits(["slow","slowmode","_promiseSlowoff"],[L,L,[null]])}else{const L=~~p.tags.slow,$=[h,!0,L];this.log.info(`[${h}] This room is now in slow mode.`),this.emits(["slow","slowmode","_promiseSlow"],[$,$,[null]])}if(v.hasOwn(p.tags,"followers-only"))if(p.tags["followers-only"]==="-1"){const L=[h,!1,0];this.log.info(`[${h}] This room is no longer in followers-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[L,L,[null]])}else{const L=~~p.tags["followers-only"],$=[h,!0,L];this.log.info(`[${h}] This room is now in follower-only mode.`),this.emits(["followersonly","followersmode","_promiseFollowers"],[$,$,[null]])}}break;case"SERVERCHANGE":break;default:this.log.warn(`Could not parse message from tmi.twitch.tv:
${JSON.stringify(p,null,4)}`);break}else if(p.prefix==="jtv")switch(p.command){case"MODE":y==="+o"?(this.moderators[h]||(this.moderators[h]=[]),this.moderators[h].includes(p.params[2])||this.moderators[h].push(p.params[2]),this.emit("mod",h,p.params[2])):y==="-o"&&(this.moderators[h]||(this.moderators[h]=[]),this.moderators[h].filter(L=>L!==p.params[2]),this.emit("unmod",h,p.params[2]));break;default:this.log.warn(`Could not parse message from jtv:
${JSON.stringify(p,null,4)}`);break}else switch(p.command){case"353":this.emit("names",p.params[2],p.params[3].split(" "));break;case"366":break;case"JOIN":{const L=p.prefix.split("!")[0];v.isJustinfan(this.getUsername())&&this.username===L&&(this.lastJoined=h,this.channels.push(h),this.log.info(`Joined ${h}`),this.emit("join",h,L,!0)),this.username!==L&&this.emit("join",h,L,!1);break}case"PART":{let L=!1;const $=p.prefix.split("!")[0];if(this.username===$){L=!0,this.userstate[h]&&delete this.userstate[h];let z=this.channels.indexOf(h);z!==-1&&this.channels.splice(z,1),z=this.opts.channels.indexOf(h),z!==-1&&this.opts.channels.splice(z,1),this.log.info(`Left ${h}`),this.emit("_promisePart",null)}this.emit("part",h,$,L);break}case"WHISPER":{const L=p.prefix.split("!")[0];this.log.info(`[WHISPER] <${L}>: ${y}`),v.hasOwn(p.tags,"username")||(p.tags.username=L),p.tags["message-type"]="whisper";const $=v.channel(p.tags.username);this.emits(["whisper","message"],[[$,p.tags,y,!1]]);break}case"PRIVMSG":if(p.tags.username=p.prefix.split("!")[0],p.tags.username==="jtv"){const L=v.username(y.split(" ")[0]),$=y.includes("auto");if(y.includes("hosting you for")){const z=v.extractNumber(y);this.emit("hosted",h,L,z,$)}else y.includes("hosting you")&&this.emit("hosted",h,L,0,$)}else{const L=v.get(this.opts.options.messagesLogLevel,"info"),$=v.actionMessage(y);if(p.tags["message-type"]=$?"action":"chat",y=$?$[1]:y,v.hasOwn(p.tags,"bits"))this.emit("cheer",h,p.tags,y);else{if(v.hasOwn(p.tags,"msg-id")){if(p.tags["msg-id"]==="highlighted-message"){const z=p.tags["msg-id"];this.emit("redeem",h,p.tags.username,z,p.tags,y)}else if(p.tags["msg-id"]==="skip-subs-mode-message"){const z=p.tags["msg-id"];this.emit("redeem",h,p.tags.username,z,p.tags,y)}}else if(v.hasOwn(p.tags,"custom-reward-id")){const z=p.tags["custom-reward-id"];this.emit("redeem",h,p.tags.username,z,p.tags,y)}$?(this.log[L](`[${h}] *<${p.tags.username}>: ${y}`),this.emits(["action","message"],[[h,p.tags,y,!1]])):(this.log[L](`[${h}] <${p.tags.username}>: ${y}`),this.emits(["chat","message"],[[h,p.tags,y,!1]]))}}break;default:this.log.warn(`Could not parse message:
${JSON.stringify(p,null,4)}`);break}},x.prototype.connect=function(){return new Promise((p,h)=>{this.server=v.get(this.opts.connection.server,"irc-ws.chat.twitch.tv"),this.port=v.get(this.opts.connection.port,80),this.secure&&(this.port=443),this.port===443&&(this.secure=!0),this.reconnectTimer=this.reconnectTimer*this.reconnectDecay,this.reconnectTimer>=this.maxReconnectInterval&&(this.reconnectTimer=this.maxReconnectInterval),this._openConnection(),this.once("_promiseConnect",y=>{y?h(y):p([this.server,~~this.port])})})},x.prototype._openConnection=function(){const p=`${this.secure?"wss":"ws"}://${this.server}:${this.port}/`,h={};"agent"in this.opts.connection&&(h.agent=this.opts.connection.agent),this.ws=new r(p,"irc",h),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},x.prototype._onOpen=function(){this._isConnected()&&(this.log.info(`Connecting to ${this.server} on port ${this.port}..`),this.emit("connecting",this.server,~~this.port),this.username=v.get(this.opts.identity.username,v.justinfan()),this._getToken().then(p=>{const h=v.password(p);this.log.info("Sending authentication to server.."),this.emit("logon");let y="twitch.tv/tags twitch.tv/commands";this._skipMembership||(y+=" twitch.tv/membership"),this.ws.send("CAP REQ :"+y),h?this.ws.send(`PASS ${h}`):v.isJustinfan(this.username)&&this.ws.send("PASS SCHMOOPIIE"),this.ws.send(`NICK ${this.username}`)}).catch(p=>{this.emits(["_promiseConnect","disconnected"],[[p],["Could not get a token."]])}))},x.prototype._getToken=function(){const p=this.opts.identity.password;let h;return typeof p=="function"?(h=p(),h instanceof Promise?h:Promise.resolve(h)):Promise.resolve(p)},x.prototype._onMessage=function(p){p.data.trim().split(`\r
`).forEach(y=>{const N=b.msg(y);N&&this.handleMessage(N)})},x.prototype._onError=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=this.ws===null?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(p=>this.log.error(p))},this.reconnectTimer)),this.ws=null},x.prototype._onClose=function(){this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error(`Could not connect to server. Reconnecting in ${Math.round(this.reconnectTimer/1e3)} seconds..`),this.emit("reconnect"),setTimeout(()=>{this.reconnecting=!1,this.connect().catch(p=>this.log.error(p))},this.reconnectTimer))),this.ws=null},x.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},x.prototype._sendCommand=function(p,h,y,N){return new Promise((j,L)=>{if(this._isConnected())(p===null||typeof p=="number")&&(p===null&&(p=this._getPromiseDelay()),v.promiseDelay(p).then(()=>L("No response from Twitch.")));else return L("Not connected to server.");if(h!==null){const $=v.channel(h);this.log.info(`[${$}] Executing command: ${y}`),this.ws.send(`PRIVMSG ${$} :${y}`)}else this.log.info(`Executing command: ${y}`),this.ws.send(y);typeof N=="function"?N(j,L):j()})},x.prototype._sendMessage=function(p,h,y,N){return new Promise((j,L)=>{if(this._isConnected()){if(v.isJustinfan(this.getUsername()))return L("Cannot send anonymous messages.")}else return L("Not connected to server.");const $=v.channel(h);if(this.userstate[$]||(this.userstate[$]={}),y.length>=500){const le=v.splitLine(y,500);y=le[0],setTimeout(()=>{this._sendMessage(p,h,le[1],()=>{})},350)}this.ws.send(`PRIVMSG ${$} :${y}`);const z={};Object.keys(this.emotesets).forEach(le=>this.emotesets[le].forEach(ee=>(v.isRegex(ee.code)?b.emoteRegex:b.emoteString)(y,ee.code,ee.id,z)));const ie=Object.assign(this.userstate[$],b.emotes({emotes:b.transformEmotes(z)||null})),ne=v.get(this.opts.options.messagesLogLevel,"info"),ce=v.actionMessage(y);ce?(ie["message-type"]="action",this.log[ne](`[${$}] *<${this.getUsername()}>: ${ce[1]}`),this.emits(["action","message"],[[$,ie,ce[1],!0]])):(ie["message-type"]="chat",this.log[ne](`[${$}] <${this.getUsername()}>: ${y}`),this.emits(["chat","message"],[[$,ie,y,!0]])),typeof N=="function"?N(j,L):j()})},x.prototype._updateEmoteset=function(p){let h=p!==void 0;if(h&&(p===this.emotes?h=!1:this.emotes=p),this._skipUpdatingEmotesets){h&&this.emit("emotesets",p,{});return}const y=()=>{this._updateEmotesetsTimerDelay>0&&(clearTimeout(this._updateEmotesetsTimer),this._updateEmotesetsTimer=setTimeout(()=>this._updateEmoteset(p),this._updateEmotesetsTimerDelay))};this._getToken().then(N=>{const j=`https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=${p}`,L={};return"fetchAgent"in this.opts.connection&&(L.agent=this.opts.connection.fetchAgent),o(j,{...L,headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:`OAuth ${v.token(N)}`,"Client-ID":this.clientId}})}).then(N=>N.json()).then(N=>{this.emotesets=N.emoticon_sets||{},this.emit("emotesets",p,this.emotesets),y()}).catch(()=>y())},x.prototype.getUsername=function(){return this.username},x.prototype.getOptions=function(){return this.opts},x.prototype.getChannels=function(){return this.channels},x.prototype.isMod=function(p,h){const y=v.channel(p);return this.moderators[y]||(this.moderators[y]=[]),this.moderators[y].includes(v.username(h))},x.prototype.readyState=function(){return this.ws===null?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},x.prototype._isConnected=function(){return this.ws!==null&&this.ws.readyState===1},x.prototype.disconnect=function(){return new Promise((p,h)=>{this.ws!==null&&this.ws.readyState!==3?(this.wasCloseCalled=!0,this.log.info("Disconnecting from server.."),this.ws.close(),this.once("_promiseDisconnect",()=>p([this.server,~~this.port]))):(this.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),h("Cannot disconnect from server. Socket is not opened or connection is already closing."))})},x.prototype.off=x.prototype.removeListener,e.exports&&(e.exports=x),typeof window<"u"&&(window.tmi={client:x,Client:x})})(su);var pd=su.exports;const pc=pd;var md={client:pc,Client:pc};const gd=ou(md);class yd{async getVideo(t){const r=await fetch(`api/youtube/video?id=${t}`).then(o=>o);if(r.ok){const{snippet:o}=await r.json().then(c=>c.items[0]);return{title:o.title,channelTitle:o.channelTitle,thumbnail:o.thumbnails.medium.url}}}}const vd=new yd;var Ns=(e=>(e.TWITCH="twitch",e.DONATIONALERTS="donationalerts",e))(Ns||{}),Ze=(e=>(e[e.NOT_EXISTS=0]="NOT_EXISTS",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED",e[e.CONNECTING=3]="CONNECTING",e))(Ze||{}),xt=(e=>(e.UNSTARTED="unstarted",e.PAUSED="paused",e.RUNNING="running",e.FINISHED="finished",e))(xt||{}),Mi=(e=>(e[e.UNSTARTED=-1]="UNSTARTED",e[e.ENDED=0]="ENDED",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.BUFFERING=3]="BUFFERING",e[e.VIDEO_CUED=5]="VIDEO_CUED",e))(Mi||{}),xr;class bd{constructor(t,r){W(this,xr,Te());re(this,"_key","");this._key=r,this.value=t,this._initializeValue(),Wc(()=>{Ne(()=>{this._updateLocalStorage()})})}get value(){return V(M(this,xr))}set value(t){Ae(M(this,xr),xe(t))}_initializeValue(){const t=localStorage.getItem(this._key);if(t){const r=this._deserialize(t);r&&(this.value=r)}else localStorage.setItem(this._key,this._serialize(this.value))}_updateLocalStorage(){const t=this._serialize(this.value);localStorage.getItem(this._key)!==t&&localStorage.setItem(this._key,t)}_serialize(t){return JSON.stringify(t)}_deserialize(t){try{return JSON.parse(t)}catch{return}}}xr=new WeakMap;function $n(e,t){return new bd(e,t)}var kr,zi,Wi,Hi;class _d{constructor(){re(this,"_settings",$n({isEnabled:!1,neededVotes:10,keepKeyword:"Оставить",skipKeyword:"Пропустить",shouldAutoSkip:!1},"pollSettings"));W(this,kr,Te(xe({keep:0,skip:0})));W(this,zi,he(()=>this._counter.skip-this._counter.keep));W(this,Wi,he(this.calculateProgressBarPercentage.bind(this)));W(this,Hi,he(()=>this.difference>=this._settings.value.neededVotes));re(this,"_votedUsers",new Set)}get _counter(){return V(M(this,kr))}set _counter(t){Ae(M(this,kr),xe(t))}get difference(){return V(M(this,zi))}get currentPercent(){return V(M(this,Wi))}get isEnoughVotes(){return V(M(this,Hi))}addKeep(t){this._votedUsers.has(t)||this._counter.keep++}addSkip(t){this._votedUsers.has(t)||this._counter.skip++}resetCounter(){this._counter={keep:0,skip:0},this._votedUsers.clear()}calculateProgressBarPercentage(){return this.difference/this._settings.value.neededVotes*-50+50}get keep(){return this._counter.keep}get skip(){return this._counter.skip}get isEnabled(){return this._settings.value.isEnabled}set isEnabled(t){this._settings.value.isEnabled=t}get neededVotes(){return this._settings.value.neededVotes}set neededVotes(t){this._settings.value.neededVotes=t}get keepKeyword(){return this._settings.value.keepKeyword}set keepKeyword(t){this._settings.value.keepKeyword=t}get skipKeyword(){return this._settings.value.skipKeyword}set skipKeyword(t){this._settings.value.skipKeyword=t}get shouldAutoSkip(){return this._settings.value.shouldAutoSkip}set shouldAutoSkip(t){this._settings.value.shouldAutoSkip=t}}kr=new WeakMap,zi=new WeakMap,Wi=new WeakMap,Hi=new WeakMap;var Cr,Sr,Ui;class wd{constructor(){re(this,"_settings",$n({isEnabled:!1,pricePerSecond:20,onStateFinishedAction:"pause"},"timerSettings"));W(this,Cr,Te(0));W(this,Sr,Te(xe(xt.UNSTARTED)));W(this,Ui,he(()=>Gf(this._time)));re(this,"_currentTime",0);re(this,"_animationId",0);re(this,"_animationStartTime",0);re(this,"_animationPausedTime",0)}get _time(){return V(M(this,Cr))}set _time(t){Ae(M(this,Cr),xe(t))}get _state(){return V(M(this,Sr))}set _state(t){Ae(M(this,Sr),xe(t))}get hhmmss(){return V(M(this,Ui))}start(t){t&&this.setTime(t),this._animationStartTime=performance.now()-this._animationPausedTime,this._state=xt.RUNNING,this._animationId=requestAnimationFrame(this.tick.bind(this))}pause(){this._state===xt.PAUSED||this._state===xt.UNSTARTED||(cancelAnimationFrame(this._animationId),this._animationPausedTime=performance.now()-this._animationStartTime,this._state=xt.PAUSED)}add(t){this._currentTime+=t,this._time+=t}subtract(t){this._time=this._time<=0?0:Math.max(0,this._time-t),this._currentTime-=t}reset(){this._resetTime(),this._state=xt.UNSTARTED}stop(){this._resetTime(),this._state=xt.FINISHED}setTime(t){this._currentTime=t,this._time=t}tick(t){const r=t-this._animationStartTime,o=this._currentTime-r;o<=0?this.stop():(this._time=Math.round(o),this._animationId=requestAnimationFrame(this.tick.bind(this)))}_resetTime(){cancelAnimationFrame(this._animationId),this._time=0,this._currentTime=0,this._animationPausedTime=0}get time(){return this._time}get state(){return this._state}get isEnabled(){return this._settings.value.isEnabled}set isEnabled(t){this._settings.value.isEnabled=t}get pricePerSecond(){return this._settings.value.pricePerSecond}set pricePerSecond(t){this._settings.value.pricePerSecond=t}get onStateFinishedAction(){return this._settings.value.onStateFinishedAction}set onStateFinishedAction(t){this._settings.value.onStateFinishedAction=t}}Cr=new WeakMap,Sr=new WeakMap,Ui=new WeakMap;var Er;class xd{constructor(){W(this,Er,Te(xe(Ze.NOT_EXISTS)));re(this,"_socket");re(this,"onMessage",null)}get _state(){return V(M(this,Er))}set _state(t){Ae(M(this,Er),xe(t))}connect(t){this._state=Ze.CONNECTING,this._socket=new gd.Client({channels:[t]}),this._socket.on("connected",()=>this._state=Ze.OPEN),this._socket.on("message",(r,o,c)=>{var u;(u=this.onMessage)==null||u.call(this,r,o,c)}),this._socket.on("disconnected",()=>this._state=Ze.CLOSED),this._socket.connect()}disconnect(){var t;(t=this._socket)==null||t.disconnect(),this._state=Ze.CLOSED}get state(){return this._state}}Er=new WeakMap;var Ar;class kd{constructor(){W(this,Ar,Te(xe(Ze.CLOSED)));re(this,"_socket");re(this,"onDonation")}get _state(){return V(M(this,Ar))}set _state(t){Ae(M(this,Ar),xe(t))}async connect(t){this._state=Ze.CONNECTING,this._socket=new WebSocket("wss://centrifugo.donationalerts.com/connection/websocket"),this._socket.addEventListener("open",()=>{var r;(r=this._socket)==null||r.send(JSON.stringify({params:{token:t.socket_connection_token},id:1}))}),this._socket.addEventListener("message",async r=>{var u,d;const o=JSON.parse(r.data),c=`$alerts:donation_${t.id}`;if(o.id===1){const m=await fetch("/api/centrifugo/subscribe",{method:"POST",body:JSON.stringify({channels:[c],client:o.result.client})}).then(b=>b.json()).then(b=>b);(u=this._socket)==null||u.send(JSON.stringify({params:{channel:c,token:m},method:1,id:2})),this._state=Ze.OPEN}if(!o.result.type&&o.result.channel===c){const m=o.result.data.data;(d=this.onDonation)==null||d.call(this,m)}}),this._socket.addEventListener("close",()=>{this._state=Ze.CLOSED}),this._socket.addEventListener("error",r=>{console.error("WebSocket error:",r),this._state=Ze.CLOSED})}disconnect(){var t;(t=this._socket)==null||t.close(),this._state=Ze.CLOSED}get state(){return this._state}}Ar=new WeakMap;var lu={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(Ln,function(){var r=function(n,i){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])})(n,i)},o=function(){return(o=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++)for(var l in i=arguments[s])Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l]);return n}).apply(this,arguments)};function c(n,i,s){for(var a,l=0,f=i.length;l<f;l++)!a&&l in i||((a=a||Array.prototype.slice.call(i,0,l))[l]=i[l]);return n.concat(a||Array.prototype.slice.call(i))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ln,d=Object.keys,m=Array.isArray;function b(n,i){return typeof i!="object"||d(i).forEach(function(s){n[s]=i[s]}),n}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var C=Object.getPrototypeOf,v={}.hasOwnProperty;function O(n,i){return v.call(n,i)}function x(n,i){typeof i=="function"&&(i=i(C(n))),(typeof Reflect>"u"?d:Reflect.ownKeys)(i).forEach(function(s){p(n,s,i[s])})}var P=Object.defineProperty;function p(n,i,s,a){P(n,i,b(s&&O(s,"get")&&typeof s.get=="function"?{get:s.get,set:s.set,configurable:!0}:{value:s,configurable:!0,writable:!0},a))}function h(n){return{from:function(i){return n.prototype=Object.create(i.prototype),p(n.prototype,"constructor",n),{extend:x.bind(null,n.prototype)}}}}var y=Object.getOwnPropertyDescriptor,N=[].slice;function j(n,i,s){return N.call(n,i,s)}function L(n,i){return i(n)}function $(n){if(!n)throw new Error("Assertion Failed")}function z(n){u.setImmediate?setImmediate(n):setTimeout(n,0)}function ie(n,i){if(typeof i=="string"&&O(n,i))return n[i];if(!i)return n;if(typeof i!="string"){for(var s=[],a=0,l=i.length;a<l;++a){var f=ie(n,i[a]);s.push(f)}return s}var g=i.indexOf(".");if(g!==-1){var _=n[i.substr(0,g)];return _==null?void 0:ie(_,i.substr(g+1))}}function ne(n,i,s){if(n&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof i!="string"&&"length"in i){$(typeof s!="string"&&"length"in s);for(var a=0,l=i.length;a<l;++a)ne(n,i[a],s[a])}else{var f,g,_=i.indexOf(".");_!==-1?(f=i.substr(0,_),(g=i.substr(_+1))===""?s===void 0?m(n)&&!isNaN(parseInt(f))?n.splice(f,1):delete n[f]:n[f]=s:ne(_=!(_=n[f])||!O(n,f)?n[f]={}:_,g,s)):s===void 0?m(n)&&!isNaN(parseInt(i))?n.splice(i,1):delete n[i]:n[i]=s}}function ce(n){var i,s={};for(i in n)O(n,i)&&(s[i]=n[i]);return s}var le=[].concat;function ee(n){return le.apply([],n)}var bt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ee([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(i){return i+n+"Array"})}))).filter(function(n){return u[n]}),ke=new Set(bt.map(function(n){return u[n]})),G=null;function ae(n){return G=new WeakMap,n=function i(s){if(!s||typeof s!="object")return s;var a=G.get(s);if(a)return a;if(m(s)){a=[],G.set(s,a);for(var l=0,f=s.length;l<f;++l)a.push(i(s[l]))}else if(ke.has(s.constructor))a=s;else{var g,_=C(s);for(g in a=_===Object.prototype?{}:Object.create(_),G.set(s,a),s)O(s,g)&&(a[g]=i(s[g]))}return a}(n),G=null,n}var oe={}.toString;function ge(n){return oe.call(n).slice(8,-1)}var fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ye=typeof fe=="symbol"?function(n){var i;return n!=null&&(i=n[fe])&&i.apply(n)}:function(){return null};function pe(n,i){return i=n.indexOf(i),0<=i&&n.splice(i,1),0<=i}var be={};function Pe(n){var i,s,a,l;if(arguments.length===1){if(m(n))return n.slice();if(this===be&&typeof n=="string")return[n];if(l=ye(n)){for(s=[];!(a=l.next()).done;)s.push(a.value);return s}if(n==null)return[n];if(typeof(i=n.length)!="number")return[n];for(s=new Array(i);i--;)s[i]=n[i];return s}for(i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return s}var Ke=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Hn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Hn),ut={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Tt(n,i){this.name=n,this.message=i}function yn(n,i){return n+". Errors: "+Object.keys(i).map(function(s){return i[s].toString()}).filter(function(s,a,l){return l.indexOf(s)===a}).join(`
`)}function It(n,i,s,a){this.failures=i,this.failedKeys=a,this.successCount=s,this.message=yn(n,i)}function yt(n,i){this.name="BulkError",this.failures=Object.keys(i).map(function(s){return i[s]}),this.failuresByPos=i,this.message=yn(n,this.failures)}h(Tt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),h(It).from(Tt),h(yt).from(Tt);var Vn=rt.reduce(function(n,i){return n[i]=i+"Error",n},{}),Lu=Tt,ue=rt.reduce(function(n,i){var s=i+"Error";function a(l,f){this.name=s,l?typeof l=="string"?(this.message="".concat(l).concat(f?`
 `+f:""),this.inner=f||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=ut[i]||s,this.inner=null)}return h(a).from(Lu),n[i]=a,n},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var sa=Hn.reduce(function(n,i){return n[i+"Error"]=ue[i],n},{}),ii=rt.reduce(function(n,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(n[i+"Error"]=ue[i]),n},{});function Ie(){}function zn(n){return n}function $u(n,i){return n==null||n===zn?i:function(s){return i(n(s))}}function Yt(n,i){return function(){n.apply(this,arguments),i.apply(this,arguments)}}function Fu(n,i){return n===Ie?i:function(){var s=n.apply(this,arguments);s!==void 0&&(arguments[0]=s);var a=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var f=i.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Yt(a,this.onsuccess):a),l&&(this.onerror=this.onerror?Yt(l,this.onerror):l),f!==void 0?f:s}}function Ku(n,i){return n===Ie?i:function(){n.apply(this,arguments);var s=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?Yt(s,this.onsuccess):s),a&&(this.onerror=this.onerror?Yt(a,this.onerror):a)}}function Bu(n,i){return n===Ie?i:function(s){var a=n.apply(this,arguments);b(s,a);var l=this.onsuccess,f=this.onerror;return this.onsuccess=null,this.onerror=null,s=i.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?Yt(l,this.onsuccess):l),f&&(this.onerror=this.onerror?Yt(f,this.onerror):f),a===void 0?s===void 0?void 0:s:b(a,s)}}function qu(n,i){return n===Ie?i:function(){return i.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function $o(n,i){return n===Ie?i:function(){var s=n.apply(this,arguments);if(s&&typeof s.then=="function"){for(var a=this,l=arguments.length,f=new Array(l);l--;)f[l]=arguments[l];return s.then(function(){return i.apply(a,f)})}return i.apply(this,arguments)}}ii.ModifyError=It,ii.DexieError=Tt,ii.BulkError=yt;var lt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function aa(n){lt=n}var Wn={},ca=100,bt=typeof Promise>"u"?[]:function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,C(n),n];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,C(i),n]}(),Hn=bt[0],rt=bt[1],bt=bt[2],rt=rt&&rt.then,Qt=Hn&&Hn.constructor,Fo=!!bt,Un=function(n,i){Gn.push([n,i]),oi&&(queueMicrotask(zu),oi=!1)},Ko=!0,oi=!0,Zt=[],si=[],Bo=zn,Rt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ie,pgp:!1,env:{},finalize:Ie},se=Rt,Gn=[],en=0,ai=[];function Z(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=se;if(typeof n!="function"){if(n!==Wn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Vo(this,this._value))}this._state=null,this._value=null,++i.ref,function s(a,l){try{l(function(f){if(a._state===null){if(f===a)throw new TypeError("A promise cannot be resolved with itself.");var g=a._lib&&vn();f&&typeof f.then=="function"?s(a,function(_,k){f instanceof Z?f._then(_,k):f.then(_,k)}):(a._state=!0,a._value=f,la(a)),g&&bn()}},Vo.bind(null,a))}catch(f){Vo(a,f)}}(this,n)}var qo={get:function(){var n=se,i=fi;function s(a,l){var f=this,g=!n.global&&(n!==se||i!==fi),_=g&&!Dt(),k=new Z(function(E,I){zo(f,new ua(da(a,n,g,_),da(l,n,g,_),E,I,n))});return this._consoleTask&&(k._consoleTask=this._consoleTask),k}return s.prototype=Wn,s},set:function(n){p(this,"then",n&&n.prototype===Wn?qo:{get:function(){return n},set:qo.set})}};function ua(n,i,s,a,l){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof i=="function"?i:null,this.resolve=s,this.reject=a,this.psd=l}function Vo(n,i){var s,a;si.push(i),n._state===null&&(s=n._lib&&vn(),i=Bo(i),n._state=!1,n._value=i,a=n,Zt.some(function(l){return l._value===a._value})||Zt.push(a),la(n),s&&bn())}function la(n){var i=n._listeners;n._listeners=[];for(var s=0,a=i.length;s<a;++s)zo(n,i[s]);var l=n._PSD;--l.ref||l.finalize(),en===0&&(++en,Un(function(){--en==0&&Wo()},[]))}function zo(n,i){if(n._state!==null){var s=n._state?i.onFulfilled:i.onRejected;if(s===null)return(n._state?i.resolve:i.reject)(n._value);++i.psd.ref,++en,Un(Vu,[s,n,i])}else n._listeners.push(i)}function Vu(n,i,s){try{var a,l=i._value;!i._state&&si.length&&(si=[]),a=lt&&i._consoleTask?i._consoleTask.run(function(){return n(l)}):n(l),i._state||si.indexOf(l)!==-1||function(f){for(var g=Zt.length;g;)if(Zt[--g]._value===f._value)return Zt.splice(g,1)}(i),s.resolve(a)}catch(f){s.reject(f)}finally{--en==0&&Wo(),--s.psd.ref||s.psd.finalize()}}function zu(){tn(Rt,function(){vn()&&bn()})}function vn(){var n=Ko;return oi=Ko=!1,n}function bn(){var n,i,s;do for(;0<Gn.length;)for(n=Gn,Gn=[],s=n.length,i=0;i<s;++i){var a=n[i];a[0].apply(null,a[1])}while(0<Gn.length);oi=Ko=!0}function Wo(){var n=Zt;Zt=[],n.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var i=ai.slice(0),s=i.length;s;)i[--s]()}function ci(n){return new Z(Wn,!1,n)}function je(n,i){var s=se;return function(){var a=vn(),l=se;try{return Mt(s,!0),n.apply(this,arguments)}catch(f){i&&i(f)}finally{Mt(l,!1),a&&bn()}}}x(Z.prototype,{then:qo,_then:function(n,i){zo(this,new ua(null,null,n,i,se))},catch:function(n){if(arguments.length===1)return this.then(null,n);var i=n,s=arguments[1];return typeof i=="function"?this.then(null,function(a){return(a instanceof i?s:ci)(a)}):this.then(null,function(a){return(a&&a.name===i?s:ci)(a)})},finally:function(n){return this.then(function(i){return Z.resolve(n()).then(function(){return i})},function(i){return Z.resolve(n()).then(function(){return ci(i)})})},timeout:function(n,i){var s=this;return n<1/0?new Z(function(a,l){var f=setTimeout(function(){return l(new ue.Timeout(i))},n);s.then(a,l).finally(clearTimeout.bind(null,f))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&p(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),Rt.env=fa(),x(Z,{all:function(){var n=Pe.apply(null,arguments).map(di);return new Z(function(i,s){n.length===0&&i([]);var a=n.length;n.forEach(function(l,f){return Z.resolve(l).then(function(g){n[f]=g,--a||i(n)},s)})})},resolve:function(n){return n instanceof Z?n:n&&typeof n.then=="function"?new Z(function(i,s){n.then(i,s)}):new Z(Wn,!0,n)},reject:ci,race:function(){var n=Pe.apply(null,arguments).map(di);return new Z(function(i,s){n.map(function(a){return Z.resolve(a).then(i,s)})})},PSD:{get:function(){return se},set:function(n){return se=n}},totalEchoes:{get:function(){return fi}},newPSD:Nt,usePSD:tn,scheduler:{get:function(){return Un},set:function(n){Un=n}},rejectionMapper:{get:function(){return Bo},set:function(n){Bo=n}},follow:function(n,i){return new Z(function(s,a){return Nt(function(l,f){var g=se;g.unhandleds=[],g.onunhandled=f,g.finalize=Yt(function(){var _,k=this;_=function(){k.unhandleds.length===0?l():f(k.unhandleds[0])},ai.push(function E(){_(),ai.splice(ai.indexOf(E),1)}),++en,Un(function(){--en==0&&Wo()},[])},g.finalize),n()},i,s,a)})}}),Qt&&(Qt.allSettled&&p(Z,"allSettled",function(){var n=Pe.apply(null,arguments).map(di);return new Z(function(i){n.length===0&&i([]);var s=n.length,a=new Array(s);n.forEach(function(l,f){return Z.resolve(l).then(function(g){return a[f]={status:"fulfilled",value:g}},function(g){return a[f]={status:"rejected",reason:g}}).then(function(){return--s||i(a)})})})}),Qt.any&&typeof AggregateError<"u"&&p(Z,"any",function(){var n=Pe.apply(null,arguments).map(di);return new Z(function(i,s){n.length===0&&s(new AggregateError([]));var a=n.length,l=new Array(a);n.forEach(function(f,g){return Z.resolve(f).then(function(_){return i(_)},function(_){l[g]=_,--a||s(new AggregateError(l))})})})}),Qt.withResolvers&&(Z.withResolvers=Qt.withResolvers));var qe={awaits:0,echoes:0,id:0},Wu=0,ui=[],li=0,fi=0,Hu=0;function Nt(n,i,s,a){var l=se,f=Object.create(l);return f.parent=l,f.ref=0,f.global=!1,f.id=++Hu,Rt.env,f.env=Fo?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},i&&b(f,i),++l.ref,f.finalize=function(){--this.parent.ref||this.parent.finalize()},a=tn(f,n,s,a),f.ref===0&&f.finalize(),a}function _n(){return qe.id||(qe.id=++Wu),++qe.awaits,qe.echoes+=ca,qe.id}function Dt(){return!!qe.awaits&&(--qe.awaits==0&&(qe.id=0),qe.echoes=qe.awaits*ca,!0)}function di(n){return qe.echoes&&n&&n.constructor===Qt?(_n(),n.then(function(i){return Dt(),i},function(i){return Dt(),$e(i)})):n}function Uu(){var n=ui[ui.length-1];ui.pop(),Mt(n,!1)}function Mt(n,i){var s,a=se;(i?!qe.echoes||li++&&n===se:!li||--li&&n===se)||queueMicrotask(i?(function(l){++fi,qe.echoes&&--qe.echoes!=0||(qe.echoes=qe.awaits=qe.id=0),ui.push(se),Mt(l,!0)}).bind(null,n):Uu),n!==se&&(se=n,a===Rt&&(Rt.env=fa()),Fo&&(s=Rt.env.Promise,i=n.env,(a.global||n.global)&&(Object.defineProperty(u,"Promise",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))))}function fa(){var n=u.Promise;return Fo?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function tn(n,i,s,a,l){var f=se;try{return Mt(n,!0),i(s,a,l)}finally{Mt(f,!1)}}function da(n,i,s,a){return typeof n!="function"?n:function(){var l=se;s&&_n(),Mt(i,!0);try{return n.apply(this,arguments)}finally{Mt(l,!1),a&&queueMicrotask(Dt)}}}function Ho(n){Promise===Qt&&qe.echoes===0?li===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+rt).indexOf("[native code]")===-1&&(_n=Dt=Ie);var $e=Z.reject,nn="￿",vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ha="String expected.",wn=[],hi="__dbnames",Uo="readonly",Go="readwrite";function rn(n,i){return n?i?function(){return n.apply(this,arguments)&&i.apply(this,arguments)}:n:i}var pa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pi(n){return typeof n!="string"||/\./.test(n)?function(i){return i}:function(i){return i[n]===void 0&&n in i&&delete(i=ae(i))[n],i}}function ma(){throw ue.Type()}function Ee(n,i){try{var s=ga(n),a=ga(i);if(s!==a)return s==="Array"?1:a==="Array"?-1:s==="binary"?1:a==="binary"?-1:s==="string"?1:a==="string"?-1:s==="Date"?1:a!=="Date"?NaN:-1;switch(s){case"number":case"Date":case"string":return i<n?1:n<i?-1:0;case"binary":return function(l,f){for(var g=l.length,_=f.length,k=g<_?g:_,E=0;E<k;++E)if(l[E]!==f[E])return l[E]<f[E]?-1:1;return g===_?0:g<_?-1:1}(ya(n),ya(i));case"Array":return function(l,f){for(var g=l.length,_=f.length,k=g<_?g:_,E=0;E<k;++E){var I=Ee(l[E],f[E]);if(I!==0)return I}return g===_?0:g<_?-1:1}(n,i)}}catch{}return NaN}function ga(n){var i=typeof n;return i!="object"?i:ArrayBuffer.isView(n)?"binary":(n=ge(n),n==="ArrayBuffer"?"binary":n)}function ya(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}var va=(De.prototype._trans=function(n,i,s){var a=this._tx||se.trans,l=this.name,f=lt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function g(E,I,w){if(!w.schema[l])throw new ue.NotFound("Table "+l+" not part of transaction");return i(w.idbtrans,w)}var _=vn();try{var k=a&&a.db._novip===this.db._novip?a===se.trans?a._promise(n,g,s):Nt(function(){return a._promise(n,g,s)},{trans:a,transless:se.transless||se}):function E(I,w,D,S){if(I.idbdb&&(I._state.openComplete||se.letThrough||I._vip)){var T=I._createTransaction(w,D,I._dbSchema);try{T.create(),I._state.PR1398_maxLoop=3}catch(R){return R.name===Vn.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return E(I,w,D,S)})):$e(R)}return T._promise(w,function(R,A){return Nt(function(){return se.trans=T,S(R,A,T)})}).then(function(R){if(w==="readwrite")try{T.idbtrans.commit()}catch{}return w==="readonly"?R:T._completion.then(function(){return R})})}if(I._state.openComplete)return $e(new ue.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return $e(new ue.DatabaseClosed);I.open().catch(Ie)}return I._state.dbReadyPromise.then(function(){return E(I,w,D,S)})}(this.db,n,[this.name],g);return f&&(k._consoleTask=f,k=k.catch(function(E){return console.trace(E),$e(E)})),k}finally{_&&bn()}},De.prototype.get=function(n,i){var s=this;return n&&n.constructor===Object?this.where(n).first(i):n==null?$e(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return s.core.get({trans:a,key:n}).then(function(l){return s.hook.reading.fire(l)})}).then(i)},De.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(m(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var i=d(n);if(i.length===1)return this.where(i[0]).equals(n[i[0]]);var s=this.schema.indexes.concat(this.schema.primKey).filter(function(_){if(_.compound&&i.every(function(E){return 0<=_.keyPath.indexOf(E)})){for(var k=0;k<i.length;++k)if(i.indexOf(_.keyPath[k])===-1)return!1;return!0}return!1}).sort(function(_,k){return _.keyPath.length-k.keyPath.length})[0];if(s&&this.db._maxKey!==nn){var f=s.keyPath.slice(0,i.length);return this.where(f).equals(f.map(function(k){return n[k]}))}!s&&lt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var a=this.schema.idxByName;function l(_,k){return Ee(_,k)===0}var g=i.reduce(function(w,k){var E=w[0],I=w[1],w=a[k],D=n[k];return[E||w,E||!w?rn(I,w&&w.multi?function(S){return S=ie(S,k),m(S)&&S.some(function(T){return l(D,T)})}:function(S){return l(D,ie(S,k))}):I]},[null,null]),f=g[0],g=g[1];return f?this.where(f.name).equals(n[f.keyPath]).filter(g):s?this.filter(g):this.where(i).equals("")},De.prototype.filter=function(n){return this.toCollection().and(n)},De.prototype.count=function(n){return this.toCollection().count(n)},De.prototype.offset=function(n){return this.toCollection().offset(n)},De.prototype.limit=function(n){return this.toCollection().limit(n)},De.prototype.each=function(n){return this.toCollection().each(n)},De.prototype.toArray=function(n){return this.toCollection().toArray(n)},De.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},De.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,m(n)?"[".concat(n.join("+"),"]"):n))},De.prototype.reverse=function(){return this.toCollection().reverse()},De.prototype.mapToClass=function(n){var i,s=this.db,a=this.name;function l(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof ma&&(function(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function I(){this.constructor=k}r(k,E),k.prototype=E===null?Object.create(E):(I.prototype=E.prototype,new I)}(l,i=n),Object.defineProperty(l.prototype,"db",{get:function(){return s},enumerable:!1,configurable:!0}),l.prototype.table=function(){return a},n=l);for(var f=new Set,g=n.prototype;g;g=C(g))Object.getOwnPropertyNames(g).forEach(function(k){return f.add(k)});function _(k){if(!k)return k;var E,I=Object.create(n.prototype);for(E in k)if(!f.has(E))try{I[E]=k[E]}catch{}return I}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),n},De.prototype.defineClass=function(){return this.mapToClass(function(n){b(this,n)})},De.prototype.add=function(n,i){var s=this,a=this.schema.primKey,l=a.auto,f=a.keyPath,g=n;return f&&l&&(g=pi(f)(n)),this._trans("readwrite",function(_){return s.core.mutate({trans:_,type:"add",keys:i!=null?[i]:null,values:[g]})}).then(function(_){return _.numFailures?Z.reject(_.failures[0]):_.lastResult}).then(function(_){if(f)try{ne(n,f,_)}catch{}return _})},De.prototype.update=function(n,i){return typeof n!="object"||m(n)?this.where(":id").equals(n).modify(i):(n=ie(n,this.schema.primKey.keyPath),n===void 0?$e(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(i))},De.prototype.put=function(n,i){var s=this,a=this.schema.primKey,l=a.auto,f=a.keyPath,g=n;return f&&l&&(g=pi(f)(n)),this._trans("readwrite",function(_){return s.core.mutate({trans:_,type:"put",values:[g],keys:i!=null?[i]:null})}).then(function(_){return _.numFailures?Z.reject(_.failures[0]):_.lastResult}).then(function(_){if(f)try{ne(n,f,_)}catch{}return _})},De.prototype.delete=function(n){var i=this;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:[n]})}).then(function(s){return s.numFailures?Z.reject(s.failures[0]):void 0})},De.prototype.clear=function(){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"deleteRange",range:pa})}).then(function(i){return i.numFailures?Z.reject(i.failures[0]):void 0})},De.prototype.bulkGet=function(n){var i=this;return this._trans("readonly",function(s){return i.core.getMany({keys:n,trans:s}).then(function(a){return a.map(function(l){return i.hook.reading.fire(l)})})})},De.prototype.bulkAdd=function(n,i,s){var a=this,l=Array.isArray(i)?i:void 0,f=(s=s||(l?void 0:i))?s.allKeys:void 0;return this._trans("readwrite",function(g){var E=a.schema.primKey,_=E.auto,E=E.keyPath;if(E&&l)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var k=n.length,E=E&&_?n.map(pi(E)):n;return a.core.mutate({trans:g,type:"add",keys:l,values:E,wantResults:f}).then(function(T){var w=T.numFailures,D=T.results,S=T.lastResult,T=T.failures;if(w===0)return f?D:S;throw new yt("".concat(a.name,".bulkAdd(): ").concat(w," of ").concat(k," operations failed"),T)})})},De.prototype.bulkPut=function(n,i,s){var a=this,l=Array.isArray(i)?i:void 0,f=(s=s||(l?void 0:i))?s.allKeys:void 0;return this._trans("readwrite",function(g){var E=a.schema.primKey,_=E.auto,E=E.keyPath;if(E&&l)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==n.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var k=n.length,E=E&&_?n.map(pi(E)):n;return a.core.mutate({trans:g,type:"put",keys:l,values:E,wantResults:f}).then(function(T){var w=T.numFailures,D=T.results,S=T.lastResult,T=T.failures;if(w===0)return f?D:S;throw new yt("".concat(a.name,".bulkPut(): ").concat(w," of ").concat(k," operations failed"),T)})})},De.prototype.bulkUpdate=function(n){var i=this,s=this.core,a=n.map(function(g){return g.key}),l=n.map(function(g){return g.changes}),f=[];return this._trans("readwrite",function(g){return s.getMany({trans:g,keys:a,cache:"clone"}).then(function(_){var k=[],E=[];n.forEach(function(w,D){var S=w.key,T=w.changes,R=_[D];if(R){for(var A=0,F=Object.keys(T);A<F.length;A++){var K=F[A],B=T[K];if(K===i.schema.primKey.keyPath){if(Ee(B,S)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else ne(R,K,B)}f.push(D),k.push(S),E.push(R)}});var I=k.length;return s.mutate({trans:g,type:"put",keys:k,values:E,updates:{keys:a,changeSpecs:l}}).then(function(w){var D=w.numFailures,S=w.failures;if(D===0)return I;for(var T=0,R=Object.keys(S);T<R.length;T++){var A,F=R[T],K=f[Number(F)];K!=null&&(A=S[F],delete S[F],S[K]=A)}throw new yt("".concat(i.name,".bulkUpdate(): ").concat(D," of ").concat(I," operations failed"),S)})})})},De.prototype.bulkDelete=function(n){var i=this,s=n.length;return this._trans("readwrite",function(a){return i.core.mutate({trans:a,type:"delete",keys:n})}).then(function(g){var l=g.numFailures,f=g.lastResult,g=g.failures;if(l===0)return f;throw new yt("".concat(i.name,".bulkDelete(): ").concat(l," of ").concat(s," operations failed"),g)})},De);function De(){}function Xn(n){function i(g,_){if(_){for(var k=arguments.length,E=new Array(k-1);--k;)E[k-1]=arguments[k];return s[g].subscribe.apply(null,E),n}if(typeof g=="string")return s[g]}var s={};i.addEventType=f;for(var a=1,l=arguments.length;a<l;++a)f(arguments[a]);return i;function f(g,_,k){if(typeof g!="object"){var E;_=_||qu;var I={subscribers:[],fire:k=k||Ie,subscribe:function(w){I.subscribers.indexOf(w)===-1&&(I.subscribers.push(w),I.fire=_(I.fire,w))},unsubscribe:function(w){I.subscribers=I.subscribers.filter(function(D){return D!==w}),I.fire=I.subscribers.reduce(_,k)}};return s[g]=i[g]=I}d(E=g).forEach(function(w){var D=E[w];if(m(D))f(w,E[w][0],E[w][1]);else{if(D!=="asap")throw new ue.InvalidArgument("Invalid event config");var S=f(w,zn,function(){for(var T=arguments.length,R=new Array(T);T--;)R[T]=arguments[T];S.subscribers.forEach(function(A){z(function(){A.apply(null,R)})})})}})}}function Jn(n,i){return h(i).from({prototype:n}),i}function xn(n,i){return!(n.filter||n.algorithm||n.or)&&(i?n.justLimit:!n.replayFilter)}function Xo(n,i){n.filter=rn(n.filter,i)}function Jo(n,i,s){var a=n.replayFilter;n.replayFilter=a?function(){return rn(a(),i())}:i,n.justLimit=s&&!a}function mi(n,i){if(n.isPrimKey)return i.primaryKey;var s=i.getIndexByKeyPath(n.index);if(!s)throw new ue.Schema("KeyPath "+n.index+" on object store "+i.name+" is not indexed");return s}function ba(n,i,s){var a=mi(n,i.schema);return i.openCursor({trans:s,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:a,range:n.range}})}function gi(n,i,s,a){var l=n.replayFilter?rn(n.filter,n.replayFilter()):n.filter;if(n.or){var f={},g=function(_,k,E){var I,w;l&&!l(k,E,function(D){return k.stop(D)},function(D){return k.fail(D)})||((w=""+(I=k.primaryKey))=="[object ArrayBuffer]"&&(w=""+new Uint8Array(I)),O(f,w)||(f[w]=!0,i(_,k,E)))};return Promise.all([n.or._iterate(g,s),_a(ba(n,a,s),n.algorithm,g,!n.keysOnly&&n.valueMapper)])}return _a(ba(n,a,s),rn(n.algorithm,l),i,!n.keysOnly&&n.valueMapper)}function _a(n,i,s,a){var l=je(a?function(f,g,_){return s(a(f),g,_)}:s);return n.then(function(f){if(f)return f.start(function(){var g=function(){return f.continue()};i&&!i(f,function(_){return g=_},function(_){f.stop(_),g=Ie},function(_){f.fail(_),g=Ie})||l(f.value,f,function(_){return g=_}),g()})})}var bt=Symbol(),Yn=(wa.prototype.execute=function(n){if(this.add!==void 0){var i=this.add;if(m(i))return c(c([],m(n)?n:[],!0),i).sort();if(typeof i=="number")return(Number(n)||0)+i;if(typeof i=="bigint")try{return BigInt(n)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(this.remove!==void 0){var s=this.remove;if(m(s))return m(n)?n.filter(function(a){return!s.includes(a)}).sort():[];if(typeof s=="number")return Number(n)-s;if(typeof s=="bigint")try{return BigInt(n)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return i=(i=this.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof n=="string"&&n.startsWith(i)?this.replacePrefix[1]+n.substring(i.length):n},wa);function wa(n){Object.assign(this,n)}var Gu=(Oe.prototype._read=function(n,i){var s=this._ctx;return s.error?s.table._trans(null,$e.bind(null,s.error)):s.table._trans("readonly",n).then(i)},Oe.prototype._write=function(n){var i=this._ctx;return i.error?i.table._trans(null,$e.bind(null,i.error)):i.table._trans("readwrite",n,"locked")},Oe.prototype._addAlgorithm=function(n){var i=this._ctx;i.algorithm=rn(i.algorithm,n)},Oe.prototype._iterate=function(n,i){return gi(this._ctx,n,i,this._ctx.table.core)},Oe.prototype.clone=function(n){var i=Object.create(this.constructor.prototype),s=Object.create(this._ctx);return n&&b(s,n),i._ctx=s,i},Oe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Oe.prototype.each=function(n){var i=this._ctx;return this._read(function(s){return gi(i,n,s,i.table.core)})},Oe.prototype.count=function(n){var i=this;return this._read(function(s){var a=i._ctx,l=a.table.core;if(xn(a,!0))return l.count({trans:s,query:{index:mi(a,l.schema),range:a.range}}).then(function(g){return Math.min(g,a.limit)});var f=0;return gi(a,function(){return++f,!1},s,l).then(function(){return f})}).then(n)},Oe.prototype.sortBy=function(n,i){var s=n.split(".").reverse(),a=s[0],l=s.length-1;function f(k,E){return E?f(k[s[E]],E-1):k[a]}var g=this._ctx.dir==="next"?1:-1;function _(k,E){return Ee(f(k,l),f(E,l))*g}return this.toArray(function(k){return k.sort(_)}).then(i)},Oe.prototype.toArray=function(n){var i=this;return this._read(function(s){var a=i._ctx;if(a.dir==="next"&&xn(a,!0)&&0<a.limit){var l=a.valueMapper,f=mi(a,a.table.core.schema);return a.table.core.query({trans:s,limit:a.limit,values:!0,query:{index:f,range:a.range}}).then(function(_){return _=_.result,l?_.map(l):_})}var g=[];return gi(a,function(_){return g.push(_)},s,a.table.core).then(function(){return g})},n)},Oe.prototype.offset=function(n){var i=this._ctx;return n<=0||(i.offset+=n,xn(i)?Jo(i,function(){var s=n;return function(a,l){return s===0||(s===1?--s:l(function(){a.advance(s),s=0}),!1)}}):Jo(i,function(){var s=n;return function(){return--s<0}})),this},Oe.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Jo(this._ctx,function(){var i=n;return function(s,a,l){return--i<=0&&a(l),0<=i}},!0),this},Oe.prototype.until=function(n,i){return Xo(this._ctx,function(s,a,l){return!n(s.value)||(a(l),i)}),this},Oe.prototype.first=function(n){return this.limit(1).toArray(function(i){return i[0]}).then(n)},Oe.prototype.last=function(n){return this.reverse().first(n)},Oe.prototype.filter=function(n){var i;return Xo(this._ctx,function(s){return n(s.value)}),(i=this._ctx).isMatch=rn(i.isMatch,n),this},Oe.prototype.and=function(n){return this.filter(n)},Oe.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},Oe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Oe.prototype.desc=function(){return this.reverse()},Oe.prototype.eachKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(s,a){n(a.key,a)})},Oe.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},Oe.prototype.eachPrimaryKey=function(n){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(s,a){n(a.primaryKey,a)})},Oe.prototype.keys=function(n){var i=this._ctx;i.keysOnly=!i.isMatch;var s=[];return this.each(function(a,l){s.push(l.key)}).then(function(){return s}).then(n)},Oe.prototype.primaryKeys=function(n){var i=this._ctx;if(i.dir==="next"&&xn(i,!0)&&0<i.limit)return this._read(function(a){var l=mi(i,i.table.core.schema);return i.table.core.query({trans:a,values:!1,limit:i.limit,query:{index:l,range:i.range}})}).then(function(a){return a.result}).then(n);i.keysOnly=!i.isMatch;var s=[];return this.each(function(a,l){s.push(l.primaryKey)}).then(function(){return s}).then(n)},Oe.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},Oe.prototype.firstKey=function(n){return this.limit(1).keys(function(i){return i[0]}).then(n)},Oe.prototype.lastKey=function(n){return this.reverse().firstKey(n)},Oe.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var i={};return Xo(this._ctx,function(l){var a=l.primaryKey.toString(),l=O(i,a);return i[a]=!0,!l}),this},Oe.prototype.modify=function(n){var i=this,s=this._ctx;return this._write(function(a){var l,f,g;g=typeof n=="function"?n:(l=d(n),f=l.length,function(A){for(var F=!1,K=0;K<f;++K){var B=l[K],q=n[B],H=ie(A,B);q instanceof Yn?(ne(A,B,q.execute(H)),F=!0):H!==q&&(ne(A,B,q),F=!0)}return F});var _=s.table.core,w=_.schema.primaryKey,k=w.outbound,E=w.extractKey,I=200,w=i.db._options.modifyChunkSize;w&&(I=typeof w=="object"?w[_.name]||w["*"]||200:w);function D(A,B){var K=B.failures,B=B.numFailures;T+=A-B;for(var q=0,H=d(K);q<H.length;q++){var Y=H[q];S.push(K[Y])}}var S=[],T=0,R=[];return i.clone().primaryKeys().then(function(A){function F(B){var q=Math.min(I,A.length-B);return _.getMany({trans:a,keys:A.slice(B,B+q),cache:"immutable"}).then(function(H){for(var Y=[],U=[],X=k?[]:null,Q=[],J=0;J<q;++J){var te=H[J],_e={value:ae(te),primKey:A[B+J]};g.call(_e,_e.value,_e)!==!1&&(_e.value==null?Q.push(A[B+J]):k||Ee(E(te),E(_e.value))===0?(U.push(_e.value),k&&X.push(A[B+J])):(Q.push(A[B+J]),Y.push(_e.value)))}return Promise.resolve(0<Y.length&&_.mutate({trans:a,type:"add",values:Y}).then(function(Ce){for(var Se in Ce.failures)Q.splice(parseInt(Se),1);D(Y.length,Ce)})).then(function(){return(0<U.length||K&&typeof n=="object")&&_.mutate({trans:a,type:"put",keys:X,values:U,criteria:K,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<B}).then(function(Ce){return D(U.length,Ce)})}).then(function(){return(0<Q.length||K&&n===Yo)&&_.mutate({trans:a,type:"delete",keys:Q,criteria:K,isAdditionalChunk:0<B}).then(function(Ce){return D(Q.length,Ce)})}).then(function(){return A.length>B+q&&F(B+I)})})}var K=xn(s)&&s.limit===1/0&&(typeof n!="function"||n===Yo)&&{index:s.index,range:s.range};return F(0).then(function(){if(0<S.length)throw new It("Error modifying one or more objects",S,T,R);return A.length})})})},Oe.prototype.delete=function(){var n=this._ctx,i=n.range;return xn(n)&&(n.isPrimKey||i.type===3)?this._write(function(s){var a=n.table.core.schema.primaryKey,l=i;return n.table.core.count({trans:s,query:{index:a,range:l}}).then(function(f){return n.table.core.mutate({trans:s,type:"deleteRange",range:l}).then(function(g){var _=g.failures;if(g.lastResult,g.results,g=g.numFailures,g)throw new It("Could not delete some values",Object.keys(_).map(function(k){return _[k]}),f-g);return f-g})})}):this.modify(Yo)},Oe);function Oe(){}var Yo=function(n,i){return i.value=null};function Xu(n,i){return n<i?-1:n===i?0:1}function Ju(n,i){return i<n?-1:n===i?0:1}function Ye(n,i,s){return n=n instanceof ka?new n.Collection(n):n,n._ctx.error=new(s||TypeError)(i),n}function kn(n){return new n.Collection(n,function(){return xa("")}).limit(0)}function yi(n,i,s,a){var l,f,g,_,k,E,I,w=s.length;if(!s.every(function(T){return typeof T=="string"}))return Ye(n,ha);function D(T){l=T==="next"?function(A){return A.toUpperCase()}:function(A){return A.toLowerCase()},f=T==="next"?function(A){return A.toLowerCase()}:function(A){return A.toUpperCase()},g=T==="next"?Xu:Ju;var R=s.map(function(A){return{lower:f(A),upper:l(A)}}).sort(function(A,F){return g(A.lower,F.lower)});_=R.map(function(A){return A.upper}),k=R.map(function(A){return A.lower}),I=(E=T)==="next"?"":a}D("next"),n=new n.Collection(n,function(){return jt(_[0],k[w-1]+a)}),n._ondirectionchange=function(T){D(T)};var S=0;return n._addAlgorithm(function(T,R,A){var F=T.key;if(typeof F!="string")return!1;var K=f(F);if(i(K,k,S))return!0;for(var B=null,q=S;q<w;++q){var H=function(Y,U,X,Q,J,te){for(var _e=Math.min(Y.length,Q.length),Ce=-1,Se=0;Se<_e;++Se){var Qe=U[Se];if(Qe!==Q[Se])return J(Y[Se],X[Se])<0?Y.substr(0,Se)+X[Se]+X.substr(Se+1):J(Y[Se],Q[Se])<0?Y.substr(0,Se)+Q[Se]+X.substr(Se+1):0<=Ce?Y.substr(0,Ce)+U[Ce]+X.substr(Ce+1):null;J(Y[Se],Qe)<0&&(Ce=Se)}return _e<Q.length&&te==="next"?Y+X.substr(Y.length):_e<Y.length&&te==="prev"?Y.substr(0,X.length):Ce<0?null:Y.substr(0,Ce)+Q[Ce]+X.substr(Ce+1)}(F,K,_[q],k[q],g,E);H===null&&B===null?S=q+1:(B===null||0<g(B,H))&&(B=H)}return R(B!==null?function(){T.continue(B+I)}:A),!1}),n}function jt(n,i,s,a){return{type:2,lower:n,upper:i,lowerOpen:s,upperOpen:a}}function xa(n){return{type:1,lower:n,upper:n}}var ka=(Object.defineProperty(Ve.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ve.prototype.between=function(n,i,s,a){s=s!==!1,a=a===!0;try{return 0<this._cmp(n,i)||this._cmp(n,i)===0&&(s||a)&&(!s||!a)?kn(this):new this.Collection(this,function(){return jt(n,i,!s,!a)})}catch{return Ye(this,vt)}},Ve.prototype.equals=function(n){return n==null?Ye(this,vt):new this.Collection(this,function(){return xa(n)})},Ve.prototype.above=function(n){return n==null?Ye(this,vt):new this.Collection(this,function(){return jt(n,void 0,!0)})},Ve.prototype.aboveOrEqual=function(n){return n==null?Ye(this,vt):new this.Collection(this,function(){return jt(n,void 0,!1)})},Ve.prototype.below=function(n){return n==null?Ye(this,vt):new this.Collection(this,function(){return jt(void 0,n,!1,!0)})},Ve.prototype.belowOrEqual=function(n){return n==null?Ye(this,vt):new this.Collection(this,function(){return jt(void 0,n)})},Ve.prototype.startsWith=function(n){return typeof n!="string"?Ye(this,ha):this.between(n,n+nn,!0,!0)},Ve.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):yi(this,function(i,s){return i.indexOf(s[0])===0},[n],nn)},Ve.prototype.equalsIgnoreCase=function(n){return yi(this,function(i,s){return i===s[0]},[n],"")},Ve.prototype.anyOfIgnoreCase=function(){var n=Pe.apply(be,arguments);return n.length===0?kn(this):yi(this,function(i,s){return s.indexOf(i)!==-1},n,"")},Ve.prototype.startsWithAnyOfIgnoreCase=function(){var n=Pe.apply(be,arguments);return n.length===0?kn(this):yi(this,function(i,s){return s.some(function(a){return i.indexOf(a)===0})},n,nn)},Ve.prototype.anyOf=function(){var n=this,i=Pe.apply(be,arguments),s=this._cmp;try{i.sort(s)}catch{return Ye(this,vt)}if(i.length===0)return kn(this);var a=new this.Collection(this,function(){return jt(i[0],i[i.length-1])});a._ondirectionchange=function(f){s=f==="next"?n._ascending:n._descending,i.sort(s)};var l=0;return a._addAlgorithm(function(f,g,_){for(var k=f.key;0<s(k,i[l]);)if(++l===i.length)return g(_),!1;return s(k,i[l])===0||(g(function(){f.continue(i[l])}),!1)}),a},Ve.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ve.prototype.noneOf=function(){var n=Pe.apply(be,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return Ye(this,vt)}var i=n.reduce(function(s,a){return s?s.concat([[s[s.length-1][1],a]]):[[-1/0,a]]},null);return i.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},Ve.prototype.inAnyRange=function(F,i){var s=this,a=this._cmp,l=this._ascending,f=this._descending,g=this._min,_=this._max;if(F.length===0)return kn(this);if(!F.every(function(K){return K[0]!==void 0&&K[1]!==void 0&&l(K[0],K[1])<=0}))return Ye(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var k=!i||i.includeLowers!==!1,E=i&&i.includeUppers===!0,I,w=l;function D(K,B){return w(K[0],B[0])}try{(I=F.reduce(function(K,B){for(var q=0,H=K.length;q<H;++q){var Y=K[q];if(a(B[0],Y[1])<0&&0<a(B[1],Y[0])){Y[0]=g(Y[0],B[0]),Y[1]=_(Y[1],B[1]);break}}return q===H&&K.push(B),K},[])).sort(D)}catch{return Ye(this,vt)}var S=0,T=E?function(K){return 0<l(K,I[S][1])}:function(K){return 0<=l(K,I[S][1])},R=k?function(K){return 0<f(K,I[S][0])}:function(K){return 0<=f(K,I[S][0])},A=T,F=new this.Collection(this,function(){return jt(I[0][0],I[I.length-1][1],!k,!E)});return F._ondirectionchange=function(K){w=K==="next"?(A=T,l):(A=R,f),I.sort(D)},F._addAlgorithm(function(K,B,q){for(var H,Y=K.key;A(Y);)if(++S===I.length)return B(q),!1;return!T(H=Y)&&!R(H)||(s._cmp(Y,I[S][1])===0||s._cmp(Y,I[S][0])===0||B(function(){w===l?K.continue(I[S][0]):K.continue(I[S][1])}),!1)}),F},Ve.prototype.startsWithAnyOf=function(){var n=Pe.apply(be,arguments);return n.every(function(i){return typeof i=="string"})?n.length===0?kn(this):this.inAnyRange(n.map(function(i){return[i,i+nn]})):Ye(this,"startsWithAnyOf() only works with strings")},Ve);function Ve(){}function ft(n){return je(function(i){return Qn(i),n(i.target.error),!1})}function Qn(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var Zn="storagemutated",Qo="x-storagemutated-1",Lt=Xn(null,Zn),Yu=(dt.prototype._lock=function(){return $(!se.global),++this._reculock,this._reculock!==1||se.global||(se.lockOwnerFor=this),this},dt.prototype._unlock=function(){if($(!se.global),--this._reculock==0)for(se.global||(se.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{tn(n[1],n[0])}catch{}}return this},dt.prototype._locked=function(){return this._reculock&&se.lockOwnerFor!==this},dt.prototype.create=function(n){var i=this;if(!this.mode)return this;var s=this.db.idbdb,a=this.db._state.dbOpenError;if($(!this.idbtrans),!n&&!s)switch(a&&a.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(a);case"MissingAPIError":throw new ue.MissingAPI(a.message,a);default:throw new ue.OpenFailed(a)}if(!this.active)throw new ue.TransactionInactive;return $(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||s).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=je(function(l){Qn(l),i._reject(n.error)}),n.onabort=je(function(l){Qn(l),i.active&&i._reject(new ue.Abort(n.error)),i.active=!1,i.on("abort").fire(l)}),n.oncomplete=je(function(){i.active=!1,i._resolve(),"mutatedParts"in n&&Lt.storagemutated.fire(n.mutatedParts)}),this},dt.prototype._promise=function(n,i,s){var a=this;if(n==="readwrite"&&this.mode!=="readwrite")return $e(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new ue.TransactionInactive);if(this._locked())return new Z(function(f,g){a._blockedFuncs.push([function(){a._promise(n,i,s).then(f,g)},se])});if(s)return Nt(function(){var f=new Z(function(g,_){a._lock();var k=i(g,_,a);k&&k.then&&k.then(g,_)});return f.finally(function(){return a._unlock()}),f._lib=!0,f});var l=new Z(function(f,g){var _=i(f,g,a);_&&_.then&&_.then(f,g)});return l._lib=!0,l},dt.prototype._root=function(){return this.parent?this.parent._root():this},dt.prototype.waitFor=function(n){var i,s=this._root(),a=Z.resolve(n);s._waitingFor?s._waitingFor=s._waitingFor.then(function(){return a}):(s._waitingFor=a,s._waitingQueue=[],i=s.idbtrans.objectStore(s.storeNames[0]),function f(){for(++s._spinCount;s._waitingQueue.length;)s._waitingQueue.shift()();s._waitingFor&&(i.get(-1/0).onsuccess=f)}());var l=s._waitingFor;return new Z(function(f,g){a.then(function(_){return s._waitingQueue.push(je(f.bind(null,_)))},function(_){return s._waitingQueue.push(je(g.bind(null,_)))}).finally(function(){s._waitingFor===l&&(s._waitingFor=null)})})},dt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},dt.prototype.table=function(n){var i=this._memoizedTables||(this._memoizedTables={});if(O(i,n))return i[n];var s=this.schema[n];if(!s)throw new ue.NotFound("Table "+n+" not part of transaction");return s=new this.db.Table(n,s,this),s.core=this.db.core.table(n),i[n]=s},dt);function dt(){}function Zo(n,i,s,a,l,f,g){return{name:n,keyPath:i,unique:s,multi:a,auto:l,compound:f,src:(s&&!g?"&":"")+(a?"*":"")+(l?"++":"")+Ca(i)}}function Ca(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function es(n,i,s){return{name:n,primKey:i,indexes:s,mappedClass:null,idxByName:(a=function(l){return[l.name,l]},s.reduce(function(l,f,g){return g=a(f,g),g&&(l[g[0]]=g[1]),l},{}))};var a}var er=function(n){try{return n.only([[]]),er=function(){return[[]]},[[]]}catch{return er=function(){return nn},nn}};function ts(n){return n==null?function(){}:typeof n=="string"?(i=n).split(".").length===1?function(s){return s[i]}:function(s){return ie(s,i)}:function(s){return ie(s,n)};var i}function Sa(n){return[].slice.call(n)}var Qu=0;function tr(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Zu(n,i,k){function a(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=A.lower,T=A.upper,R=A.lowerOpen,A=A.upperOpen;return S===void 0?T===void 0?null:i.upperBound(T,!!A):T===void 0?i.lowerBound(S,!!R):i.bound(S,T,!!R,!!A)}function l(D){var S,T=D.name;return{name:T,schema:D,mutate:function(R){var A=R.trans,F=R.type,K=R.keys,B=R.values,q=R.range;return new Promise(function(H,Y){H=je(H);var U=A.objectStore(T),X=U.keyPath==null,Q=F==="put"||F==="add";if(!Q&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var J,te=(K||B||{length:1}).length;if(K&&B&&K.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(te===0)return H({numFailures:0,failures:{},results:[],lastResult:void 0});function _e(Xe){++Qe,Qn(Xe)}var Ce=[],Se=[],Qe=0;if(F==="deleteRange"){if(q.type===4)return H({numFailures:Qe,failures:Se,results:[],lastResult:void 0});q.type===3?Ce.push(J=U.clear()):Ce.push(J=U.delete(a(q)))}else{var X=Q?X?[B,K]:[B,null]:[K,null],ve=X[0],Ue=X[1];if(Q)for(var Ge=0;Ge<te;++Ge)Ce.push(J=Ue&&Ue[Ge]!==void 0?U[F](ve[Ge],Ue[Ge]):U[F](ve[Ge])),J.onerror=_e;else for(Ge=0;Ge<te;++Ge)Ce.push(J=U[F](ve[Ge])),J.onerror=_e}function Ti(Xe){Xe=Xe.target.result,Ce.forEach(function(an,bs){return an.error!=null&&(Se[bs]=an.error)}),H({numFailures:Qe,failures:Se,results:F==="delete"?K:Ce.map(function(an){return an.result}),lastResult:Xe})}J.onerror=function(Xe){_e(Xe),Ti(Xe)},J.onsuccess=Ti})},getMany:function(R){var A=R.trans,F=R.keys;return new Promise(function(K,B){K=je(K);for(var q,H=A.objectStore(T),Y=F.length,U=new Array(Y),X=0,Q=0,J=function(Ce){Ce=Ce.target,U[Ce._pos]=Ce.result,++Q===X&&K(U)},te=ft(B),_e=0;_e<Y;++_e)F[_e]!=null&&((q=H.get(F[_e]))._pos=_e,q.onsuccess=J,q.onerror=te,++X);X===0&&K(U)})},get:function(R){var A=R.trans,F=R.key;return new Promise(function(K,B){K=je(K);var q=A.objectStore(T).get(F);q.onsuccess=function(H){return K(H.target.result)},q.onerror=ft(B)})},query:(S=E,function(R){return new Promise(function(A,F){A=je(A);var K,B,q,X=R.trans,H=R.values,Y=R.limit,J=R.query,U=Y===1/0?void 0:Y,Q=J.index,J=J.range,X=X.objectStore(T),Q=Q.isPrimaryKey?X:X.index(Q.name),J=a(J);if(Y===0)return A({result:[]});S?((U=H?Q.getAll(J,U):Q.getAllKeys(J,U)).onsuccess=function(te){return A({result:te.target.result})},U.onerror=ft(F)):(K=0,B=!H&&"openKeyCursor"in Q?Q.openKeyCursor(J):Q.openCursor(J),q=[],B.onsuccess=function(te){var _e=B.result;return _e?(q.push(H?_e.value:_e.primaryKey),++K===Y?A({result:q}):void _e.continue()):A({result:q})},B.onerror=ft(F))})}),openCursor:function(R){var A=R.trans,F=R.values,K=R.query,B=R.reverse,q=R.unique;return new Promise(function(H,Y){H=je(H);var Q=K.index,U=K.range,X=A.objectStore(T),X=Q.isPrimaryKey?X:X.index(Q.name),Q=B?q?"prevunique":"prev":q?"nextunique":"next",J=!F&&"openKeyCursor"in X?X.openKeyCursor(a(U),Q):X.openCursor(a(U),Q);J.onerror=ft(Y),J.onsuccess=je(function(te){var _e,Ce,Se,Qe,ve=J.result;ve?(ve.___id=++Qu,ve.done=!1,_e=ve.continue.bind(ve),Ce=(Ce=ve.continuePrimaryKey)&&Ce.bind(ve),Se=ve.advance.bind(ve),Qe=function(){throw new Error("Cursor not stopped")},ve.trans=A,ve.stop=ve.continue=ve.continuePrimaryKey=ve.advance=function(){throw new Error("Cursor not started")},ve.fail=je(Y),ve.next=function(){var Ue=this,Ge=1;return this.start(function(){return Ge--?Ue.continue():Ue.stop()}).then(function(){return Ue})},ve.start=function(Ue){function Ge(){if(J.result)try{Ue()}catch(Xe){ve.fail(Xe)}else ve.done=!0,ve.start=function(){throw new Error("Cursor behind last entry")},ve.stop()}var Ti=new Promise(function(Xe,an){Xe=je(Xe),J.onerror=ft(an),ve.fail=an,ve.stop=function(bs){ve.stop=ve.continue=ve.continuePrimaryKey=ve.advance=Qe,Xe(bs)}});return J.onsuccess=je(function(Xe){J.onsuccess=Ge,Ge()}),ve.continue=_e,ve.continuePrimaryKey=Ce,ve.advance=Se,Ge(),Ti},H(ve)):H(null)},Y)})},count:function(R){var A=R.query,F=R.trans,K=A.index,B=A.range;return new Promise(function(q,H){var Y=F.objectStore(T),U=K.isPrimaryKey?Y:Y.index(K.name),Y=a(B),U=Y?U.count(Y):U.count();U.onsuccess=je(function(X){return q(X.target.result)}),U.onerror=ft(H)})}}}var f,g,_,I=(g=k,_=Sa((f=n).objectStoreNames),{schema:{name:f.name,tables:_.map(function(D){return g.objectStore(D)}).map(function(D){var S=D.keyPath,A=D.autoIncrement,T=m(S),R={},A={name:D.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:T,keyPath:S,autoIncrement:A,unique:!0,extractKey:ts(S)},indexes:Sa(D.indexNames).map(function(F){return D.index(F)}).map(function(q){var K=q.name,B=q.unique,H=q.multiEntry,q=q.keyPath,H={name:K,compound:m(q),keyPath:q,unique:B,multiEntry:H,extractKey:ts(q)};return R[tr(q)]=H}),getIndexByKeyPath:function(F){return R[tr(F)]}};return R[":id"]=A.primaryKey,S!=null&&(R[tr(S)]=A.primaryKey),A})},hasGetAll:0<_.length&&"getAll"in g.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),k=I.schema,E=I.hasGetAll,I=k.tables.map(l),w={};return I.forEach(function(D){return w[D.name]=D}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(D){if(!w[D])throw new Error("Table '".concat(D,"' not found"));return w[D]},MIN_KEY:-1/0,MAX_KEY:er(i),schema:k}}function el(n,i,s,a){var l=s.IDBKeyRange;return s.indexedDB,{dbcore:(a=Zu(i,l,a),n.dbcore.reduce(function(f,g){return g=g.create,o(o({},f),g(f))},a))}}function vi(n,a){var s=a.db,a=el(n._middlewares,s,n._deps,a);n.core=a.dbcore,n.tables.forEach(function(l){var f=l.name;n.core.schema.tables.some(function(g){return g.name===f})&&(l.core=n.core.table(f),n[f]instanceof n.Table&&(n[f].core=l.core))})}function bi(n,i,s,a){s.forEach(function(l){var f=a[l];i.forEach(function(g){var _=function k(E,I){return y(E,I)||(E=C(E))&&k(E,I)}(g,l);(!_||"value"in _&&_.value===void 0)&&(g===n.Transaction.prototype||g instanceof n.Transaction?p(g,l,{get:function(){return this.table(l)},set:function(k){P(this,l,{value:k,writable:!0,configurable:!0,enumerable:!0})}}):g[l]=new n.Table(l,f))})})}function ns(n,i){i.forEach(function(s){for(var a in s)s[a]instanceof n.Table&&delete s[a]})}function tl(n,i){return n._cfg.version-i._cfg.version}function nl(n,i,s,a){var l=n._dbSchema;s.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=es("$meta",Aa("")[0],[]),n._storeNames.push("$meta"));var f=n._createTransaction("readwrite",n._storeNames,l);f.create(s),f._completion.catch(a);var g=f._reject.bind(f),_=se.transless||se;Nt(function(){return se.trans=f,se.transless=_,i!==0?(vi(n,s),E=i,((k=f).storeNames.includes("$meta")?k.table("$meta").get("version").then(function(I){return I??E}):Z.resolve(E)).then(function(I){return D=I,S=f,T=s,R=[],I=(w=n)._versions,A=w._dbSchema=wi(0,w.idbdb,T),(I=I.filter(function(F){return F._cfg.version>=D})).length!==0?(I.forEach(function(F){R.push(function(){var K=A,B=F._cfg.dbschema;xi(w,K,T),xi(w,B,T),A=w._dbSchema=B;var q=rs(K,B);q.add.forEach(function(Q){is(T,Q[0],Q[1].primKey,Q[1].indexes)}),q.change.forEach(function(Q){if(Q.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var J=T.objectStore(Q.name);Q.add.forEach(function(te){return _i(J,te)}),Q.change.forEach(function(te){J.deleteIndex(te.name),_i(J,te)}),Q.del.forEach(function(te){return J.deleteIndex(te)})});var H=F._cfg.contentUpgrade;if(H&&F._cfg.version>D){vi(w,T),S._memoizedTables={};var Y=ce(B);q.del.forEach(function(Q){Y[Q]=K[Q]}),ns(w,[w.Transaction.prototype]),bi(w,[w.Transaction.prototype],d(Y),Y),S.schema=Y;var U,X=Ke(H);return X&&_n(),q=Z.follow(function(){var Q;(U=H(S))&&X&&(Q=Dt.bind(null,null),U.then(Q,Q))}),U&&typeof U.then=="function"?Z.resolve(U):q.then(function(){return U})}}),R.push(function(K){var B,q,H=F._cfg.dbschema;B=H,q=K,[].slice.call(q.db.objectStoreNames).forEach(function(Y){return B[Y]==null&&q.db.deleteObjectStore(Y)}),ns(w,[w.Transaction.prototype]),bi(w,[w.Transaction.prototype],w._storeNames,w._dbSchema),S.schema=w._dbSchema}),R.push(function(K){w.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(w.idbdb.version/10)===F._cfg.version?(w.idbdb.deleteObjectStore("$meta"),delete w._dbSchema.$meta,w._storeNames=w._storeNames.filter(function(B){return B!=="$meta"})):K.objectStore("$meta").put(F._cfg.version,"version"))})}),function F(){return R.length?Z.resolve(R.shift()(S.idbtrans)).then(F):Z.resolve()}().then(function(){Ea(A,T)})):Z.resolve();var w,D,S,T,R,A}).catch(g)):(d(l).forEach(function(I){is(s,I,l[I].primKey,l[I].indexes)}),vi(n,s),void Z.follow(function(){return n.on.populate.fire(f)}).catch(g));var k,E})}function rl(n,i){Ea(n._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var s=wi(0,n.idbdb,i);xi(n,n._dbSchema,i);for(var a=0,l=rs(s,n._dbSchema).change;a<l.length;a++){var f=function(g){if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=i.objectStore(g.name);g.add.forEach(function(k){lt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(k.src)),_i(_,k)})}(l[a]);if(typeof f=="object")return f.value}}function rs(n,i){var s,a={del:[],add:[],change:[]};for(s in n)i[s]||a.del.push(s);for(s in i){var l=n[s],f=i[s];if(l){var g={name:s,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(f.primKey.keyPath||"")||l.primKey.auto!==f.primKey.auto)g.recreate=!0,a.change.push(g);else{var _=l.idxByName,k=f.idxByName,E=void 0;for(E in _)k[E]||g.del.push(E);for(E in k){var I=_[E],w=k[E];I?I.src!==w.src&&g.change.push(w):g.add.push(w)}(0<g.del.length||0<g.add.length||0<g.change.length)&&a.change.push(g)}}else a.add.push([s,f])}return a}function is(n,i,s,a){var l=n.db.createObjectStore(i,s.keyPath?{keyPath:s.keyPath,autoIncrement:s.auto}:{autoIncrement:s.auto});return a.forEach(function(f){return _i(l,f)}),l}function Ea(n,i){d(n).forEach(function(s){i.db.objectStoreNames.contains(s)||(lt&&console.debug("Dexie: Creating missing table",s),is(i,s,n[s].primKey,n[s].indexes))})}function _i(n,i){n.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function wi(n,i,s){var a={};return j(i.objectStoreNames,0).forEach(function(l){for(var f=s.objectStore(l),g=Zo(Ca(E=f.keyPath),E||"",!0,!1,!!f.autoIncrement,E&&typeof E!="string",!0),_=[],k=0;k<f.indexNames.length;++k){var I=f.index(f.indexNames[k]),E=I.keyPath,I=Zo(I.name,E,!!I.unique,!!I.multiEntry,!1,E&&typeof E!="string",!1);_.push(I)}a[l]=es(l,g,_)}),a}function xi(n,i,s){for(var a=s.db.objectStoreNames,l=0;l<a.length;++l){var f=a[l],g=s.objectStore(f);n._hasGetAll="getAll"in g;for(var _=0;_<g.indexNames.length;++_){var k=g.indexNames[_],E=g.index(k).keyPath,I=typeof E=="string"?E:"["+j(E).join("+")+"]";!i[f]||(E=i[f].idxByName[I])&&(E.name=k,delete i[f].idxByName[I],i[f].idxByName[k]=E)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function Aa(n){return n.split(",").map(function(i,s){var a=(i=i.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Zo(a,l||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),m(l),s===0)})}var il=(ki.prototype._parseStoresSpec=function(n,i){d(n).forEach(function(s){if(n[s]!==null){var a=Aa(n[s]),l=a.shift();if(l.unique=!0,l.multi)throw new ue.Schema("Primary key cannot be multi-valued");a.forEach(function(f){if(f.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")}),i[s]=es(s,l,a)}})},ki.prototype.stores=function(s){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,s):s;var s=i._versions,a={},l={};return s.forEach(function(f){b(a,f._cfg.storesSource),l=f._cfg.dbschema={},f._parseStoresSpec(a,l)}),i._dbSchema=l,ns(i,[i._allTables,i,i.Transaction.prototype]),bi(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],d(l),l),i._storeNames=d(l),this},ki.prototype.upgrade=function(n){return this._cfg.contentUpgrade=$o(this._cfg.contentUpgrade||Ie,n),this},ki);function ki(){}function os(n,i){var s=n._dbNamesDB;return s||(s=n._dbNamesDB=new _t(hi,{addons:[],indexedDB:n,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),s.table("dbnames")}function ss(n){return n&&typeof n.databases=="function"}function as(n){return Nt(function(){return se.letThrough=!0,n()})}function cs(n){return!("from"in n)}var He=function(n,i){if(!this){var s=new He;return n&&"d"in n&&b(s,n),s}b(this,arguments.length?{d:1,from:n,to:1<arguments.length?i:n}:{d:0})};function nr(n,i,s){var a=Ee(i,s);if(!isNaN(a)){if(0<a)throw RangeError();if(cs(n))return b(n,{from:i,to:s,d:1});var l=n.l,a=n.r;if(Ee(s,n.from)<0)return l?nr(l,i,s):n.l={from:i,to:s,d:1,l:null,r:null},Pa(n);if(0<Ee(i,n.to))return a?nr(a,i,s):n.r={from:i,to:s,d:1,l:null,r:null},Pa(n);Ee(i,n.from)<0&&(n.from=i,n.l=null,n.d=a?a.d+1:1),0<Ee(s,n.to)&&(n.to=s,n.r=null,n.d=n.l?n.l.d+1:1),s=!n.r,l&&!n.l&&rr(n,l),a&&s&&rr(n,a)}}function rr(n,i){cs(i)||function s(a,k){var f=k.from,g=k.to,_=k.l,k=k.r;nr(a,f,g),_&&s(a,_),k&&s(a,k)}(n,i)}function Oa(n,i){var s=Ci(i),a=s.next();if(a.done)return!1;for(var l=a.value,f=Ci(n),g=f.next(l.from),_=g.value;!a.done&&!g.done;){if(Ee(_.from,l.to)<=0&&0<=Ee(_.to,l.from))return!0;Ee(l.from,_.from)<0?l=(a=s.next(_.from)).value:_=(g=f.next(l.from)).value}return!1}function Ci(n){var i=cs(n)?null:{s:0,n};return{next:function(s){for(var a=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,a)for(;i.n.l&&Ee(s,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!a||Ee(s,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function Pa(n){var i,s,a=(((i=n.r)===null||i===void 0?void 0:i.d)||0)-(((s=n.l)===null||s===void 0?void 0:s.d)||0),l=1<a?"r":a<-1?"l":"";l&&(i=l=="r"?"l":"r",s=o({},n),a=n[l],n.from=a.from,n.to=a.to,n[l]=a[l],s[l]=a[i],(n[i]=s).d=Ta(s)),n.d=Ta(n)}function Ta(s){var i=s.r,s=s.l;return(i?s?Math.max(i.d,s.d):i.d:s?s.d:0)+1}function Si(n,i){return d(i).forEach(function(s){n[s]?rr(n[s],i[s]):n[s]=function a(l){var f,g,_={};for(f in l)O(l,f)&&(g=l[f],_[f]=!g||typeof g!="object"||ke.has(g.constructor)?g:a(g));return _}(i[s])}),n}function us(n,i){return n.all||i.all||Object.keys(n).some(function(s){return i[s]&&Oa(i[s],n[s])})}x(He.prototype,((rt={add:function(n){return rr(this,n),this},addKey:function(n){return nr(this,n,n),this},addKeys:function(n){var i=this;return n.forEach(function(s){return nr(i,s,s)}),this},hasKey:function(n){var i=Ci(this).next(n).value;return i&&Ee(i.from,n)<=0&&0<=Ee(i.to,n)}})[fe]=function(){return Ci(this)},rt));var on={},ls={},fs=!1;function Ei(n){Si(ls,n),fs||(fs=!0,setTimeout(function(){fs=!1,ds(ls,!(ls={}))},0))}function ds(n,i){i===void 0&&(i=!1);var s=new Set;if(n.all)for(var a=0,l=Object.values(on);a<l.length;a++)Ia(g=l[a],n,s,i);else for(var f in n){var g,_=/^idb\:\/\/(.*)\/(.*)\//.exec(f);_&&(f=_[1],_=_[2],(g=on["idb://".concat(f,"/").concat(_)])&&Ia(g,n,s,i))}s.forEach(function(k){return k()})}function Ia(n,i,s,a){for(var l=[],f=0,g=Object.entries(n.queries.query);f<g.length;f++){for(var _=g[f],k=_[0],E=[],I=0,w=_[1];I<w.length;I++){var D=w[I];us(i,D.obsSet)?D.subscribers.forEach(function(A){return s.add(A)}):a&&E.push(D)}a&&l.push([k,E])}if(a)for(var S=0,T=l;S<T.length;S++){var R=T[S],k=R[0],E=R[1];n.queries.query[k]=E}}function ol(n){var i=n._state,s=n._deps.indexedDB;if(i.isBeingOpened||n.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?$e(i.dbOpenError):n});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var a=i.openCanceller,l=Math.round(10*n.verno),f=!1;function g(){if(i.openCanceller!==a)throw new ue.DatabaseClosed("db.open() was cancelled")}function _(){return new Z(function(D,S){if(g(),!s)throw new ue.MissingAPI;var T=n.name,R=i.autoSchema||!l?s.open(T):s.open(T,l);if(!R)throw new ue.MissingAPI;R.onerror=ft(S),R.onblocked=je(n._fireOnBlocked),R.onupgradeneeded=je(function(A){var F;I=R.transaction,i.autoSchema&&!n._options.allowEmptyDB?(R.onerror=Qn,I.abort(),R.result.close(),(F=s.deleteDatabase(T)).onsuccess=F.onerror=je(function(){S(new ue.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(I.onerror=ft(S),A=A.oldVersion>Math.pow(2,62)?0:A.oldVersion,w=A<1,n.idbdb=R.result,f&&rl(n,I),nl(n,A/10,I,S))},S),R.onsuccess=je(function(){I=null;var A,F,K,B,q,H=n.idbdb=R.result,Y=j(H.objectStoreNames);if(0<Y.length)try{var U=H.transaction((B=Y).length===1?B[0]:B,"readonly");if(i.autoSchema)F=H,K=U,(A=n).verno=F.version/10,K=A._dbSchema=wi(0,F,K),A._storeNames=j(F.objectStoreNames,0),bi(A,[A._allTables],d(K),K);else if(xi(n,n._dbSchema,U),((q=rs(wi(0,(q=n).idbdb,U),q._dbSchema)).add.length||q.change.some(function(X){return X.add.length||X.change.length}))&&!f)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),H.close(),l=H.version+1,f=!0,D(_());vi(n,U)}catch{}wn.push(n),H.onversionchange=je(function(X){i.vcFired=!0,n.on("versionchange").fire(X)}),H.onclose=je(function(X){n.on("close").fire(X)}),w&&(q=n._deps,U=T,H=q.indexedDB,q=q.IDBKeyRange,ss(H)||U===hi||os(H,q).put({name:U}).catch(Ie)),D()},S)}).catch(function(D){switch(D==null?void 0:D.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<l)return l=0,_()}return Z.reject(D)})}var k,E=i.dbReadyResolve,I=null,w=!1;return Z.race([a,(typeof navigator>"u"?Z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(D){function S(){return indexedDB.databases().finally(D)}k=setInterval(S,100),S()}).finally(function(){return clearInterval(k)}):Promise.resolve()).then(_)]).then(function(){return g(),i.onReadyBeingFired=[],Z.resolve(as(function(){return n.on.ready.fire(n.vip)})).then(function D(){if(0<i.onReadyBeingFired.length){var S=i.onReadyBeingFired.reduce($o,Ie);return i.onReadyBeingFired=[],Z.resolve(as(function(){return S(n.vip)})).then(D)}})}).finally(function(){i.openCanceller===a&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(D){i.dbOpenError=D;try{I&&I.abort()}catch{}return a===i.openCanceller&&n._close(),$e(D)}).finally(function(){i.openComplete=!0,E()}).then(function(){var D;return w&&(D={},n.tables.forEach(function(S){S.schema.indexes.forEach(function(T){T.name&&(D["idb://".concat(n.name,"/").concat(S.name,"/").concat(T.name)]=new He(-1/0,[[[]]]))}),D["idb://".concat(n.name,"/").concat(S.name,"/")]=D["idb://".concat(n.name,"/").concat(S.name,"/:dels")]=new He(-1/0,[[[]]])}),Lt(Zn).fire(D),ds(D,!0)),n})}function hs(n){function i(f){return n.next(f)}var s=l(i),a=l(function(f){return n.throw(f)});function l(f){return function(k){var _=f(k),k=_.value;return _.done?k:k&&typeof k.then=="function"?k.then(s,a):m(k)?Promise.all(k).then(s,a):s(k)}}return l(i)()}function Ai(n,i,s){for(var a=m(n)?n.slice():[n],l=0;l<s;++l)a.push(i);return a}var sl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return o(o({},n),{table:function(i){var s=n.table(i),a=s.schema,l={},f=[];function g(w,D,S){var T=tr(w),R=l[T]=l[T]||[],A=w==null?0:typeof w=="string"?1:w.length,F=0<D,F=o(o({},S),{name:F?"".concat(T,"(virtual-from:").concat(S.name,")"):S.name,lowLevelIndex:S,isVirtual:F,keyTail:D,keyLength:A,extractKey:ts(w),unique:!F&&S.unique});return R.push(F),F.isPrimaryKey||f.push(F),1<A&&g(A===2?w[0]:w.slice(0,A-1),D+1,S),R.sort(function(K,B){return K.keyTail-B.keyTail}),F}i=g(a.primaryKey.keyPath,0,a.primaryKey),l[":id"]=[i];for(var _=0,k=a.indexes;_<k.length;_++){var E=k[_];g(E.keyPath,0,E)}function I(w){var D,S=w.query.index;return S.isVirtual?o(o({},w),{query:{index:S.lowLevelIndex,range:(D=w.query.range,S=S.keyTail,{type:D.type===1?2:D.type,lower:Ai(D.lower,D.lowerOpen?n.MAX_KEY:n.MIN_KEY,S),lowerOpen:!0,upper:Ai(D.upper,D.upperOpen?n.MIN_KEY:n.MAX_KEY,S),upperOpen:!0})}}):w}return o(o({},s),{schema:o(o({},a),{primaryKey:i,indexes:f,getIndexByKeyPath:function(w){return(w=l[tr(w)])&&w[0]}}),count:function(w){return s.count(I(w))},query:function(w){return s.query(I(w))},openCursor:function(w){var D=w.query.index,S=D.keyTail,T=D.isVirtual,R=D.keyLength;return T?s.openCursor(I(w)).then(function(F){return F&&A(F)}):s.openCursor(w);function A(F){return Object.create(F,{continue:{value:function(K){K!=null?F.continue(Ai(K,w.reverse?n.MAX_KEY:n.MIN_KEY,S)):w.unique?F.continue(F.key.slice(0,R).concat(w.reverse?n.MIN_KEY:n.MAX_KEY,S)):F.continue()}},continuePrimaryKey:{value:function(K,B){F.continuePrimaryKey(Ai(K,n.MAX_KEY,S),B)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var K=F.key;return R===1?K[0]:K.slice(0,R)}},value:{get:function(){return F.value}}})}}})}})}};function ps(n,i,s,a){return s=s||{},a=a||"",d(n).forEach(function(l){var f,g,_;O(i,l)?(f=n[l],g=i[l],typeof f=="object"&&typeof g=="object"&&f&&g?(_=ge(f))!==ge(g)?s[a+l]=i[l]:_==="Object"?ps(f,g,s,a+l+"."):f!==g&&(s[a+l]=i[l]):f!==g&&(s[a+l]=i[l])):s[a+l]=void 0}),d(i).forEach(function(l){O(n,l)||(s[a+l]=i[l])}),s}function ms(n,i){return i.type==="delete"?i.keys:i.keys||i.values.map(n.extractKey)}var al={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return o(o({},n),{table:function(i){var s=n.table(i),a=s.schema.primaryKey;return o(o({},s),{mutate:function(l){var f=se.trans,g=f.table(i).hook,_=g.deleting,k=g.creating,E=g.updating;switch(l.type){case"add":if(k.fire===Ie)break;return f._promise("readwrite",function(){return I(l)},!0);case"put":if(k.fire===Ie&&E.fire===Ie)break;return f._promise("readwrite",function(){return I(l)},!0);case"delete":if(_.fire===Ie)break;return f._promise("readwrite",function(){return I(l)},!0);case"deleteRange":if(_.fire===Ie)break;return f._promise("readwrite",function(){return function w(D,S,T){return s.query({trans:D,values:!1,query:{index:a,range:S},limit:T}).then(function(R){var A=R.result;return I({type:"delete",keys:A,trans:D}).then(function(F){return 0<F.numFailures?Promise.reject(F.failures[0]):A.length<T?{failures:[],numFailures:0,lastResult:void 0}:w(D,o(o({},S),{lower:A[A.length-1],lowerOpen:!0}),T)})})}(l.trans,l.range,1e4)},!0)}return s.mutate(l);function I(w){var D,S,T,R=se.trans,A=w.keys||ms(a,w);if(!A)throw new Error("Keys missing");return(w=w.type==="add"||w.type==="put"?o(o({},w),{keys:A}):o({},w)).type!=="delete"&&(w.values=c([],w.values)),w.keys&&(w.keys=c([],w.keys)),D=s,T=A,((S=w).type==="add"?Promise.resolve([]):D.getMany({trans:S.trans,keys:T,cache:"immutable"})).then(function(F){var K=A.map(function(B,q){var H,Y,U,X=F[q],Q={onerror:null,onsuccess:null};return w.type==="delete"?_.fire.call(Q,B,X,R):w.type==="add"||X===void 0?(H=k.fire.call(Q,B,w.values[q],R),B==null&&H!=null&&(w.keys[q]=B=H,a.outbound||ne(w.values[q],a.keyPath,B))):(H=ps(X,w.values[q]),(Y=E.fire.call(Q,H,B,X,R))&&(U=w.values[q],Object.keys(Y).forEach(function(J){O(U,J)?U[J]=Y[J]:ne(U,J,Y[J])}))),Q});return s.mutate(w).then(function(B){for(var q=B.failures,H=B.results,Y=B.numFailures,B=B.lastResult,U=0;U<A.length;++U){var X=(H||A)[U],Q=K[U];X==null?Q.onerror&&Q.onerror(q[U]):Q.onsuccess&&Q.onsuccess(w.type==="put"&&F[U]?w.values[U]:X)}return{failures:q,results:H,numFailures:Y,lastResult:B}}).catch(function(B){return K.forEach(function(q){return q.onerror&&q.onerror(B)}),Promise.reject(B)})})}}})}})}};function Ra(n,i,s){try{if(!i||i.keys.length<n.length)return null;for(var a=[],l=0,f=0;l<i.keys.length&&f<n.length;++l)Ee(i.keys[l],n[f])===0&&(a.push(s?ae(i.values[l]):i.values[l]),++f);return a.length===n.length?a:null}catch{return null}}var cl={stack:"dbcore",level:-1,create:function(n){return{table:function(i){var s=n.table(i);return o(o({},s),{getMany:function(a){if(!a.cache)return s.getMany(a);var l=Ra(a.keys,a.trans._cache,a.cache==="clone");return l?Z.resolve(l):s.getMany(a).then(function(f){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?ae(f):f},f})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),s.mutate(a)}})}}}};function Na(n,i){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function Da(n,i){switch(n){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ul={stack:"dbcore",level:0,name:"Observability",create:function(n){var i=n.schema.name,s=new He(n.MIN_KEY,n.MAX_KEY);return o(o({},n),{transaction:function(a,l,f){if(se.subscr&&l!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(se.querier));return n.transaction(a,l,f)},table:function(a){var l=n.table(a),f=l.schema,g=f.primaryKey,w=f.indexes,_=g.extractKey,k=g.outbound,E=g.autoIncrement&&w.filter(function(S){return S.compound&&S.keyPath.includes(g.keyPath)}),I=o(o({},l),{mutate:function(S){function T(J){return J="idb://".concat(i,"/").concat(a,"/").concat(J),B[J]||(B[J]=new He)}var R,A,F,K=S.trans,B=S.mutatedParts||(S.mutatedParts={}),q=T(""),H=T(":dels"),Y=S.type,Q=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[ms(g,S).filter(function(J){return J}),S.values]:[],U=Q[0],X=Q[1],Q=S.trans._cache;return m(U)?(q.addKeys(U),(Q=Y==="delete"||U.length===X.length?Ra(U,Q):null)||H.addKeys(U),(Q||X)&&(R=T,A=Q,F=X,f.indexes.forEach(function(J){var te=R(J.name||"");function _e(Se){return Se!=null?J.extractKey(Se):null}function Ce(Se){return J.multiEntry&&m(Se)?Se.forEach(function(Qe){return te.addKey(Qe)}):te.addKey(Se)}(A||F).forEach(function(Se,Ue){var ve=A&&_e(A[Ue]),Ue=F&&_e(F[Ue]);Ee(ve,Ue)!==0&&(ve!=null&&Ce(ve),Ue!=null&&Ce(Ue))})}))):U?(X={from:(X=U.lower)!==null&&X!==void 0?X:n.MIN_KEY,to:(X=U.upper)!==null&&X!==void 0?X:n.MAX_KEY},H.add(X),q.add(X)):(q.add(s),H.add(s),f.indexes.forEach(function(J){return T(J.name).add(s)})),l.mutate(S).then(function(J){return!U||S.type!=="add"&&S.type!=="put"||(q.addKeys(J.results),E&&E.forEach(function(te){for(var _e=S.values.map(function(ve){return te.extractKey(ve)}),Ce=te.keyPath.findIndex(function(ve){return ve===g.keyPath}),Se=0,Qe=J.results.length;Se<Qe;++Se)_e[Se][Ce]=J.results[Se];T(te.name).addKeys(_e)})),K.mutatedParts=Si(K.mutatedParts||{},B),J})}}),w=function(T){var R=T.query,T=R.index,R=R.range;return[T,new He((T=R.lower)!==null&&T!==void 0?T:n.MIN_KEY,(R=R.upper)!==null&&R!==void 0?R:n.MAX_KEY)]},D={get:function(S){return[g,new He(S.key)]},getMany:function(S){return[g,new He().addKeys(S.keys)]},count:w,query:w,openCursor:w};return d(D).forEach(function(S){I[S]=function(T){var R=se.subscr,A=!!R,F=Na(se,l)&&Da(S,T)?T.obsSet={}:R;if(A){var K=function(X){return X="idb://".concat(i,"/").concat(a,"/").concat(X),F[X]||(F[X]=new He)},B=K(""),q=K(":dels"),R=D[S](T),A=R[0],R=R[1];if((S==="query"&&A.isPrimaryKey&&!T.values?q:K(A.name||"")).add(R),!A.isPrimaryKey){if(S!=="count"){var H=S==="query"&&k&&T.values&&l.query(o(o({},T),{values:!1}));return l[S].apply(this,arguments).then(function(X){if(S==="query"){if(k&&T.values)return H.then(function(_e){return _e=_e.result,B.addKeys(_e),X});var Q=T.values?X.result.map(_):X.result;(T.values?B:q).addKeys(Q)}else if(S==="openCursor"){var J=X,te=T.values;return J&&Object.create(J,{key:{get:function(){return q.addKey(J.primaryKey),J.key}},primaryKey:{get:function(){var _e=J.primaryKey;return q.addKey(_e),_e}},value:{get:function(){return te&&B.addKey(J.primaryKey),J.value}}})}return X})}q.add(s)}}return l[S].apply(this,arguments)}}),I}})}};function Ma(n,i,s){if(s.numFailures===0)return i;if(i.type==="deleteRange")return null;var a=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return s.numFailures===a?null:(i=o({},i),m(i.keys)&&(i.keys=i.keys.filter(function(l,f){return!(f in s.failures)})),"values"in i&&m(i.values)&&(i.values=i.values.filter(function(l,f){return!(f in s.failures)})),i)}function gs(n,i){return s=n,((a=i).lower===void 0||(a.lowerOpen?0<Ee(s,a.lower):0<=Ee(s,a.lower)))&&(n=n,(i=i).upper===void 0||(i.upperOpen?Ee(n,i.upper)<0:Ee(n,i.upper)<=0));var s,a}function ja(n,i,D,a,l,f){if(!D||D.length===0)return n;var g=i.query.index,_=g.multiEntry,k=i.query.range,E=a.schema.primaryKey.extractKey,I=g.extractKey,w=(g.lowLevelIndex||g).extractKey,D=D.reduce(function(S,T){var R=S,A=[];if(T.type==="add"||T.type==="put")for(var F=new He,K=T.values.length-1;0<=K;--K){var B,q=T.values[K],H=E(q);F.hasKey(H)||(B=I(q),(_&&m(B)?B.some(function(J){return gs(J,k)}):gs(B,k))&&(F.addKey(H),A.push(q)))}switch(T.type){case"add":var Y=new He().addKeys(i.values?S.map(function(te){return E(te)}):S),R=S.concat(i.values?A.filter(function(te){return te=E(te),!Y.hasKey(te)&&(Y.addKey(te),!0)}):A.map(function(te){return E(te)}).filter(function(te){return!Y.hasKey(te)&&(Y.addKey(te),!0)}));break;case"put":var U=new He().addKeys(T.values.map(function(te){return E(te)}));R=S.filter(function(te){return!U.hasKey(i.values?E(te):te)}).concat(i.values?A:A.map(function(te){return E(te)}));break;case"delete":var X=new He().addKeys(T.keys);R=S.filter(function(te){return!X.hasKey(i.values?E(te):te)});break;case"deleteRange":var Q=T.range;R=S.filter(function(te){return!gs(E(te),Q)})}return R},n);return D===n?n:(D.sort(function(S,T){return Ee(w(S),w(T))||Ee(E(S),E(T))}),i.limit&&i.limit<1/0&&(D.length>i.limit?D.length=i.limit:n.length===i.limit&&D.length<i.limit&&(l.dirty=!0)),f?Object.freeze(D):D)}function La(n,i){return Ee(n.lower,i.lower)===0&&Ee(n.upper,i.upper)===0&&!!n.lowerOpen==!!i.lowerOpen&&!!n.upperOpen==!!i.upperOpen}function ll(n,i){return function(s,a,l,f){if(s===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=Ee(s,a))===0){if(l&&f)return 0;if(l)return 1;if(f)return-1}return a}(n.lower,i.lower,n.lowerOpen,i.lowerOpen)<=0&&0<=function(s,a,l,f){if(s===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=Ee(s,a))===0){if(l&&f)return 0;if(l)return-1;if(f)return 1}return a}(n.upper,i.upper,n.upperOpen,i.upperOpen)}function fl(n,i,s,a){n.subscribers.add(s),a.addEventListener("abort",function(){var l,f;n.subscribers.delete(s),n.subscribers.size===0&&(l=n,f=i,setTimeout(function(){l.subscribers.size===0&&pe(f,l)},3e3))})}var dl={stack:"dbcore",level:0,name:"Cache",create:function(n){var i=n.schema.name;return o(o({},n),{transaction:function(s,a,l){var f,g,_=n.transaction(s,a,l);return a==="readwrite"&&(g=(f=new AbortController).signal,l=function(k){return function(){if(f.abort(),a==="readwrite"){for(var E=new Set,I=0,w=s;I<w.length;I++){var D=w[I],S=on["idb://".concat(i,"/").concat(D)];if(S){var T=n.table(D),R=S.optimisticOps.filter(function(te){return te.trans===_});if(_._explicit&&k&&_.mutatedParts)for(var A=0,F=Object.values(S.queries.query);A<F.length;A++)for(var K=0,B=(Y=F[A]).slice();K<B.length;K++)us((U=B[K]).obsSet,_.mutatedParts)&&(pe(Y,U),U.subscribers.forEach(function(te){return E.add(te)}));else if(0<R.length){S.optimisticOps=S.optimisticOps.filter(function(te){return te.trans!==_});for(var q=0,H=Object.values(S.queries.query);q<H.length;q++)for(var Y,U,X,Q=0,J=(Y=H[q]).slice();Q<J.length;Q++)(U=J[Q]).res!=null&&_.mutatedParts&&(k&&!U.dirty?(X=Object.isFrozen(U.res),X=ja(U.res,U.req,R,T,U,X),U.dirty?(pe(Y,U),U.subscribers.forEach(function(te){return E.add(te)})):X!==U.res&&(U.res=X,U.promise=Z.resolve({result:X}))):(U.dirty&&pe(Y,U),U.subscribers.forEach(function(te){return E.add(te)})))}}}E.forEach(function(te){return te()})}}},_.addEventListener("abort",l(!1),{signal:g}),_.addEventListener("error",l(!1),{signal:g}),_.addEventListener("complete",l(!0),{signal:g})),_},table:function(s){var a=n.table(s),l=a.schema.primaryKey;return o(o({},a),{mutate:function(f){var g=se.trans;if(l.outbound||g.db._options.cache==="disabled"||g.explicit||g.idbtrans.mode!=="readwrite")return a.mutate(f);var _=on["idb://".concat(i,"/").concat(s)];return _?(g=a.mutate(f),f.type!=="add"&&f.type!=="put"||!(50<=f.values.length||ms(l,f).some(function(k){return k==null}))?(_.optimisticOps.push(f),f.mutatedParts&&Ei(f.mutatedParts),g.then(function(k){0<k.numFailures&&(pe(_.optimisticOps,f),(k=Ma(0,f,k))&&_.optimisticOps.push(k),f.mutatedParts&&Ei(f.mutatedParts))}),g.catch(function(){pe(_.optimisticOps,f),f.mutatedParts&&Ei(f.mutatedParts)})):g.then(function(k){var E=Ma(0,o(o({},f),{values:f.values.map(function(I,w){var D;return k.failures[w]?I:(I=(D=l.keyPath)!==null&&D!==void 0&&D.includes(".")?ae(I):o({},I),ne(I,l.keyPath,k.results[w]),I)})}),k);_.optimisticOps.push(E),queueMicrotask(function(){return f.mutatedParts&&Ei(f.mutatedParts)})}),g):a.mutate(f)},query:function(f){if(!Na(se,a)||!Da("query",f))return a.query(f);var g=((E=se.trans)===null||E===void 0?void 0:E.db._options.cache)==="immutable",w=se,_=w.requery,k=w.signal,E=function(T,R,A,F){var K=on["idb://".concat(T,"/").concat(R)];if(!K)return[];if(!(R=K.queries[A]))return[null,!1,K,null];var B=R[(F.query?F.query.index.name:null)||""];if(!B)return[null,!1,K,null];switch(A){case"query":var q=B.find(function(H){return H.req.limit===F.limit&&H.req.values===F.values&&La(H.req.query.range,F.query.range)});return q?[q,!0,K,B]:[B.find(function(H){return("limit"in H.req?H.req.limit:1/0)>=F.limit&&(!F.values||H.req.values)&&ll(H.req.query.range,F.query.range)}),!1,K,B];case"count":return q=B.find(function(H){return La(H.req.query.range,F.query.range)}),[q,!!q,K,B]}}(i,s,"query",f),I=E[0],w=E[1],D=E[2],S=E[3];return I&&w?I.obsSet=f.obsSet:(w=a.query(f).then(function(T){var R=T.result;if(I&&(I.res=R),g){for(var A=0,F=R.length;A<F;++A)Object.freeze(R[A]);Object.freeze(R)}else T.result=ae(R);return T}).catch(function(T){return S&&I&&pe(S,I),Promise.reject(T)}),I={obsSet:f.obsSet,promise:w,subscribers:new Set,type:"query",req:f,dirty:!1},S?S.push(I):(S=[I],(D=D||(on["idb://".concat(i,"/").concat(s)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[f.query.index.name||""]=S)),fl(I,S,_,k),I.promise.then(function(T){return{result:ja(T.result,f,D==null?void 0:D.optimisticOps,a,I,g)}})}})}})}};function Oi(n,i){return new Proxy(n,{get:function(s,a,l){return a==="db"?i:Reflect.get(s,a,l)}})}var _t=(Fe.prototype.version=function(n){if(isNaN(n)||n<.1)throw new ue.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var i=this._versions,s=i.filter(function(a){return a._cfg.version===n})[0];return s||(s=new this.Version(n),i.push(s),i.sort(tl),s.stores({}),this._state.autoSchema=!1,s)},Fe.prototype._whenReady=function(n){var i=this;return this.idbdb&&(this._state.openComplete||se.letThrough||this._vip)?n():new Z(function(s,a){if(i._state.openComplete)return a(new ue.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void a(new ue.DatabaseClosed);i.open().catch(Ie)}i._state.dbReadyPromise.then(s,a)}).then(n)},Fe.prototype.use=function(n){var i=n.stack,s=n.create,a=n.level,l=n.name;return l&&this.unuse({stack:i,name:l}),n=this._middlewares[i]||(this._middlewares[i]=[]),n.push({stack:i,create:s,level:a??10,name:l}),n.sort(function(f,g){return f.level-g.level}),this},Fe.prototype.unuse=function(n){var i=n.stack,s=n.name,a=n.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(l){return a?l.create!==a:!!s&&l.name!==s})),this},Fe.prototype.open=function(){var n=this;return tn(Rt,function(){return ol(n)})},Fe.prototype._close=function(){var n=this._state,i=wn.indexOf(this);if(0<=i&&wn.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new Z(function(s){n.dbReadyResolve=s}),n.openCanceller=new Z(function(s,a){n.cancelOpen=a}))},Fe.prototype.close=function(s){var i=(s===void 0?{disableAutoOpen:!0}:s).disableAutoOpen,s=this._state;i?(s.isBeingOpened&&s.cancelOpen(new ue.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new ue.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},Fe.prototype.delete=function(n){var i=this;n===void 0&&(n={disableAutoOpen:!0});var s=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new Z(function(l,f){function g(){i.close(n);var _=i._deps.indexedDB.deleteDatabase(i.name);_.onsuccess=je(function(){var k,E,I;k=i._deps,E=i.name,I=k.indexedDB,k=k.IDBKeyRange,ss(I)||E===hi||os(I,k).delete(E).catch(Ie),l()}),_.onerror=ft(f),_.onblocked=i._fireOnBlocked}if(s)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(g):g()})},Fe.prototype.backendDB=function(){return this.idbdb},Fe.prototype.isOpen=function(){return this.idbdb!==null},Fe.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},Fe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fe.prototype,"tables",{get:function(){var n=this;return d(this._allTables).map(function(i){return n._allTables[i]})},enumerable:!1,configurable:!0}),Fe.prototype.transaction=function(){var n=(function(i,s,a){var l=arguments.length;if(l<2)throw new ue.InvalidArgument("Too few arguments");for(var f=new Array(l-1);--l;)f[l-1]=arguments[l];return a=f.pop(),[i,ee(f),a]}).apply(this,arguments);return this._transaction.apply(this,n)},Fe.prototype._transaction=function(n,i,s){var a=this,l=se.trans;l&&l.db===this&&n.indexOf("!")===-1||(l=null);var f,g,_=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(g=i.map(function(E){if(E=E instanceof a.Table?E.name:E,typeof E!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return E}),n=="r"||n===Uo)f=Uo;else{if(n!="rw"&&n!=Go)throw new ue.InvalidArgument("Invalid transaction mode: "+n);f=Go}if(l){if(l.mode===Uo&&f===Go){if(!_)throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l=null}l&&g.forEach(function(E){if(l&&l.storeNames.indexOf(E)===-1){if(!_)throw new ue.SubTransaction("Table "+E+" not included in parent transaction.");l=null}}),_&&l&&!l.active&&(l=null)}}catch(E){return l?l._promise(null,function(I,w){w(E)}):$e(E)}var k=(function E(I,w,D,S,T){return Z.resolve().then(function(){var R=se.transless||se,A=I._createTransaction(w,D,I._dbSchema,S);if(A.explicit=!0,R={trans:A,transless:R},S)A.idbtrans=S.idbtrans;else try{A.create(),A.idbtrans._explicit=!0,I._state.PR1398_maxLoop=3}catch(B){return B.name===Vn.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return E(I,w,D,null,T)})):$e(B)}var F,K=Ke(T);return K&&_n(),R=Z.follow(function(){var B;(F=T.call(A,A))&&(K?(B=Dt.bind(null,null),F.then(B,B)):typeof F.next=="function"&&typeof F.throw=="function"&&(F=hs(F)))},R),(F&&typeof F.then=="function"?Z.resolve(F).then(function(B){return A.active?B:$e(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):R.then(function(){return F})).then(function(B){return S&&A._resolve(),A._completion.then(function(){return B})}).catch(function(B){return A._reject(B),$e(B)})})}).bind(null,this,f,g,l,s);return l?l._promise(f,k,"lock"):se.trans?tn(se.transless,function(){return a._whenReady(k)}):this._whenReady(k)},Fe.prototype.table=function(n){if(!O(this._allTables,n))throw new ue.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},Fe);function Fe(n,i){var s=this;this._middlewares={},this.verno=0;var a=Fe.dependencies;this._options=i=o({addons:Fe.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},a=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l,f,g,_,k,E={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ie,dbReadyPromise:null,cancelOpen:Ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};E.dbReadyPromise=new Z(function(w){E.dbReadyResolve=w}),E.openCanceller=new Z(function(w,D){E.cancelOpen=D}),this._state=E,this.name=n,this.on=Xn(this,"populate","blocked","versionchange","close",{ready:[$o,Ie]}),this.on.ready.subscribe=L(this.on.ready.subscribe,function(w){return function(D,S){Fe.vip(function(){var T,R=s._state;R.openComplete?(R.dbOpenError||Z.resolve().then(D),S&&w(D)):R.onReadyBeingFired?(R.onReadyBeingFired.push(D),S&&w(D)):(w(D),T=s,S||w(function A(){T.on.ready.unsubscribe(D),T.on.ready.unsubscribe(A)}))})}}),this.Collection=(l=this,Jn(Gu.prototype,function(F,A){this.db=l;var S=pa,T=null;if(A)try{S=A()}catch(K){T=K}var R=F._ctx,A=R.table,F=A.hook.reading.fire;this._ctx={table:A,index:R.index,isPrimKey:!R.index||A.schema.primKey.keyPath&&R.index===A.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:R.or,valueMapper:F!==zn?F:null}})),this.Table=(f=this,Jn(va.prototype,function(w,D,S){this.db=f,this._tx=S,this.name=w,this.schema=D,this.hook=f._allTables[w]?f._allTables[w].hook:Xn(null,{creating:[Fu,Ie],reading:[$u,zn],updating:[Bu,Ie],deleting:[Ku,Ie]})})),this.Transaction=(g=this,Jn(Yu.prototype,function(w,D,S,T,R){var A=this;this.db=g,this.mode=w,this.storeNames=D,this.schema=S,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=Xn(this,"complete","error","abort"),this.parent=R||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(F,K){A._resolve=F,A._reject=K}),this._completion.then(function(){A.active=!1,A.on.complete.fire()},function(F){var K=A.active;return A.active=!1,A.on.error.fire(F),A.parent?A.parent._reject(F):K&&A.idbtrans&&A.idbtrans.abort(),$e(F)})})),this.Version=(_=this,Jn(il.prototype,function(w){this.db=_,this._cfg={version:w,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(k=this,Jn(ka.prototype,function(w,D,S){if(this.db=k,this._ctx={table:w,index:D===":id"?null:D,or:S},this._cmp=this._ascending=Ee,this._descending=function(T,R){return Ee(R,T)},this._max=function(T,R){return 0<Ee(T,R)?T:R},this._min=function(T,R){return Ee(T,R)<0?T:R},this._IDBKeyRange=k._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})),this.on("versionchange",function(w){0<w.newVersion?console.warn("Another connection wants to upgrade database '".concat(s.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(s.name,"'. Closing db now to resume the delete request.")),s.close({disableAutoOpen:!1})}),this.on("blocked",function(w){!w.newVersion||w.newVersion<w.oldVersion?console.warn("Dexie.delete('".concat(s.name,"') was blocked")):console.warn("Upgrade '".concat(s.name,"' blocked by other connection holding version ").concat(w.oldVersion/10))}),this._maxKey=er(i.IDBKeyRange),this._createTransaction=function(w,D,S,T){return new s.Transaction(w,D,S,s._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(w){s.on("blocked").fire(w),wn.filter(function(D){return D.name===s.name&&D!==s&&!D._state.vcFired}).map(function(D){return D.on("versionchange").fire(w)})},this.use(cl),this.use(dl),this.use(ul),this.use(sl),this.use(al);var I=new Proxy(this,{get:function(w,D,S){if(D==="_vip")return!0;if(D==="table")return function(R){return Oi(s.table(R),I)};var T=Reflect.get(w,D,S);return T instanceof va?Oi(T,I):D==="tables"?T.map(function(R){return Oi(R,I)}):D==="_createTransaction"?function(){return Oi(T.apply(this,arguments),I)}:T}});this.vip=I,a.forEach(function(w){return w(s)})}var Pi,rt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hl=(ys.prototype.subscribe=function(n,i,s){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:i,complete:s})},ys.prototype[rt]=function(){return this},ys);function ys(n){this._subscribe=n}try{Pi={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{Pi={indexedDB:null,IDBKeyRange:null}}function $a(n){var i,s=!1,a=new hl(function(l){var f=Ke(n),g,_=!1,k={},E={},I={get closed(){return _},unsubscribe:function(){_||(_=!0,g&&g.abort(),w&&Lt.storagemutated.unsubscribe(S))}};l.start&&l.start(I);var w=!1,D=function(){return Ho(T)},S=function(R){Si(k,R),us(E,k)&&D()},T=function(){var R,A,F;!_&&Pi.indexedDB&&(k={},R={},g&&g.abort(),g=new AbortController,F=function(K){var B=vn();try{f&&_n();var q=Nt(n,K);return q=f?q.finally(Dt):q}finally{B&&bn()}}(A={subscr:R,signal:g.signal,requery:D,querier:n,trans:null}),Promise.resolve(F).then(function(K){s=!0,i=K,_||A.signal.aborted||(k={},function(B){for(var q in B)if(O(B,q))return;return 1}(E=R)||w||(Lt(Zn,S),w=!0),Ho(function(){return!_&&l.next&&l.next(K)}))},function(K){s=!1,["DatabaseClosedError","AbortError"].includes(K==null?void 0:K.name)||_||Ho(function(){_||l.error&&l.error(K)})}))};return setTimeout(D,0),I});return a.hasValue=function(){return s},a.getValue=function(){return i},a}var sn=_t;function vs(n){var i=$t;try{$t=!0,Lt.storagemutated.fire(n),ds(n,!0)}finally{$t=i}}x(sn,o(o({},ii),{delete:function(n){return new sn(n,{addons:[]}).delete()},exists:function(n){return new sn(n,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return i=sn.dependencies,s=i.indexedDB,i=i.IDBKeyRange,(ss(s)?Promise.resolve(s.databases()).then(function(a){return a.map(function(l){return l.name}).filter(function(l){return l!==hi})}):os(s,i).toCollection().primaryKeys()).then(n)}catch{return $e(new ue.MissingAPI)}var i,s},defineClass:function(){return function(n){b(this,n)}},ignoreTransaction:function(n){return se.trans?tn(se.transless,n):n()},vip:as,async:function(n){return function(){try{var i=hs(n.apply(this,arguments));return i&&typeof i.then=="function"?i:Z.resolve(i)}catch(s){return $e(s)}}},spawn:function(n,i,s){try{var a=hs(n.apply(s,i||[]));return a&&typeof a.then=="function"?a:Z.resolve(a)}catch(l){return $e(l)}},currentTransaction:{get:function(){return se.trans||null}},waitFor:function(n,i){return i=Z.resolve(typeof n=="function"?sn.ignoreTransaction(n):n).timeout(i||6e4),se.trans?se.trans.waitFor(i):i},Promise:Z,debug:{get:function(){return lt},set:function(n){aa(n)}},derive:h,extend:b,props:x,override:L,Events:Xn,on:Lt,liveQuery:$a,extendObservabilitySet:Si,getByKeyPath:ie,setByKeyPath:ne,delByKeyPath:function(n,i){typeof i=="string"?ne(n,i,void 0):"length"in i&&[].map.call(i,function(s){ne(n,s,void 0)})},shallowClone:ce,deepClone:ae,getObjectDiff:ps,cmp:Ee,asap:z,minKey:-1/0,addons:[],connections:wn,errnames:Vn,dependencies:Pi,cache:on,semVer:"4.0.10",version:"4.0.10".split(".").map(function(n){return parseInt(n)}).reduce(function(n,i,s){return n+i/Math.pow(10,2*s)})})),sn.maxKey=er(sn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Lt(Zn,function(n){$t||(n=new CustomEvent(Qo,{detail:n}),$t=!0,dispatchEvent(n),$t=!1)}),addEventListener(Qo,function(n){n=n.detail,$t||vs(n)}));var Cn,$t=!1,Fa=function(){};return typeof BroadcastChannel<"u"&&((Fa=function(){(Cn=new BroadcastChannel(Qo)).onmessage=function(n){return n.data&&vs(n.data)}})(),typeof Cn.unref=="function"&&Cn.unref(),Lt(Zn,function(n){$t||Cn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!_t.disableBfCache&&n.persisted){lt&&console.debug("Dexie: handling persisted pagehide"),Cn!=null&&Cn.close();for(var i=0,s=wn;i<s.length;i++)s[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!_t.disableBfCache&&n.persisted&&(lt&&console.debug("Dexie: handling persisted pageshow"),Fa(),vs({all:new He(-1/0,[[]])}))})),Z.rejectionMapper=function(n,i){return!n||n instanceof Tt||n instanceof TypeError||n instanceof SyntaxError||!n.name||!sa[n.name]?n:(i=new sa[n.name](i||n.message,n),"stack"in n&&p(i,"stack",{get:function(){return this.inner.stack}}),i)},aa(lt),o(_t,Object.freeze({__proto__:null,Dexie:_t,liveQuery:$a,Entity:ma,cmp:Ee,PropModSymbol:bt,PropModification:Yn,replacePrefix:function(n,i){return new Yn({replacePrefix:[n,i]})},add:function(n){return new Yn({add:n})},remove:function(n){return new Yn({remove:n})},default:_t,RangeSet:He,mergeRanges:rr,rangesOverlap:Oa}),{default:_t}),_t})})(lu);var Cd=lu.exports;const Ds=ou(Cd),mc=Symbol.for("Dexie"),Ki=globalThis[mc]||(globalThis[mc]=Ds);if(Ds.semVer!==Ki.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ds.semVer} and ${Ki.semVer}`);const{liveQuery:Sd,mergeRanges:vm,rangesOverlap:bm,RangeSet:_m,cmp:wm,Entity:xm,PropModSymbol:km,PropModification:Cm,replacePrefix:Sm,add:Em,remove:Am}=Ki,ht=new Ki("Database");ht.version(3).stores({videos:null});ht.version(2).stores({queueItems:"++id, videoId, title, channelTitle, donationAmount"}).upgrade(e=>e.table("videos").toCollection().modify(t=>{const r={videoId:t.videoId,title:t.title,channelTitle:t.channelTitle,thumbnail:t.thumbnail,submittedBy:[t.username],isWatched:t.isWatched,startSeconds:t.timing||0,donationAmount:t.price,message:t.message};e.table("queueItems").add(r)}));ht.version(1).stores({videos:"id, videoId, title, channelTitle, thumbnail, username, isPaid, isWatched, timing, price, message"});var Or,Pr,Gi,Xi,Ji,Yi;class Ed{constructor(){re(this,"_settings",$n({shouldPlayRandomly:!1,shouldHideWatched:!1},"queueSettings"));W(this,Or,Te());re(this,"_current",$n(null,"currentVideo"));W(this,Pr,Te(null));W(this,Gi,he(this._sortItemsByDonation.bind(this)));W(this,Xi,he(()=>{var t;return(t=this.sortedItems)==null?void 0:t.filter(r=>!r.isWatched)}));W(this,Ji,he(()=>{var t;return(t=this._items)==null?void 0:t.length}));W(this,Yi,he(this._getCurrentIndex.bind(this)));Sd(async()=>await ht.queueItems.toArray()).subscribe(t=>this._items=t)}get _items(){return V(M(this,Or))}set _items(t){Ae(M(this,Or),xe(t))}get _previous(){return V(M(this,Pr))}set _previous(t){Ae(M(this,Pr),xe(t))}get sortedItems(){return V(M(this,Gi))}get unseen(){return V(M(this,Xi))}get count(){return V(M(this,Ji))}get currentIndex(){return V(M(this,Yi))}async add(t){var o;const r=(o=this._items)==null?void 0:o.find(c=>c.videoId===t.videoId);r?await this._updateItemSubmition(r,t):await ht.queueItems.add({...t,isWatched:!1})}async removePrevious(){this._previous&&await ht.queueItems.delete(this._previous.id)}async remove(t){await ht.queueItems.delete(t.id)}clear(){this.setCurrent(null),ht.queueItems.clear()}next(){const t=this._getItemsForNext();if(!t)return;const r=t.findIndex(c=>{var u;return c.id===((u=this._current.value)==null?void 0:u.id)}),o=this._getNextItem(t,r);o?this.setCurrent(o):this.setCurrent(null)}async setCurrent(t){this._previous=this._current.value,this._previous&&await ht.queueItems.update(this._previous.id,{isWatched:!0}),this._current.value=t}async _updateItemSubmition(t,r){const o=r.submittedBy[0],c=t.submittedBy.includes(o);t.donationAmount+=r.donationAmount,c||t.submittedBy.push(o),await ht.queueItems.update(t.id,{donationAmount:t.donationAmount,submittedBy:t.submittedBy.slice()})}_getCurrentIndex(){const t=this.shouldHideWatched?this.unseen:this._items;return t==null?void 0:t.findIndex(r=>{var o;return r.id===((o=this._current.value)==null?void 0:o.id)})}_getItemsForNext(){const t=this.unseen;return!t||t.length<=1?(this.shouldHideWatched=!1,this._items):t}_getNextIndex(t,r){let o=r+1;if(this.shouldPlayRandomly)do o=zf(t);while(o===r&&t.length>1);return o}_getNextItem(t,r){const o=this._getNextIndex(t,r);return t[o%t.length]}_sortItemsByDonation(){var t;return(t=this._items)==null?void 0:t.sort((r,o)=>{const c=r.donationAmount>0,u=o.donationAmount>0;if(c&&!u)return-1;if(!c&&u)return 1;const d=r.submittedBy.length,m=o.submittedBy.length;return d!==m?m-d:r.id-o.id})}get items(){return this._items}get current(){return this._current.value}get previous(){return this._previous}get shouldPlayRandomly(){return this._settings.value.shouldPlayRandomly}set shouldPlayRandomly(t){this._settings.value.shouldPlayRandomly=t}get shouldHideWatched(){return this._settings.value.shouldHideWatched}set shouldHideWatched(t){this._settings.value.shouldHideWatched=t}}Or=new WeakMap,Pr=new WeakMap,Gi=new WeakMap,Xi=new WeakMap,Ji=new WeakMap,Yi=new WeakMap;var Tr,Qi;class Ad{constructor(){re(this,"queue",new Ed);re(this,"poll",new _d);re(this,"timer",new wd);re(this,"twitchChatSocket",new xd);re(this,"centrifugoSocket",new kd);re(this,"_youtubePlayer");re(this,"_donationSettings",$n({requestPrice:100,isSkipEnabled:!1,isSkipDynamic:!1,skipPrice:100},"donationSettings"));re(this,"_playerSettings",$n({shouldAutoplay:!1,shouldPlayNextVideo:!1},"playerSettings"));W(this,Tr,Te(xe([])));W(this,Qi,he(this._getVideoSkipPrice.bind(this)));this.centrifugoSocket.onDonation=this.onDonation.bind(this),this.twitchChatSocket.onMessage=this.onChatMessage.bind(this),Wc(()=>{Ne(()=>{this._onCurrentQueueItemChange.bind(this)()}),Ne(()=>{this._onEnoughPollVotes.bind(this)()}),Ne(()=>{this._onTimerStateChange.bind(this)()})})}get enabledIntegrations(){return V(M(this,Tr))}set enabledIntegrations(t){Ae(M(this,Tr),xe(t))}get videoSkipPrice(){return V(M(this,Qi))}setYoutubePlayer(t){this._youtubePlayer=t,this._youtubePlayer.on("stateChange",this._onYoutubePlayerStateChange.bind(this)),this.queue.current&&this._youtubePlayer.cueVideoById(this.queue.current)}async addVideo(t,r,o=0){const c=Wf(r);if(!c)return;const u=await vd.getVideo(c==null?void 0:c.videoId);if(!u)throw new Error(`Youtube video with id of "${c.videoId}" not found`);this.queue.add({...u,...c,submittedBy:[t],message:r,donationAmount:o})}addVote(t,r){const{keepKeyword:o,skipKeyword:c}=this.poll,d=Hf(r,[o,c]);if(!d)return;const m=d.toLowerCase()===o.toLowerCase(),b=d.toLowerCase()===c.toLowerCase();m&&this.poll.addKeep(t),b&&this.poll.addSkip(t)}onChatMessage(t,r,o){const c=r["display-name"]||r.username||"???";this.enabledIntegrations.includes(Ns.TWITCH)&&this.addVideo(c,o),this.poll.isEnabled&&this.addVote(c,o)}onDonation(t){const{isSkipEnabled:r,requestPrice:o}=this.donationSettings,c=Math.round(t.amount_in_user_currency),u=t.username??"Аноним",d=this.enabledIntegrations.includes(Ns.DONATIONALERTS);r&&c===this.videoSkipPrice?this.queue.next():d&&c>=o&&this.addVideo(u,t.message,c)}_getVideoRemainingSeconds(){if(!this.queue.current)return;const{donationAmount:t}=this.queue.current,r=ot(()=>this.timer.pricePerSecond);return Math.round(t/r)}_getVideoSkipPrice(){if(!this.queue.current)return 0;const{skipPrice:t,isSkipDynamic:r}=this.donationSettings,o=t/100*this.queue.current.donationAmount;return r?o:t}async _loadVideo(t){if(!this._youtubePlayer)return;if(!t){await this._youtubePlayer.stopVideo();return}const{videoId:r,startSeconds:o}=t,c={videoId:r,startSeconds:o};ot(()=>this.playerSettings.shouldAutoplay)?await this._youtubePlayer.loadVideoById(c):await this._youtubePlayer.cueVideoById(c)}_setRemainingSeconds(){if(!this.queue.current)return;const t=this._getVideoRemainingSeconds(),r=this.queue.current.donationAmount>0;this.timer.reset(),t&&r&&this.timer.setTime(t*1e3)}_onCurrentQueueItemChange(){this._loadVideo(this.queue.current),this._setRemainingSeconds()}_onTimerStateChange(){var u,d;const t=ot(()=>this.timer.isEnabled),r=ot(()=>this.timer.onStateFinishedAction),o=this.timer.state===xt.FINISHED,c=this.queue.items&&this.queue.items.length>1;t&&o&&(r==="pause"&&((u=this._youtubePlayer)==null||u.pauseVideo()),r==="next"&&c?this.queue.next():(d=this._youtubePlayer)==null||d.pauseVideo())}_onEnoughPollVotes(){const t=ot(()=>this.twitchChatSocket.state)===Ze.OPEN,r=ot(()=>this.poll.shouldAutoSkip),o=this.poll.isEnoughVotes;t&&o&&r&&(this.poll.resetCounter(),this.queue.next())}_onYoutubePlayerStateChange(t){if(!this.queue.current||!this._youtubePlayer)return;const{data:r}=t,o=this.queue.current.donationAmount>0;switch(r){case Mi.ENDED:{this.playerSettings.shouldPlayNextVideo&&this.queue.next();break}}if(o&&this.timer.isEnabled)switch(r){case Mi.PLAYING:{this.timer.time>0&&this.timer.start();break}case Mi.PAUSED:{this.timer.pause();break}}}get donationSettings(){return this._donationSettings.value}get playerSettings(){return this._playerSettings.value}}Tr=new WeakMap,Qi=new WeakMap;const Om=new Ad;function Od(e){return typeof e=="function"}function Pd(e){return e!==null&&typeof e=="object"}const yr=Symbol("box"),Js=Symbol("is-writable");function Td(e){return Pd(e)&&yr in e}function Id(e){return me.isBox(e)&&Js in e}function me(e){let t=Te(xe(e));return{[yr]:!0,[Js]:!0,get current(){return V(t)},set current(r){Ae(t,xe(r))}}}function Rd(e,t){const r=he(e);return t?{[yr]:!0,[Js]:!0,get current(){return V(r)},set current(o){t(o)}}:{[yr]:!0,get current(){return e()}}}function Nd(e){return me.isBox(e)?e:Od(e)?me.with(e):me(e)}function Dd(e){return Object.entries(e).reduce((t,[r,o])=>me.isBox(o)?(me.isWritableBox(o)?Object.defineProperty(t,r,{get(){return o.current},set(c){o.current=c}}):Object.defineProperty(t,r,{get(){return o.current}}),t):Object.assign(t,{[r]:o}),{})}function Md(e){return me.isWritableBox(e)?{[yr]:!0,get current(){return e.current}}:e}me.from=Nd;me.with=Rd;me.flatten=Dd;me.readonly=Md;me.isBox=Td;me.isWritableBox=Id;function jd(...e){return function(t){var r;for(const o of e)if(o){if(t.defaultPrevented)return;typeof o=="function"?o.call(this,t):(r=o.current)==null||r.call(this,t)}}}var fu={},gc=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Ld=/\n/g,$d=/^\s*/,Fd=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Kd=/^:\s*/,Bd=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,qd=/^[;\s]*/,Vd=/^\s+|\s+$/g,zd=`
`,yc="/",vc="*",cn="",Wd="comment",Hd="declaration",Ud=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,o=1;function c(p){var h=p.match(Ld);h&&(r+=h.length);var y=p.lastIndexOf(zd);o=~y?p.length-y:o+p.length}function u(){var p={line:r,column:o};return function(h){return h.position=new d(p),C(),h}}function d(p){this.start=p,this.end={line:r,column:o},this.source=t.source}d.prototype.content=e;function m(p){var h=new Error(t.source+":"+r+":"+o+": "+p);if(h.reason=p,h.filename=t.source,h.line=r,h.column=o,h.source=e,!t.silent)throw h}function b(p){var h=p.exec(e);if(h){var y=h[0];return c(y),e=e.slice(y.length),h}}function C(){b($d)}function v(p){var h;for(p=p||[];h=O();)h!==!1&&p.push(h);return p}function O(){var p=u();if(!(yc!=e.charAt(0)||vc!=e.charAt(1))){for(var h=2;cn!=e.charAt(h)&&(vc!=e.charAt(h)||yc!=e.charAt(h+1));)++h;if(h+=2,cn===e.charAt(h-1))return m("End of comment missing");var y=e.slice(2,h-2);return o+=2,c(y),e=e.slice(h),o+=2,p({type:Wd,comment:y})}}function x(){var p=u(),h=b(Fd);if(h){if(O(),!b(Kd))return m("property missing ':'");var y=b(Bd),N=p({type:Hd,property:bc(h[0].replace(gc,cn)),value:y?bc(y[0].replace(gc,cn)):cn});return b(qd),N}}function P(){var p=[];v(p);for(var h;h=x();)h!==!1&&(p.push(h),v(p));return p}return C(),P()};function bc(e){return e?e.replace(Vd,cn):cn}var Gd=Ln&&Ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fu,"__esModule",{value:!0});var _c=fu.default=Jd,Xd=Gd(Ud);function Jd(e,t){var r=null;if(!e||typeof e!="string")return r;var o=(0,Xd.default)(e),c=typeof t=="function";return o.forEach(function(u){if(u.type==="declaration"){var d=u.property,m=u.value;c?t(d,m,u):m&&(r=r||{},r[d]=m)}}),r}const Yd=_c.default||_c,Qd=/\d/,Zd=["-","_","/","."];function eh(e=""){if(!Qd.test(e))return e!==e.toLowerCase()}function th(e){const t=[];let r="",o,c;for(const u of e){const d=Zd.includes(u);if(d===!0){t.push(r),r="",o=void 0;continue}const m=eh(u);if(c===!1){if(o===!1&&m===!0){t.push(r),r=u,o=m;continue}if(o===!0&&m===!1&&r.length>1){const b=r.at(-1);t.push(r.slice(0,Math.max(0,r.length-1))),r=b+u,o=m;continue}}r+=u,o=m,c=d}return t.push(r),t}function du(e){return e?th(e).map(t=>rh(t)).join(""):""}function nh(e){return ih(du(e||""))}function rh(e){return e?e[0].toUpperCase()+e.slice(1):""}function ih(e){return e?e[0].toLowerCase()+e.slice(1):""}function lr(e){if(!e)return{};const t={};function r(o,c){if(o.startsWith("-moz-")||o.startsWith("-webkit-")||o.startsWith("-ms-")||o.startsWith("-o-")){t[du(o)]=c;return}if(o.startsWith("--")){t[o]=c;return}t[nh(o)]=c}return Yd(e,r),t}function hu(...e){return(...t)=>{for(const r of e)typeof r=="function"&&r(...t)}}function oh(e,t){const r=RegExp(e,"g");return o=>{if(typeof o!="string")throw new TypeError(`expected an argument of type string, but got ${typeof o}`);return o.match(r)?o.replace(r,t):o}}const sh=oh(/[A-Z]/,e=>`-${e.toLowerCase()}`);function ah(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected an argument of type object, but got ${typeof e}`);return Object.keys(e).map(t=>`${sh(t)}: ${e[t]};`).join(`
`)}function Ys(e={}){return ah(e).replace(`
`," ")}const ch={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};Ys(ch);function uh(e){var t;return e.length>2&&e.startsWith("on")&&e[2]===((t=e[2])==null?void 0:t.toLowerCase())}function lh(...e){const t={...e[0]};for(let r=1;r<e.length;r++){const o=e[r];for(const c in o){const u=t[c],d=o[c],m=typeof u=="function",b=typeof d=="function";if(m&&uh(c)){const C=u,v=d;t[c]=jd(C,v)}else if(m&&b)t[c]=hu(u,d);else if(c==="class"&&typeof u=="string"&&typeof d=="string")t[c]=Qc(u,d);else if(c==="style"){const C=typeof u=="object",v=typeof d=="object",O=typeof u=="string",x=typeof d=="string";if(C&&v)t[c]={...u,...d};else if(C&&x){const P=lr(d);t[c]={...u,...P}}else if(O&&v){const P=lr(u);t[c]={...P,...d}}else if(O&&x){const P=lr(u),p=lr(d);t[c]={...P,...p}}else C?t[c]=u:v&&(t[c]=d)}else t[c]=d!==void 0?d:u}}return typeof t.style=="object"&&(t.style=Ys(t.style).replaceAll(`
`," ")),t.hidden!==!0&&(t.hidden=void 0),t.disabled!==!0&&(t.disabled=void 0),t}function vr({id:e,ref:t,deps:r=()=>!0,onRefChange:o=()=>{},getRootNode:c=()=>typeof document<"u"?document:void 0}){const u=he(()=>r()),d=he(()=>c());Ne(()=>(e.current,V(u),V(d),ot(()=>{var b;const m=(b=V(d))==null?void 0:b.getElementById(e.current);m?t.current=m:t.current=null,o(t.current)}))),Ne(()=>()=>{t.current=null,o(null)})}function fh(e){Ne(()=>()=>{e()})}function Pm(e){return e?"open":"closed"}function Tm(e){return e?"checked":"unchecked"}function Im(e){return e?"true":"false"}function pu(e){return e?"":void 0}function Rm(e){return e?"true":"false"}function Nm(e){return e?"true":"false"}function Dm(e,t){return e?"true":"false"}function Mm(e){return e}function jm(e){return e?"true":void 0}function Lm(e){return e}function $m(e){return e?"":void 0}function Fm(e){return e?!0:void 0}function Km(e){return e?!0:void 0}function Bm(e){return e?"true":"false"}function qm(e){return e?!0:void 0}const mu=typeof document<"u",Vm=dh();function dh(){var e,t;return mu&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function hh(e){return e instanceof HTMLElement}function gu(e){return e instanceof Element}function ph(e){return e.matches(":focus-visible")}function mh(e){return e!==null}function zm(e){return e instanceof HTMLInputElement&&"select"in e}function Wm(e,t){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wc(e,t){return jl(e,t)}function gh(e,t){const r=e,o=typeof e=="symbol"?e.description:e;if(!Ll(r)){if(t===void 0)throw new Error(`Missing context dependency: ${o} and no fallback was provided.`);return t}return $l(e)}function yh(e,t){return typeof e=="string"&&t===void 0?`${e}Context`:Array.isArray(e)&&t===void 0?`${e[0]}Context`:`${e}Context`}function Do(e,t,r=!0){const o=yh(e,t),c=Symbol.for(`bits-ui.${o}`),u=o;function d(b){const C=gh(r?c:u,b);if(C===void 0)throw new Error(`Context \`${o}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`);return C}function m(b){return wc(r?c:u,b)}return[m,d]}let xc=0;function yu(e="bits"){return xc++,`${e}-${xc}`}function vh(){}var Pn,Ir,qt,un,Jt,Ms,js;class bh{constructor(t,r){W(this,Jt);W(this,Pn,Te());W(this,Ir);W(this,qt,0);W(this,un,null);M(this,Pn).v=xe(t),Re(this,Ir,r)}get current(){return Fl()?Ne(()=>(ws(this,qt)._++,M(this,qt)===1&&ir(this,Jt,Ms).call(this,!0),()=>{Kl().then(()=>{ws(this,qt)._--,M(this,qt)===0&&ir(this,Jt,js).call(this)})})):M(this,qt)===0&&(ir(this,Jt,Ms).call(this,!1),ir(this,Jt,js).call(this)),V(M(this,Pn))}}Pn=new WeakMap,Ir=new WeakMap,qt=new WeakMap,un=new WeakMap,Jt=new WeakSet,Ms=function(t){Re(this,un,M(this,Ir).call(this,r=>{Ae(M(this,Pn),xe(r))},t)??null)},js=function(){M(this,un)!==null&&(M(this,un).call(this),Re(this,un,null))};new bh(null,(e,t)=>{function r(){e(document.activeElement)}if(r(),!!t)return document.addEventListener("focusin",r),document.addEventListener("focusout",r),()=>{document.removeEventListener("focusin",r),document.removeEventListener("focusout",r)}});function vu(e){return typeof e=="function"}function _h(e){return vu(e)?e():e}var Vt;class wh{constructor(t,r={box:"border-box"}){W(this,Vt,Te(xe({width:0,height:0})));var o,c;M(this,Vt).v=xe({width:((o=r.initialSize)==null?void 0:o.width)??0,height:((c=r.initialSize)==null?void 0:c.height)??0}),Ne(()=>{const u=_h(t);if(!u)return;const d=new ResizeObserver(m=>{for(const b of m){const C=r.box==="content-box"?b.contentBoxSize:b.borderBoxSize,v=Array.isArray(C)?C:[C];V(M(this,Vt)).width=v.reduce((O,x)=>Math.max(O,x.inlineSize),0),V(M(this,Vt)).height=v.reduce((O,x)=>Math.max(O,x.blockSize),0)}});return d.observe(u),()=>{d.disconnect()}})}get width(){return V(M(this,Vt)).width}get height(){return V(M(this,Vt)).height}}Vt=new WeakMap;function kc(e,t){if(vu(e)){const r=e;return r()??t??r()}return e??t??e}function xh(e,t,r,o){const c=Array.isArray(t)?t:[t];for(const u of c)e.addEventListener(u,r,o);return()=>{for(const u of c)e.removeEventListener(u,r,o)}}function Cc(e,t,r,o){Ne(()=>{const c=kc(e),u=kc(t);if(c!=null)return xh(c,u,r,o)})}function Ss(e,t,r,o){const c=Array.isArray(t)?t:[t];return c.forEach(u=>e.addEventListener(u,r,o)),()=>{c.forEach(u=>e.removeEventListener(u,r,o))}}const kh=["top","right","bottom","left"],Ut=Math.min,et=Math.max,Bi=Math.round,Ni=Math.floor,pt=e=>({x:e,y:e}),Ch={left:"right",right:"left",bottom:"top",top:"bottom"},Sh={start:"end",end:"start"};function Ls(e,t,r){return et(e,Ut(t,r))}function Ot(e,t){return typeof e=="function"?e(t):e}function Pt(e){return e.split("-")[0]}function Bn(e){return e.split("-")[1]}function Qs(e){return e==="x"?"y":"x"}function Zs(e){return e==="y"?"height":"width"}function Gt(e){return["top","bottom"].includes(Pt(e))?"y":"x"}function ea(e){return Qs(Gt(e))}function Eh(e,t,r){r===void 0&&(r=!1);const o=Bn(e),c=ea(e),u=Zs(c);let d=c==="x"?o===(r?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(d=qi(d)),[d,qi(d)]}function Ah(e){const t=qi(e);return[$s(e),t,$s(t)]}function $s(e){return e.replace(/start|end/g,t=>Sh[t])}function Oh(e,t,r){const o=["left","right"],c=["right","left"],u=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return r?t?c:o:t?o:c;case"left":case"right":return t?u:d;default:return[]}}function Ph(e,t,r,o){const c=Bn(e);let u=Oh(Pt(e),r==="start",o);return c&&(u=u.map(d=>d+"-"+c),t&&(u=u.concat(u.map($s)))),u}function qi(e){return e.replace(/left|right|bottom|top/g,t=>Ch[t])}function Th(e){return{top:0,right:0,bottom:0,left:0,...e}}function bu(e){return typeof e!="number"?Th(e):{top:e,right:e,bottom:e,left:e}}function Vi(e){const{x:t,y:r,width:o,height:c}=e;return{width:o,height:c,top:r,left:t,right:t+o,bottom:r+c,x:t,y:r}}function Sc(e,t,r){let{reference:o,floating:c}=e;const u=Gt(t),d=ea(t),m=Zs(d),b=Pt(t),C=u==="y",v=o.x+o.width/2-c.width/2,O=o.y+o.height/2-c.height/2,x=o[m]/2-c[m]/2;let P;switch(b){case"top":P={x:v,y:o.y-c.height};break;case"bottom":P={x:v,y:o.y+o.height};break;case"right":P={x:o.x+o.width,y:O};break;case"left":P={x:o.x-c.width,y:O};break;default:P={x:o.x,y:o.y}}switch(Bn(t)){case"start":P[d]-=x*(r&&C?-1:1);break;case"end":P[d]+=x*(r&&C?-1:1);break}return P}const Ih=async(e,t,r)=>{const{placement:o="bottom",strategy:c="absolute",middleware:u=[],platform:d}=r,m=u.filter(Boolean),b=await(d.isRTL==null?void 0:d.isRTL(t));let C=await d.getElementRects({reference:e,floating:t,strategy:c}),{x:v,y:O}=Sc(C,o,b),x=o,P={},p=0;for(let h=0;h<m.length;h++){const{name:y,fn:N}=m[h],{x:j,y:L,data:$,reset:z}=await N({x:v,y:O,initialPlacement:o,placement:x,strategy:c,middlewareData:P,rects:C,platform:d,elements:{reference:e,floating:t}});v=j??v,O=L??O,P={...P,[y]:{...P[y],...$}},z&&p<=50&&(p++,typeof z=="object"&&(z.placement&&(x=z.placement),z.rects&&(C=z.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:c}):z.rects),{x:v,y:O}=Sc(C,x,b)),h=-1)}return{x:v,y:O,placement:x,strategy:c,middlewareData:P}};async function br(e,t){var r;t===void 0&&(t={});const{x:o,y:c,platform:u,rects:d,elements:m,strategy:b}=e,{boundary:C="clippingAncestors",rootBoundary:v="viewport",elementContext:O="floating",altBoundary:x=!1,padding:P=0}=Ot(t,e),p=bu(P),y=m[x?O==="floating"?"reference":"floating":O],N=Vi(await u.getClippingRect({element:(r=await(u.isElement==null?void 0:u.isElement(y)))==null||r?y:y.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(m.floating)),boundary:C,rootBoundary:v,strategy:b})),j=O==="floating"?{x:o,y:c,width:d.floating.width,height:d.floating.height}:d.reference,L=await(u.getOffsetParent==null?void 0:u.getOffsetParent(m.floating)),$=await(u.isElement==null?void 0:u.isElement(L))?await(u.getScale==null?void 0:u.getScale(L))||{x:1,y:1}:{x:1,y:1},z=Vi(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:j,offsetParent:L,strategy:b}):j);return{top:(N.top-z.top+p.top)/$.y,bottom:(z.bottom-N.bottom+p.bottom)/$.y,left:(N.left-z.left+p.left)/$.x,right:(z.right-N.right+p.right)/$.x}}const Rh=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:o,placement:c,rects:u,platform:d,elements:m,middlewareData:b}=t,{element:C,padding:v=0}=Ot(e,t)||{};if(C==null)return{};const O=bu(v),x={x:r,y:o},P=ea(c),p=Zs(P),h=await d.getDimensions(C),y=P==="y",N=y?"top":"left",j=y?"bottom":"right",L=y?"clientHeight":"clientWidth",$=u.reference[p]+u.reference[P]-x[P]-u.floating[p],z=x[P]-u.reference[P],ie=await(d.getOffsetParent==null?void 0:d.getOffsetParent(C));let ne=ie?ie[L]:0;(!ne||!await(d.isElement==null?void 0:d.isElement(ie)))&&(ne=m.floating[L]||u.floating[p]);const ce=$/2-z/2,le=ne/2-h[p]/2-1,ee=Ut(O[N],le),ke=Ut(O[j],le),G=ee,ae=ne-h[p]-ke,oe=ne/2-h[p]/2+ce,ge=Ls(G,oe,ae),fe=!b.arrow&&Bn(c)!=null&&oe!==ge&&u.reference[p]/2-(oe<G?ee:ke)-h[p]/2<0,ye=fe?oe<G?oe-G:oe-ae:0;return{[P]:x[P]+ye,data:{[P]:ge,centerOffset:oe-ge-ye,...fe&&{alignmentOffset:ye}},reset:fe}}}),Nh=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,o;const{placement:c,middlewareData:u,rects:d,initialPlacement:m,platform:b,elements:C}=t,{mainAxis:v=!0,crossAxis:O=!0,fallbackPlacements:x,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:h=!0,...y}=Ot(e,t);if((r=u.arrow)!=null&&r.alignmentOffset)return{};const N=Pt(c),j=Gt(m),L=Pt(m)===m,$=await(b.isRTL==null?void 0:b.isRTL(C.floating)),z=x||(L||!h?[qi(m)]:Ah(m)),ie=p!=="none";!x&&ie&&z.push(...Ph(m,h,p,$));const ne=[m,...z],ce=await br(t,y),le=[];let ee=((o=u.flip)==null?void 0:o.overflows)||[];if(v&&le.push(ce[N]),O){const oe=Eh(c,d,$);le.push(ce[oe[0]],ce[oe[1]])}if(ee=[...ee,{placement:c,overflows:le}],!le.every(oe=>oe<=0)){var ke,G;const oe=(((ke=u.flip)==null?void 0:ke.index)||0)+1,ge=ne[oe];if(ge)return{data:{index:oe,overflows:ee},reset:{placement:ge}};let fe=(G=ee.filter(ye=>ye.overflows[0]<=0).sort((ye,pe)=>ye.overflows[1]-pe.overflows[1])[0])==null?void 0:G.placement;if(!fe)switch(P){case"bestFit":{var ae;const ye=(ae=ee.filter(pe=>{if(ie){const be=Gt(pe.placement);return be===j||be==="y"}return!0}).map(pe=>[pe.placement,pe.overflows.filter(be=>be>0).reduce((be,Pe)=>be+Pe,0)]).sort((pe,be)=>pe[1]-be[1])[0])==null?void 0:ae[0];ye&&(fe=ye);break}case"initialPlacement":fe=m;break}if(c!==fe)return{reset:{placement:fe}}}return{}}}};function Ec(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ac(e){return kh.some(t=>e[t]>=0)}const Dh=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:o="referenceHidden",...c}=Ot(e,t);switch(o){case"referenceHidden":{const u=await br(t,{...c,elementContext:"reference"}),d=Ec(u,r.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Ac(d)}}}case"escaped":{const u=await br(t,{...c,altBoundary:!0}),d=Ec(u,r.floating);return{data:{escapedOffsets:d,escaped:Ac(d)}}}default:return{}}}}};async function Mh(e,t){const{placement:r,platform:o,elements:c}=e,u=await(o.isRTL==null?void 0:o.isRTL(c.floating)),d=Pt(r),m=Bn(r),b=Gt(r)==="y",C=["left","top"].includes(d)?-1:1,v=u&&b?-1:1,O=Ot(t,e);let{mainAxis:x,crossAxis:P,alignmentAxis:p}=typeof O=="number"?{mainAxis:O,crossAxis:0,alignmentAxis:null}:{mainAxis:O.mainAxis||0,crossAxis:O.crossAxis||0,alignmentAxis:O.alignmentAxis};return m&&typeof p=="number"&&(P=m==="end"?p*-1:p),b?{x:P*v,y:x*C}:{x:x*C,y:P*v}}const jh=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,o;const{x:c,y:u,placement:d,middlewareData:m}=t,b=await Mh(t,e);return d===((r=m.offset)==null?void 0:r.placement)&&(o=m.arrow)!=null&&o.alignmentOffset?{}:{x:c+b.x,y:u+b.y,data:{...b,placement:d}}}}},Lh=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:o,placement:c}=t,{mainAxis:u=!0,crossAxis:d=!1,limiter:m={fn:y=>{let{x:N,y:j}=y;return{x:N,y:j}}},...b}=Ot(e,t),C={x:r,y:o},v=await br(t,b),O=Gt(Pt(c)),x=Qs(O);let P=C[x],p=C[O];if(u){const y=x==="y"?"top":"left",N=x==="y"?"bottom":"right",j=P+v[y],L=P-v[N];P=Ls(j,P,L)}if(d){const y=O==="y"?"top":"left",N=O==="y"?"bottom":"right",j=p+v[y],L=p-v[N];p=Ls(j,p,L)}const h=m.fn({...t,[x]:P,[O]:p});return{...h,data:{x:h.x-r,y:h.y-o,enabled:{[x]:u,[O]:d}}}}}},$h=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:o,placement:c,rects:u,middlewareData:d}=t,{offset:m=0,mainAxis:b=!0,crossAxis:C=!0}=Ot(e,t),v={x:r,y:o},O=Gt(c),x=Qs(O);let P=v[x],p=v[O];const h=Ot(m,t),y=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(b){const L=x==="y"?"height":"width",$=u.reference[x]-u.floating[L]+y.mainAxis,z=u.reference[x]+u.reference[L]-y.mainAxis;P<$?P=$:P>z&&(P=z)}if(C){var N,j;const L=x==="y"?"width":"height",$=["top","left"].includes(Pt(c)),z=u.reference[O]-u.floating[L]+($&&((N=d.offset)==null?void 0:N[O])||0)+($?0:y.crossAxis),ie=u.reference[O]+u.reference[L]+($?0:((j=d.offset)==null?void 0:j[O])||0)-($?y.crossAxis:0);p<z?p=z:p>ie&&(p=ie)}return{[x]:P,[O]:p}}}},Fh=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,o;const{placement:c,rects:u,platform:d,elements:m}=t,{apply:b=()=>{},...C}=Ot(e,t),v=await br(t,C),O=Pt(c),x=Bn(c),P=Gt(c)==="y",{width:p,height:h}=u.floating;let y,N;O==="top"||O==="bottom"?(y=O,N=x===(await(d.isRTL==null?void 0:d.isRTL(m.floating))?"start":"end")?"left":"right"):(N=O,y=x==="end"?"top":"bottom");const j=h-v.top-v.bottom,L=p-v.left-v.right,$=Ut(h-v[y],j),z=Ut(p-v[N],L),ie=!t.middlewareData.shift;let ne=$,ce=z;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(ce=L),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(ne=j),ie&&!x){const ee=et(v.left,0),ke=et(v.right,0),G=et(v.top,0),ae=et(v.bottom,0);P?ce=p-2*(ee!==0||ke!==0?ee+ke:et(v.left,v.right)):ne=h-2*(G!==0||ae!==0?G+ae:et(v.top,v.bottom))}await b({...t,availableWidth:ce,availableHeight:ne});const le=await d.getDimensions(m.floating);return p!==le.width||h!==le.height?{reset:{rects:!0}}:{}}}};function Mo(){return typeof window<"u"}function qn(e){return _u(e)?(e.nodeName||"").toLowerCase():"#document"}function nt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){var t;return(t=(_u(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _u(e){return Mo()?e instanceof Node||e instanceof nt(e).Node:!1}function at(e){return Mo()?e instanceof Element||e instanceof nt(e).Element:!1}function mt(e){return Mo()?e instanceof HTMLElement||e instanceof nt(e).HTMLElement:!1}function Oc(e){return!Mo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nt(e).ShadowRoot}function ri(e){const{overflow:t,overflowX:r,overflowY:o,display:c}=ct(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+r)&&!["inline","contents"].includes(c)}function Kh(e){return["table","td","th"].includes(qn(e))}function jo(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ta(e){const t=na(),r=at(e)?ct(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(r.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(r.contain||"").includes(o))}function Bh(e){let t=Xt(e);for(;mt(t)&&!Fn(t);){if(ta(t))return t;if(jo(t))return null;t=Xt(t)}return null}function na(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fn(e){return["html","body","#document"].includes(qn(e))}function ct(e){return nt(e).getComputedStyle(e)}function Lo(e){return at(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xt(e){if(qn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Oc(e)&&e.host||gt(e);return Oc(t)?t.host:t}function wu(e){const t=Xt(e);return Fn(t)?e.ownerDocument?e.ownerDocument.body:e.body:mt(t)&&ri(t)?t:wu(t)}function _r(e,t,r){var o;t===void 0&&(t=[]),r===void 0&&(r=!0);const c=wu(e),u=c===((o=e.ownerDocument)==null?void 0:o.body),d=nt(c);if(u){const m=Fs(d);return t.concat(d,d.visualViewport||[],ri(c)?c:[],m&&r?_r(m):[])}return t.concat(c,_r(c,[],r))}function Fs(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function xu(e){const t=ct(e);let r=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const c=mt(e),u=c?e.offsetWidth:r,d=c?e.offsetHeight:o,m=Bi(r)!==u||Bi(o)!==d;return m&&(r=u,o=d),{width:r,height:o,$:m}}function ra(e){return at(e)?e:e.contextElement}function On(e){const t=ra(e);if(!mt(t))return pt(1);const r=t.getBoundingClientRect(),{width:o,height:c,$:u}=xu(t);let d=(u?Bi(r.width):r.width)/o,m=(u?Bi(r.height):r.height)/c;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const qh=pt(0);function ku(e){const t=nt(e);return!na()||!t.visualViewport?qh:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Vh(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==nt(e)?!1:t}function pn(e,t,r,o){t===void 0&&(t=!1),r===void 0&&(r=!1);const c=e.getBoundingClientRect(),u=ra(e);let d=pt(1);t&&(o?at(o)&&(d=On(o)):d=On(e));const m=Vh(u,r,o)?ku(u):pt(0);let b=(c.left+m.x)/d.x,C=(c.top+m.y)/d.y,v=c.width/d.x,O=c.height/d.y;if(u){const x=nt(u),P=o&&at(o)?nt(o):o;let p=x,h=Fs(p);for(;h&&o&&P!==p;){const y=On(h),N=h.getBoundingClientRect(),j=ct(h),L=N.left+(h.clientLeft+parseFloat(j.paddingLeft))*y.x,$=N.top+(h.clientTop+parseFloat(j.paddingTop))*y.y;b*=y.x,C*=y.y,v*=y.x,O*=y.y,b+=L,C+=$,p=nt(h),h=Fs(p)}}return Vi({width:v,height:O,x:b,y:C})}function ia(e,t){const r=Lo(e).scrollLeft;return t?t.left+r:pn(gt(e)).left+r}function Cu(e,t,r){r===void 0&&(r=!1);const o=e.getBoundingClientRect(),c=o.left+t.scrollLeft-(r?0:ia(e,o)),u=o.top+t.scrollTop;return{x:c,y:u}}function zh(e){let{elements:t,rect:r,offsetParent:o,strategy:c}=e;const u=c==="fixed",d=gt(o),m=t?jo(t.floating):!1;if(o===d||m&&u)return r;let b={scrollLeft:0,scrollTop:0},C=pt(1);const v=pt(0),O=mt(o);if((O||!O&&!u)&&((qn(o)!=="body"||ri(d))&&(b=Lo(o)),mt(o))){const P=pn(o);C=On(o),v.x=P.x+o.clientLeft,v.y=P.y+o.clientTop}const x=d&&!O&&!u?Cu(d,b,!0):pt(0);return{width:r.width*C.x,height:r.height*C.y,x:r.x*C.x-b.scrollLeft*C.x+v.x+x.x,y:r.y*C.y-b.scrollTop*C.y+v.y+x.y}}function Wh(e){return Array.from(e.getClientRects())}function Hh(e){const t=gt(e),r=Lo(e),o=e.ownerDocument.body,c=et(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),u=et(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let d=-r.scrollLeft+ia(e);const m=-r.scrollTop;return ct(o).direction==="rtl"&&(d+=et(t.clientWidth,o.clientWidth)-c),{width:c,height:u,x:d,y:m}}function Uh(e,t){const r=nt(e),o=gt(e),c=r.visualViewport;let u=o.clientWidth,d=o.clientHeight,m=0,b=0;if(c){u=c.width,d=c.height;const C=na();(!C||C&&t==="fixed")&&(m=c.offsetLeft,b=c.offsetTop)}return{width:u,height:d,x:m,y:b}}function Gh(e,t){const r=pn(e,!0,t==="fixed"),o=r.top+e.clientTop,c=r.left+e.clientLeft,u=mt(e)?On(e):pt(1),d=e.clientWidth*u.x,m=e.clientHeight*u.y,b=c*u.x,C=o*u.y;return{width:d,height:m,x:b,y:C}}function Pc(e,t,r){let o;if(t==="viewport")o=Uh(e,r);else if(t==="document")o=Hh(gt(e));else if(at(t))o=Gh(t,r);else{const c=ku(e);o={x:t.x-c.x,y:t.y-c.y,width:t.width,height:t.height}}return Vi(o)}function Su(e,t){const r=Xt(e);return r===t||!at(r)||Fn(r)?!1:ct(r).position==="fixed"||Su(r,t)}function Xh(e,t){const r=t.get(e);if(r)return r;let o=_r(e,[],!1).filter(m=>at(m)&&qn(m)!=="body"),c=null;const u=ct(e).position==="fixed";let d=u?Xt(e):e;for(;at(d)&&!Fn(d);){const m=ct(d),b=ta(d);!b&&m.position==="fixed"&&(c=null),(u?!b&&!c:!b&&m.position==="static"&&!!c&&["absolute","fixed"].includes(c.position)||ri(d)&&!b&&Su(e,d))?o=o.filter(v=>v!==d):c=m,d=Xt(d)}return t.set(e,o),o}function Jh(e){let{element:t,boundary:r,rootBoundary:o,strategy:c}=e;const d=[...r==="clippingAncestors"?jo(t)?[]:Xh(t,this._c):[].concat(r),o],m=d[0],b=d.reduce((C,v)=>{const O=Pc(t,v,c);return C.top=et(O.top,C.top),C.right=Ut(O.right,C.right),C.bottom=Ut(O.bottom,C.bottom),C.left=et(O.left,C.left),C},Pc(t,m,c));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}}function Yh(e){const{width:t,height:r}=xu(e);return{width:t,height:r}}function Qh(e,t,r){const o=mt(t),c=gt(t),u=r==="fixed",d=pn(e,!0,u,t);let m={scrollLeft:0,scrollTop:0};const b=pt(0);if(o||!o&&!u)if((qn(t)!=="body"||ri(c))&&(m=Lo(t)),o){const x=pn(t,!0,u,t);b.x=x.x+t.clientLeft,b.y=x.y+t.clientTop}else c&&(b.x=ia(c));const C=c&&!o&&!u?Cu(c,m):pt(0),v=d.left+m.scrollLeft-b.x-C.x,O=d.top+m.scrollTop-b.y-C.y;return{x:v,y:O,width:d.width,height:d.height}}function Es(e){return ct(e).position==="static"}function Tc(e,t){if(!mt(e)||ct(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gt(e)===r&&(r=r.ownerDocument.body),r}function Eu(e,t){const r=nt(e);if(jo(e))return r;if(!mt(e)){let c=Xt(e);for(;c&&!Fn(c);){if(at(c)&&!Es(c))return c;c=Xt(c)}return r}let o=Tc(e,t);for(;o&&Kh(o)&&Es(o);)o=Tc(o,t);return o&&Fn(o)&&Es(o)&&!ta(o)?r:o||Bh(e)||r}const Zh=async function(e){const t=this.getOffsetParent||Eu,r=this.getDimensions,o=await r(e.floating);return{reference:Qh(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function ep(e){return ct(e).direction==="rtl"}const tp={convertOffsetParentRelativeRectToViewportRelativeRect:zh,getDocumentElement:gt,getClippingRect:Jh,getOffsetParent:Eu,getElementRects:Zh,getClientRects:Wh,getDimensions:Yh,getScale:On,isElement:at,isRTL:ep};function np(e,t){let r=null,o;const c=gt(e);function u(){var m;clearTimeout(o),(m=r)==null||m.disconnect(),r=null}function d(m,b){m===void 0&&(m=!1),b===void 0&&(b=1),u();const{left:C,top:v,width:O,height:x}=e.getBoundingClientRect();if(m||t(),!O||!x)return;const P=Ni(v),p=Ni(c.clientWidth-(C+O)),h=Ni(c.clientHeight-(v+x)),y=Ni(C),j={rootMargin:-P+"px "+-p+"px "+-h+"px "+-y+"px",threshold:et(0,Ut(1,b))||1};let L=!0;function $(z){const ie=z[0].intersectionRatio;if(ie!==b){if(!L)return d();ie?d(!1,ie):o=setTimeout(()=>{d(!1,1e-7)},1e3)}L=!1}try{r=new IntersectionObserver($,{...j,root:c.ownerDocument})}catch{r=new IntersectionObserver($,j)}r.observe(e)}return d(!0),u}function rp(e,t,r,o){o===void 0&&(o={});const{ancestorScroll:c=!0,ancestorResize:u=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:b=!1}=o,C=ra(e),v=c||u?[...C?_r(C):[],..._r(t)]:[];v.forEach(N=>{c&&N.addEventListener("scroll",r,{passive:!0}),u&&N.addEventListener("resize",r)});const O=C&&m?np(C,r):null;let x=-1,P=null;d&&(P=new ResizeObserver(N=>{let[j]=N;j&&j.target===C&&P&&(P.unobserve(t),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var L;(L=P)==null||L.observe(t)})),r()}),C&&!b&&P.observe(C),P.observe(t));let p,h=b?pn(e):null;b&&y();function y(){const N=pn(e);h&&(N.x!==h.x||N.y!==h.y||N.width!==h.width||N.height!==h.height)&&r(),h=N,p=requestAnimationFrame(y)}return r(),()=>{var N;v.forEach(j=>{c&&j.removeEventListener("scroll",r),u&&j.removeEventListener("resize",r)}),O==null||O(),(N=P)==null||N.disconnect(),P=null,b&&cancelAnimationFrame(p)}}const ip=jh,op=Lh,sp=Nh,ap=Fh,cp=Dh,up=Rh,lp=$h,fp=(e,t,r)=>{const o=new Map,c={platform:tp,...r},u={...c.platform,_c:o};return Ih(e,t,{...c,platform:u})};function ar(e){return typeof e=="function"?e():e}function Au(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ic(e,t){const r=Au(e);return Math.round(t*r)/r}function Hm(e){return{[`--bits-${e}-content-transform-origin`]:"var(--bits-floating-transform-origin)",[`--bits-${e}-content-available-width`]:"var(--bits-floating-available-width)",[`--bits-${e}-content-available-height`]:"var(--bits-floating-available-height)",[`--bits-${e}-anchor-width`]:"var(--bits-floating-anchor-width)",[`--bits-${e}-anchor-height`]:"var(--bits-floating-anchor-height)"}}function dp(e){const t=e.whileElementsMounted,r=he(()=>ar(e.open)??!0),o=he(()=>ar(e.middleware)),c=he(()=>ar(e.transform)??!0),u=he(()=>ar(e.placement)??"bottom"),d=he(()=>ar(e.strategy)??"absolute"),m=e.reference;let b=Te(0),C=Te(0);const v=me(null);let O=Te(xe(V(d))),x=Te(xe(V(u))),P=Te(xe({})),p=Te(!1);const h=he(()=>{const z={position:V(O),left:"0",top:"0"};if(!v.current)return z;const ie=Ic(v.current,V(b)),ne=Ic(v.current,V(C));return V(c)?{...z,transform:`translate(${ie}px, ${ne}px)`,...Au(v.current)>=1.5&&{willChange:"transform"}}:{position:V(O),left:`${ie}px`,top:`${ne}px`}});let y;function N(){m.current===null||v.current===null||fp(m.current,v.current,{middleware:V(o),placement:V(u),strategy:V(d)}).then(z=>{Ae(b,xe(z.x)),Ae(C,xe(z.y)),Ae(O,xe(z.strategy)),Ae(x,xe(z.placement)),Ae(P,xe(z.middlewareData)),Ae(p,!0)})}function j(){typeof y=="function"&&(y(),y=void 0)}function L(){if(j(),t===void 0){N();return}m.current===null||v.current===null||(y=t(m.current,v.current,N))}function $(){V(r)||Ae(p,!1)}return Ne(N),Ne(L),Ne($),Ne(()=>j),{floating:v,reference:m,get strategy(){return V(O)},get placement(){return V(x)},get middlewareData(){return V(P)},get isPositioned(){return V(p)},get floatingStyles(){return V(h)},get update(){return N}}}const hp={top:"bottom",right:"left",bottom:"top",left:"right"};class pp{constructor(){re(this,"anchorNode",me(null));re(this,"customAnchorNode",me(null));re(this,"triggerNode",me(null));Ne(()=>{this.customAnchorNode.current?typeof this.customAnchorNode.current=="string"?this.anchorNode.current=document.querySelector(this.customAnchorNode.current):this.anchorNode.current=this.customAnchorNode.current:this.anchorNode.current=this.triggerNode.current})}}var Rr,Nr,Dr,Mr,Tn,jr,Lr,In,ln,$r,Fr,Kr,Br,qr,Vr,Zi,zr,eo,Wr,to,no,Hr,Ur,Gr,Xr,ro,io,oo,so,ao,co,Jr,uo,lo,fo,ho;class mp{constructor(t,r){re(this,"root");re(this,"contentRef",me(null));re(this,"wrapperRef",me(null));re(this,"arrowRef",me(null));re(this,"arrowId",me(yu()));re(this,"id");re(this,"wrapperId");re(this,"style");W(this,Rr,he(()=>{if(typeof this.style=="string")return lr(this.style);if(!this.style)return{}}));W(this,Nr);W(this,Dr);W(this,Mr);W(this,Tn);W(this,jr);W(this,Lr);W(this,In);W(this,ln);W(this,$r);W(this,Fr);W(this,Kr);W(this,Br);W(this,qr);re(this,"onPlaced");re(this,"enabled");W(this,Vr,new wh(()=>this.arrowRef.current??void 0));W(this,Zi,he(()=>{var t;return((t=M(this,Vr))==null?void 0:t.width)??0}));W(this,zr,he(()=>{var t;return((t=M(this,Vr))==null?void 0:t.height)??0}));W(this,eo,he(()=>{var t;return((t=M(this,Dr))==null?void 0:t.current)+(M(this,Tn).current!=="center"?`-${M(this,Tn).current}`:"")}));W(this,Wr,he(()=>Array.isArray(M(this,ln).current)?M(this,ln).current:[M(this,ln).current]));W(this,to,he(()=>V(M(this,Wr)).length>0));W(this,no,he(()=>({padding:M(this,$r).current,boundary:V(M(this,Wr)).filter(mh),altBoundary:this.hasExplicitBoundaries})));W(this,Hr,Te(void 0));W(this,Ur,Te(void 0));W(this,Gr,Te(void 0));W(this,Xr,Te(void 0));W(this,ro,he(()=>[ip({mainAxis:M(this,Mr).current+V(M(this,zr)),alignmentAxis:M(this,jr).current}),M(this,In)&&op({mainAxis:!0,crossAxis:!1,limiter:M(this,Fr).current==="partial"?lp():void 0,...this.detectOverflowOptions}),M(this,In)&&sp({...this.detectOverflowOptions}),ap({...this.detectOverflowOptions,apply:({rects:t,availableWidth:r,availableHeight:o})=>{const{width:c,height:u}=t.reference;Ae(M(this,Hr),xe(r)),Ae(M(this,Ur),xe(o)),Ae(M(this,Gr),xe(c)),Ae(M(this,Xr),xe(u))}}),this.arrowRef.current&&up({element:this.arrowRef.current,padding:M(this,Lr).current}),wp({arrowWidth:V(M(this,Zi)),arrowHeight:V(M(this,zr))}),M(this,Kr).current&&cp({strategy:"referenceHidden",...this.detectOverflowOptions})].filter(Boolean)));re(this,"floating");W(this,io,he(()=>xp(this.floating.placement)));W(this,oo,he(()=>kp(this.floating.placement)));W(this,so,he(()=>{var t;return((t=this.floating.middlewareData.arrow)==null?void 0:t.x)??0}));W(this,ao,he(()=>{var t;return((t=this.floating.middlewareData.arrow)==null?void 0:t.y)??0}));W(this,co,he(()=>{var t;return((t=this.floating.middlewareData.arrow)==null?void 0:t.centerOffset)!==0}));W(this,Jr,Te());W(this,uo,he(()=>hp[this.placedSide]));W(this,lo,he(()=>{var t,r,o;return{id:this.wrapperId.current,"data-bits-floating-content-wrapper":"",style:{...this.floating.floatingStyles,transform:this.floating.isPositioned?this.floating.floatingStyles.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:this.contentZIndex,"--bits-floating-transform-origin":`${(t=this.floating.middlewareData.transformOrigin)==null?void 0:t.x} ${(r=this.floating.middlewareData.transformOrigin)==null?void 0:r.y}`,"--bits-floating-available-width":`${V(M(this,Hr))}px`,"--bits-floating-available-height":`${V(M(this,Ur))}px`,"--bits-floating-anchor-width":`${V(M(this,Gr))}px`,"--bits-floating-anchor-height":`${V(M(this,Xr))}px`,...((o=this.floating.middlewareData.hide)==null?void 0:o.referenceHidden)&&{visibility:"hidden","pointer-events":"none"},...V(M(this,Rr))},dir:M(this,Nr).current}}));W(this,fo,he(()=>({"data-side":this.placedSide,"data-align":this.placedAlign,style:Ys({...V(M(this,Rr))})})));W(this,ho,he(()=>({position:"absolute",left:this.arrowX?`${this.arrowX}px`:void 0,top:this.arrowY?`${this.arrowY}px`:void 0,[this.arrowBaseSide]:0,"transform-origin":{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[this.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[this.placedSide],visibility:this.cannotCenterArrow?"hidden":void 0})));this.id=t.id,Re(this,Dr,t.side),Re(this,Mr,t.sideOffset),Re(this,Tn,t.align),Re(this,jr,t.alignOffset),Re(this,Lr,t.arrowPadding),Re(this,In,t.avoidCollisions),Re(this,ln,t.collisionBoundary),Re(this,$r,t.collisionPadding),Re(this,Fr,t.sticky),Re(this,Kr,t.hideWhenDetached),Re(this,qr,t.updatePositionStrategy),this.onPlaced=t.onPlaced,Re(this,Br,t.strategy),Re(this,Nr,t.dir),this.style=t.style,this.root=r,this.enabled=t.enabled,this.wrapperId=t.wrapperId,t.customAnchor&&(this.root.customAnchorNode.current=t.customAnchor.current),Ne(()=>{t.customAnchor.current,ot(()=>{this.root.customAnchorNode.current=t.customAnchor.current})}),vr({id:this.wrapperId,ref:this.wrapperRef,deps:()=>this.enabled.current}),vr({id:this.id,ref:this.contentRef,deps:()=>this.enabled.current}),this.floating=dp({strategy:()=>M(this,Br).current,placement:()=>V(M(this,eo)),middleware:()=>this.middleware,reference:this.root.anchorNode,whileElementsMounted:(...o)=>{var u;return rp(...o,{animationFrame:((u=M(this,qr))==null?void 0:u.current)==="always"})},open:()=>this.enabled.current}),Ne(()=>{var o;this.floating.isPositioned&&((o=this.onPlaced)==null||o.current())}),Ne(()=>{const o=this.contentRef.current;o&&ot(()=>{this.contentZIndex=window.getComputedStyle(o).zIndex})}),Ne(()=>{this.floating.floating.current=this.wrapperRef.current})}get hasExplicitBoundaries(){return V(M(this,to))}get detectOverflowOptions(){return V(M(this,no))}get middleware(){return V(M(this,ro))}get placedSide(){return V(M(this,io))}get placedAlign(){return V(M(this,oo))}get arrowX(){return V(M(this,so))}get arrowY(){return V(M(this,ao))}get cannotCenterArrow(){return V(M(this,co))}get contentZIndex(){return V(M(this,Jr))}set contentZIndex(t){Ae(M(this,Jr),xe(t))}get arrowBaseSide(){return V(M(this,uo))}get wrapperProps(){return V(M(this,lo))}get props(){return V(M(this,fo))}get arrowStyle(){return V(M(this,ho))}}Rr=new WeakMap,Nr=new WeakMap,Dr=new WeakMap,Mr=new WeakMap,Tn=new WeakMap,jr=new WeakMap,Lr=new WeakMap,In=new WeakMap,ln=new WeakMap,$r=new WeakMap,Fr=new WeakMap,Kr=new WeakMap,Br=new WeakMap,qr=new WeakMap,Vr=new WeakMap,Zi=new WeakMap,zr=new WeakMap,eo=new WeakMap,Wr=new WeakMap,to=new WeakMap,no=new WeakMap,Hr=new WeakMap,Ur=new WeakMap,Gr=new WeakMap,Xr=new WeakMap,ro=new WeakMap,io=new WeakMap,oo=new WeakMap,so=new WeakMap,ao=new WeakMap,co=new WeakMap,Jr=new WeakMap,uo=new WeakMap,lo=new WeakMap,fo=new WeakMap,ho=new WeakMap;class gp{constructor(t,r){re(this,"ref",me(null));t.virtualEl&&t.virtualEl.current?r.triggerNode=me.from(t.virtualEl.current):vr({id:t.id,ref:this.ref,onRefChange:o=>{r.triggerNode.current=o}})}}const[yp,Ou]=Do("Floating.Root"),[vp,Um]=Do("Floating.Content");function bp(){return yp(new pp)}function Gm(e){return vp(new mp(e,Ou()))}function _p(e){return new gp(e,Ou())}function wp(e){return{name:"transformOrigin",options:e,fn(t){var y,N,j;const{placement:r,rects:o,middlewareData:c}=t,d=((y=c.arrow)==null?void 0:y.centerOffset)!==0,m=d?0:e.arrowWidth,b=d?0:e.arrowHeight,[C,v]=oa(r),O={start:"0%",center:"50%",end:"100%"}[v],x=(((N=c.arrow)==null?void 0:N.x)??0)+m/2,P=(((j=c.arrow)==null?void 0:j.y)??0)+b/2;let p="",h="";return C==="bottom"?(p=d?O:`${x}px`,h=`${-b}px`):C==="top"?(p=d?O:`${x}px`,h=`${o.floating.height+b}px`):C==="right"?(p=`${-b}px`,h=d?O:`${P}px`):C==="left"&&(p=`${o.floating.width+b}px`,h=d?O:`${P}px`),{data:{x:p,y:h}}}}}function oa(e){const[t,r="center"]=e.split("-");return[t,r]}function xp(e){return oa(e)[0]}function kp(e){return oa(e)[1]}function Cp(e,t){mn(t,!0),bp();var r=Wt(),o=zt(r);Ht(o,()=>t.children??tt),st(e,r),gn()}function Sp(e,t=1e4){let r=null,o=Te(xe(e));function c(){return setTimeout(()=>{Ae(o,xe(e))},t)}return Ne(()=>()=>{r&&clearTimeout(r)}),me.with(()=>V(o),u=>{Ae(o,xe(u)),r&&clearTimeout(r),r=c()})}function Ep(e,t){mn(t,!0),_p({id:me.with(()=>t.id),virtualEl:me.with(()=>t.virtualEl)});var r=Wt(),o=zt(r);Ht(o,()=>t.children??tt),st(e,r),gn()}function Ap(){const e=new Set,t=[];function r(u){e.delete(u)}function o(u){e.add(u);const d=()=>r(u);return t.push(d),{off:d}}const c=(...u)=>Promise.all(Array.from(e).map(d=>Promise.resolve(d(...u))));return Ne(()=>()=>{}),{on:o,off:r,trigger:c}}function Op(e,t){const r=Sp(!1,300),o=he(e),c=he(t);let u=Te(null);const d=Ap();function m(){Ae(u,null),r.current=!1}function b(C,v){const O=C.currentTarget;if(!hh(O))return;const x={x:C.clientX,y:C.clientY},P=Pp(x,O.getBoundingClientRect()),p=Tp(x,P),h=Ip(v.getBoundingClientRect()),y=Np([...p,...h]);Ae(u,xe(y)),r.current=!0}return Ne(()=>{if(!V(o)||!V(c))return;const C=x=>{b(x,V(c))},v=x=>{b(x,V(o))};return hu(Ss(V(o),"pointerleave",C),Ss(V(c),"pointerleave",v))}),Ne(()=>{if(!V(u))return;function C(v){var h,y;if(!V(u))return;const O=v.target;if(!gu(O))return;const x={x:v.clientX,y:v.clientY},P=((h=V(o))==null?void 0:h.contains(O))||((y=V(c))==null?void 0:y.contains(O)),p=!Rp(x,V(u));P?m():p&&(m(),d.trigger())}return Ss(document,"pointermove",C)}),{isPointerInTransit:r,onPointerExit:d.on}}function Pp(e,t){const r=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),c=Math.abs(t.right-e.x),u=Math.abs(t.left-e.x);switch(Math.min(r,o,c,u)){case u:return"left";case c:return"right";case r:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Tp(e,t,r=5){const o=[];switch(t){case"top":o.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":o.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":o.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":o.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return o}function Ip(e){const{top:t,right:r,bottom:o,left:c}=e;return[{x:c,y:t},{x:r,y:t},{x:r,y:o},{x:c,y:o}]}function Rp(e,t){const{x:r,y:o}=e;let c=!1;for(let u=0,d=t.length-1;u<t.length;d=u++){const m=t[u].x,b=t[u].y,C=t[d].x,v=t[d].y;b>o!=v>o&&r<(C-m)*(o-b)/(v-b)+m&&(c=!c)}return c}function Np(e){const t=e.slice();return t.sort((r,o)=>r.x<o.x?-1:r.x>o.x?1:r.y<o.y?-1:r.y>o.y?1:0),Dp(t)}function Dp(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const c=e[o];for(;t.length>=2;){const u=t[t.length-1],d=t[t.length-2];if((u.x-d.x)*(c.y-d.y)>=(u.y-d.y)*(c.x-d.x))t.pop();else break}t.push(c)}t.pop();const r=[];for(let o=e.length-1;o>=0;o--){const c=e[o];for(;r.length>=2;){const u=r[r.length-1],d=r[r.length-2];if((u.x-d.x)*(c.y-d.y)>=(u.y-d.y)*(c.x-d.x))r.pop();else break}r.push(c)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}const Pu="tooltip.open";function Ks(e,t,r={}){const{immediate:o=!0}=r,c=me(!1);let u;function d(){u&&(clearTimeout(u),u=null)}function m(){c.current=!1,d()}function b(...C){d(),c.current=!0,u=setTimeout(()=>{c.current=!1,u=null,e(...C)},t)}return o&&(c.current=!0,mu&&b()),fh(()=>{m()}),{isPending:me.readonly(c),start:b,stop:m}}const Mp="data-tooltip-content",jp="data-tooltip-trigger";var Yr,Rn,po,mo;class Lp{constructor(t){re(this,"delayDuration");re(this,"disableHoverableContent");re(this,"disableCloseOnTriggerClick");re(this,"disabled");re(this,"ignoreNonKeyboardFocus");re(this,"skipDelayDuration");W(this,Yr,Te(!0));re(this,"isPointerInTransit",me(!1));W(this,Rn);W(this,po,()=>{M(this,Rn).start()});W(this,mo,()=>{M(this,Rn).stop()});re(this,"onOpen",()=>{M(this,mo).call(this),this.isOpenDelayed=!1});re(this,"onClose",()=>{M(this,po).call(this)});this.delayDuration=t.delayDuration,this.disableHoverableContent=t.disableHoverableContent,this.disableCloseOnTriggerClick=t.disableCloseOnTriggerClick,this.disabled=t.disabled,this.ignoreNonKeyboardFocus=t.ignoreNonKeyboardFocus,this.skipDelayDuration=t.skipDelayDuration,Re(this,Rn,Ks(()=>{this.isOpenDelayed=!0},this.skipDelayDuration.current,{immediate:!1}))}get isOpenDelayed(){return V(M(this,Yr))}set isOpenDelayed(t){Ae(M(this,Yr),xe(t))}}Yr=new WeakMap,Rn=new WeakMap,po=new WeakMap,mo=new WeakMap;var go,yo,vo,bo,_o,Qr,Zr,fn,Ct,wo,xo;class $p{constructor(t,r){re(this,"open");re(this,"_delayDuration");re(this,"_disableHoverableContent");re(this,"_disableCloseOnTriggerClick");re(this,"_disabled");re(this,"_ignoreNonKeyboardFocus");re(this,"provider");W(this,go,he(()=>this._delayDuration.current??this.provider.delayDuration.current));W(this,yo,he(()=>this._disableHoverableContent.current??this.provider.disableHoverableContent.current));W(this,vo,he(()=>this._disableCloseOnTriggerClick.current??this.provider.disableCloseOnTriggerClick.current));W(this,bo,he(()=>this._disabled.current??this.provider.disabled.current));W(this,_o,he(()=>this._ignoreNonKeyboardFocus.current??this.provider.ignoreNonKeyboardFocus.current));W(this,Qr,Te(null));W(this,Zr,Te(null));W(this,fn,Te(!1));W(this,Ct);W(this,wo,he(()=>this.open.current?V(M(this,fn))?"delayed-open":"instant-open":"closed"));re(this,"handleOpen",()=>{M(this,Ct).stop(),Ae(M(this,fn),!1),this.open.current=!0});re(this,"handleClose",()=>{M(this,Ct).stop(),this.open.current=!1});W(this,xo,()=>{M(this,Ct).start()});re(this,"onTriggerEnter",()=>{M(this,xo).call(this)});re(this,"onTriggerLeave",()=>{this.disableHoverableContent?this.handleClose():M(this,Ct).stop()});this.provider=r,this.open=t.open,this._delayDuration=t.delayDuration,this._disableHoverableContent=t.disableHoverableContent,this._disableCloseOnTriggerClick=t.disableCloseOnTriggerClick,this._disabled=t.disabled,this._ignoreNonKeyboardFocus=t.ignoreNonKeyboardFocus,Re(this,Ct,Ks(()=>{Ae(M(this,fn),!0),this.open.current=!0},this.delayDuration??0,{immediate:!1})),Ne(()=>{this.delayDuration!==void 0&&ot(()=>{Re(this,Ct,Ks(()=>{Ae(M(this,fn),!0),this.open.current=!0},this.delayDuration,{immediate:!1}))})}),Ne(()=>{this.open.current,ot(()=>{if(!this.provider.onClose)return;this.open.current?(this.provider.onOpen(),document.dispatchEvent(new CustomEvent(Pu))):this.provider.onClose()})})}get delayDuration(){return V(M(this,go))}get disableHoverableContent(){return V(M(this,yo))}get disableCloseOnTriggerClick(){return V(M(this,vo))}get disabled(){return V(M(this,bo))}get ignoreNonKeyboardFocus(){return V(M(this,_o))}get contentNode(){return V(M(this,Qr))}set contentNode(t){Ae(M(this,Qr),xe(t))}get triggerNode(){return V(M(this,Zr))}set triggerNode(t){Ae(M(this,Zr),xe(t))}get stateAttr(){return V(M(this,wo))}}go=new WeakMap,yo=new WeakMap,vo=new WeakMap,bo=new WeakMap,_o=new WeakMap,Qr=new WeakMap,Zr=new WeakMap,fn=new WeakMap,Ct=new WeakMap,wo=new WeakMap,xo=new WeakMap;var Nn,ei,ze,dn,Dn,Mn,it,ko,Co,So,Eo,Ao,Oo,Po,To;class Fp{constructor(t,r){W(this,Nn);W(this,ei);W(this,ze);W(this,dn,me(!1));W(this,Dn,Te(!1));W(this,Mn);W(this,it,he(()=>M(this,Mn).current||M(this,ze).disabled));re(this,"handlePointerUp",()=>{M(this,dn).current=!1});W(this,ko,()=>{V(M(this,it))||(M(this,dn).current=!1)});W(this,Co,()=>{V(M(this,it))||(M(this,dn).current=!0,document.addEventListener("pointerup",()=>{this.handlePointerUp()},{once:!0}))});W(this,So,t=>{V(M(this,it))||t.pointerType!=="touch"&&(V(M(this,Dn))||M(this,ze).provider.isPointerInTransit.current||(M(this,ze).onTriggerEnter(),Ae(M(this,Dn),!0)))});W(this,Eo,()=>{V(M(this,it))||(M(this,ze).onTriggerLeave(),Ae(M(this,Dn),!1))});W(this,Ao,t=>{M(this,dn).current||V(M(this,it))||M(this,ze).ignoreNonKeyboardFocus&&!ph(t.currentTarget)||M(this,ze).handleOpen()});W(this,Oo,()=>{V(M(this,it))||M(this,ze).handleClose()});W(this,Po,()=>{M(this,ze).disableCloseOnTriggerClick||V(M(this,it))||M(this,ze).handleClose()});W(this,To,he(()=>{var t;return{id:M(this,Nn).current,"aria-describedby":M(this,ze).open.current?(t=M(this,ze).contentNode)==null?void 0:t.id:void 0,"data-state":M(this,ze).stateAttr,"data-disabled":pu(V(M(this,it))),"data-delay-duration":`${M(this,ze).delayDuration}`,[jp]:"",tabindex:V(M(this,it))?void 0:0,disabled:M(this,Mn).current,onpointerup:M(this,ko),onpointerdown:M(this,Co),onpointermove:M(this,So),onpointerleave:M(this,Eo),onfocus:M(this,Ao),onblur:M(this,Oo),onclick:M(this,Po)}}));Re(this,Nn,t.id),Re(this,ei,t.ref),Re(this,Mn,t.disabled),Re(this,ze,r),vr({id:M(this,Nn),ref:M(this,ei),onRefChange:o=>{M(this,ze).triggerNode=o}})}get props(){return V(M(this,To))}}Nn=new WeakMap,ei=new WeakMap,ze=new WeakMap,dn=new WeakMap,Dn=new WeakMap,Mn=new WeakMap,it=new WeakMap,ko=new WeakMap,Co=new WeakMap,So=new WeakMap,Eo=new WeakMap,Ao=new WeakMap,Oo=new WeakMap,Po=new WeakMap,To=new WeakMap;var jn,ti,Io,Ro;class Kp{constructor(t,r){re(this,"root");W(this,jn);W(this,ti);W(this,Io,he(()=>({open:this.root.open.current})));W(this,Ro,he(()=>({id:M(this,jn).current,"data-state":this.root.stateAttr,"data-disabled":pu(this.root.disabled),style:{pointerEvents:"auto",outline:"none"},[Mp]:""})));this.root=r,Re(this,jn,t.id),Re(this,ti,t.ref),vr({id:M(this,jn),ref:M(this,ti),onRefChange:o=>{this.root.contentNode=o},deps:()=>this.root.open.current}),Ne(()=>{if(!this.root.open.current||this.root.disableHoverableContent)return;const{isPointerInTransit:o,onPointerExit:c}=Op(()=>this.root.triggerNode,()=>this.root.contentNode);this.root.provider.isPointerInTransit=o,c(()=>{this.root.handleClose()})}),Ne(()=>{Cc(window,"scroll",o=>{const c=o.target;gu(c)&&c.contains(this.root.triggerNode)&&this.root.handleClose()}),Cc(window,Pu,this.root.handleClose)})}get snippetProps(){return V(M(this,Io))}get props(){return V(M(this,Ro))}}jn=new WeakMap,ti=new WeakMap,Io=new WeakMap,Ro=new WeakMap;const[Bp,qp]=Do("Tooltip.Provider"),[Vp,Tu]=Do("Tooltip.Root");function zp(e){return Bp(new Lp(e))}function Wp(e){return Vp(new $p(e,qp()))}function Hp(e){return new Fp(e,Tu())}function Xm(e){return new Kp(e,Tu())}function Up(e,t){mn(t,!0);let r=Le(t,"open",15,!1),o=Le(t,"onOpenChange",3,vh),c=Le(t,"controlledOpen",3,!1);Wp({open:me.with(()=>r(),u=>{c()||r(u),o()(u)}),delayDuration:me.with(()=>t.delayDuration),disableCloseOnTriggerClick:me.with(()=>t.disableCloseOnTriggerClick),disableHoverableContent:me.with(()=>t.disableHoverableContent),ignoreNonKeyboardFocus:me.with(()=>t.ignoreNonKeyboardFocus),disabled:me.with(()=>t.disabled)}),Cp(e,{children:(u,d)=>{var m=Wt(),b=zt(m);Ht(b,()=>t.children??tt),st(u,m)},$$slots:{default:!0}}),gn()}var Gp=Gs("<button><!></button>");function Xp(e,t){mn(t,!0);let r=Le(t,"id",19,yu),o=Le(t,"disabled",3,!1),c=Le(t,"type",3,"button"),u=Le(t,"ref",15,null),d=Uc(t,["$$slots","$$events","$$legacy","children","child","id","disabled","type","ref"]);const m=Hp({id:me.with(()=>r()),disabled:me.with(()=>o()??!1),ref:me.with(()=>u(),C=>u(C))}),b=he(()=>lh(d,m.props,{type:c()}));Ep(e,{get id(){return r()},children:(C,v)=>{var O=Wt(),x=zt(O);{var P=h=>{var y=Wt(),N=zt(y);Ht(N,()=>t.child,()=>({props:V(b)})),st(h,y)},p=h=>{var y=Gp();let N;var j=Li(y);Ht(j,()=>t.children??tt),$i(y),pr(()=>N=mr(y,N,{...V(b)})),st(h,y)};Hc(x,h=>{t.child?h(P):h(p,!1)})}st(C,O)},$$slots:{default:!0}}),gn()}function Jp(e,t){mn(t,!0);let r=Le(t,"delayDuration",3,700),o=Le(t,"disableCloseOnTriggerClick",3,!1),c=Le(t,"disableHoverableContent",3,!1),u=Le(t,"disabled",3,!1),d=Le(t,"ignoreNonKeyboardFocus",3,!1),m=Le(t,"skipDelayDuration",3,300);zp({delayDuration:me.with(()=>r()),disableCloseOnTriggerClick:me.with(()=>o()),disableHoverableContent:me.with(()=>c()),disabled:me.with(()=>u()),ignoreNonKeyboardFocus:me.with(()=>d()),skipDelayDuration:me.with(()=>m())});var b=Wt(),C=zt(b);Ht(C,()=>t.children??tt),st(e,b),gn()}const Jm=Up,Ym=Xp,Qm=Jp,Yp=e=>e;function Iu(e){const t=e-1;return t*t*t+1}function Rc(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Zm(e,{delay:t=0,duration:r=400,easing:o=Yp}={}){const c=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:o,css:u=>`opacity: ${u*c}`}}function eg(e,{delay:t=0,duration:r=400,easing:o=Iu,x:c=0,y:u=0,opacity:d=0}={}){const m=getComputedStyle(e),b=+m.opacity,C=m.transform==="none"?"":m.transform,v=b*(1-d),[O,x]=Rc(c),[P,p]=Rc(u);return{delay:t,duration:r,easing:o,css:(h,y)=>`
			transform: ${C} translate(${(1-h)*O}${x}, ${(1-h)*P}${p});
			opacity: ${b-v*y}`}}function tg(e,{delay:t=0,duration:r=400,easing:o=Iu,axis:c="y"}={}){const u=getComputedStyle(e),d=+u.opacity,m=c==="y"?"height":"width",b=parseFloat(u[m]),C=c==="y"?["top","bottom"]:["left","right"],v=C.map(N=>`${N[0].toUpperCase()}${N.slice(1)}`),O=parseFloat(u[`padding${v[0]}`]),x=parseFloat(u[`padding${v[1]}`]),P=parseFloat(u[`margin${v[0]}`]),p=parseFloat(u[`margin${v[1]}`]),h=parseFloat(u[`border${v[0]}Width`]),y=parseFloat(u[`border${v[1]}Width`]);return{delay:t,duration:r,easing:o,css:N=>`overflow: hidden;opacity: ${Math.min(N*20,1)*d};${m}: ${N*b}px;padding-${C[0]}: ${N*O}px;padding-${C[1]}: ${N*x}px;margin-${C[0]}: ${N*P}px;margin-${C[1]}: ${N*p}px;border-${C[0]}-width: ${N*h}px;border-${C[1]}-width: ${N*y}px;`}}/**
 * @license lucide-svelte v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Zp=Yl("<svg><!><!></svg>");function ng(e,t){const r=Ga(t,["children","$$slots","$$events","$$legacy"]),o=Ga(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);mn(t,!1);let c=Le(t,"name",8,void 0),u=Le(t,"color",8,"currentColor"),d=Le(t,"size",8,24),m=Le(t,"strokeWidth",8,2),b=Le(t,"absoluteStrokeWidth",8,!1),C=Le(t,"iconNode",24,()=>[]);const v=(...h)=>h.filter((y,N,j)=>!!y&&j.indexOf(y)===N).join(" ");Ql();var O=Zp();let x;var P=Li(O);tf(P,1,C,Zl,(h,y)=>{let N=()=>V(y)[0],j=()=>V(y)[1];var L=Wt(),$=zt(L);sf($,N,!0,(z,ie)=>{let ne;pr(()=>ne=mr(z,ne,{...j()},void 0,z.namespaceURI===zc,z.nodeName.includes("-")))}),st(h,L)});var p=Bl(P);of(p,t,"default",{}),$i(O),pr(()=>x=mr(O,x,{...Qp,...o,width:d(),height:d(),stroke:u(),"stroke-width":b()?Number(m())*24/Number(d()):m(),class:v("lucide-icon","lucide",c()?`lucide-${c()}`:"",r.class)},void 0,!0)),st(e,O),gn()}var Nc=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Je=e=>!e||typeof e!="object"||Object.keys(e).length===0,em=(e,t)=>JSON.stringify(e)===JSON.stringify(t);function Ru(e,t){e.forEach(function(r){Array.isArray(r)?Ru(r,t):t.push(r)})}function Nu(e){let t=[];return Ru(e,t),t}var Du=(...e)=>Nu(e).filter(Boolean),Mu=(e,t)=>{let r={},o=Object.keys(e),c=Object.keys(t);for(let u of o)if(c.includes(u)){let d=e[u],m=t[u];typeof d=="object"&&typeof m=="object"?r[u]=Mu(d,m):Array.isArray(d)||Array.isArray(m)?r[u]=Du(m,d):r[u]=m+" "+d}else r[u]=e[u];for(let u of c)o.includes(u)||(r[u]=t[u]);return r},Dc=e=>!e||typeof e!="string"?e:e.replace(/\s+/g," ").trim(),tm={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},ju=e=>e||void 0,wr=(...e)=>ju(Nu(e).filter(Boolean).join(" ")),As=null,kt={},Bs=!1,cr=(...e)=>t=>t.twMerge?((!As||Bs)&&(Bs=!1,As=Je(kt)?iu:Vf({...kt,extend:{theme:kt.theme,classGroups:kt.classGroups,conflictingClassGroupModifiers:kt.conflictingClassGroupModifiers,conflictingClassGroups:kt.conflictingClassGroups,...kt.extend}})),ju(As(wr(e)))):wr(e),Mc=(e,t)=>{for(let r in t)e.hasOwnProperty(r)?e[r]=wr(e[r],t[r]):e[r]=t[r];return e},nm=(e,t)=>{let{extend:r=null,slots:o={},variants:c={},compoundVariants:u=[],compoundSlots:d=[],defaultVariants:m={}}=e,b={...tm,...t},C=r!=null&&r.base?wr(r.base,e==null?void 0:e.base):e==null?void 0:e.base,v=r!=null&&r.variants&&!Je(r.variants)?Mu(c,r.variants):c,O=r!=null&&r.defaultVariants&&!Je(r.defaultVariants)?{...r.defaultVariants,...m}:m;!Je(b.twMergeConfig)&&!em(b.twMergeConfig,kt)&&(Bs=!0,kt=b.twMergeConfig);let x=Je(r==null?void 0:r.slots),P=Je(o)?{}:{base:wr(e==null?void 0:e.base,x&&(r==null?void 0:r.base)),...o},p=x?P:Mc({...r==null?void 0:r.slots},Je(P)?{base:e==null?void 0:e.base}:P),h=Je(r==null?void 0:r.compoundVariants)?u:Du(r==null?void 0:r.compoundVariants,u),y=j=>{if(Je(v)&&Je(o)&&x)return cr(C,j==null?void 0:j.class,j==null?void 0:j.className)(b);if(h&&!Array.isArray(h))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof h}`);if(d&&!Array.isArray(d))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof d}`);let L=(G,ae,oe=[],ge)=>{let fe=oe;if(typeof ae=="string")fe=fe.concat(Dc(ae).split(" ").map(ye=>`${G}:${ye}`));else if(Array.isArray(ae))fe=fe.concat(ae.reduce((ye,pe)=>ye.concat(`${G}:${pe}`),[]));else if(typeof ae=="object"&&typeof ge=="string"){for(let ye in ae)if(ae.hasOwnProperty(ye)&&ye===ge){let pe=ae[ye];if(pe&&typeof pe=="string"){let be=Dc(pe);fe[ge]?fe[ge]=fe[ge].concat(be.split(" ").map(Pe=>`${G}:${Pe}`)):fe[ge]=be.split(" ").map(Pe=>`${G}:${Pe}`)}else Array.isArray(pe)&&pe.length>0&&(fe[ge]=pe.reduce((be,Pe)=>be.concat(`${G}:${Pe}`),[]))}}return fe},$=(G,ae=v,oe=null,ge=null)=>{var fe;let ye=ae[G];if(!ye||Je(ye))return null;let pe=(fe=ge==null?void 0:ge[G])!=null?fe:j==null?void 0:j[G];if(pe===null)return null;let be=Nc(pe),Pe=Array.isArray(b.responsiveVariants)&&b.responsiveVariants.length>0||b.responsiveVariants===!0,Ke=O==null?void 0:O[G],ut=[];if(typeof be=="object"&&Pe)for(let[It,yt]of Object.entries(be)){let Vn=ye[yt];if(It==="initial"){Ke=yt;continue}Array.isArray(b.responsiveVariants)&&!b.responsiveVariants.includes(It)||(ut=L(It,Vn,ut,oe))}let Tt=be!=null&&typeof be!="object"?be:Nc(Ke),yn=ye[Tt||"false"];return typeof ut=="object"&&typeof oe=="string"&&ut[oe]?Mc(ut,yn):ut.length>0?(ut.push(yn),ut):yn},z=()=>v?Object.keys(v).map(G=>$(G,v)):null,ie=(G,ae)=>{if(!v||typeof v!="object")return null;let oe=new Array;for(let ge in v){let fe=$(ge,v,G,ae),ye=G==="base"&&typeof fe=="string"?fe:fe&&fe[G];ye&&(oe[oe.length]=ye)}return oe},ne={};for(let G in j)j[G]!==void 0&&(ne[G]=j[G]);let ce=(G,ae)=>{var oe;let ge=typeof(j==null?void 0:j[G])=="object"?{[G]:(oe=j[G])==null?void 0:oe.initial}:{};return{...O,...ne,...ge,...ae}},le=(G=[],ae)=>{let oe=[];for(let{class:ge,className:fe,...ye}of G){let pe=!0;for(let[be,Pe]of Object.entries(ye)){let Ke=ce(be,ae);if(Array.isArray(Pe)){if(!Pe.includes(Ke[be])){pe=!1;break}}else if(Ke[be]!==Pe){pe=!1;break}}pe&&(ge&&oe.push(ge),fe&&oe.push(fe))}return oe},ee=G=>{let ae=le(h,G);if(!Array.isArray(ae))return ae;let oe={};for(let ge of ae)if(typeof ge=="string"&&(oe.base=cr(oe.base,ge)(b)),typeof ge=="object")for(let[fe,ye]of Object.entries(ge))oe[fe]=cr(oe[fe],ye)(b);return oe},ke=G=>{if(d.length<1)return null;let ae={};for(let{slots:oe=[],class:ge,className:fe,...ye}of d){if(!Je(ye)){let pe=!0;for(let be of Object.keys(ye)){let Pe=ce(be,G)[be];if(Pe===void 0||(Array.isArray(ye[be])?!ye[be].includes(Pe):ye[be]!==Pe)){pe=!1;break}}if(!pe)continue}for(let pe of oe)ae[pe]=ae[pe]||[],ae[pe].push([ge,fe])}return ae};if(!Je(o)||!x){let G={};if(typeof p=="object"&&!Je(p))for(let ae of Object.keys(p))G[ae]=oe=>{var ge,fe;return cr(p[ae],ie(ae,oe),((ge=ee(oe))!=null?ge:[])[ae],((fe=ke(oe))!=null?fe:[])[ae],oe==null?void 0:oe.class,oe==null?void 0:oe.className)(b)};return G}return cr(C,z(),le(h),j==null?void 0:j.class,j==null?void 0:j.className)(b)},N=()=>{if(!(!v||typeof v!="object"))return Object.keys(v)};return y.variantKeys=N(),y.extend=r,y.base=C,y.slots=p,y.variants=v,y.defaultVariants=O,y.compoundSlots=d,y.compoundVariants=h,y};const jc=nm({base:"ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-accent-foreground underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});var rm=Gs("<a><!></a>"),im=Gs("<button><!></button>");function rg(e,t){mn(t,!0);let r=Le(t,"variant",3,"default"),o=Le(t,"size",3,"default"),c=Le(t,"ref",15,null),u=Le(t,"href",3,void 0),d=Le(t,"type",3,"button"),m=Uc(t,["$$slots","$$events","$$legacy","class","variant","size","ref","href","type","children"]);var b=Wt(),C=zt(b);{var v=x=>{var P=rm();let p;var h=Li(P);Ht(h,()=>t.children??tt),$i(P),Xa(P,y=>c(y),()=>c()),pr(()=>p=mr(P,p,{class:nc(jc({variant:r(),size:o(),className:t.class})),href:u(),...m})),st(x,P)},O=x=>{var P=im();let p;var h=Li(P);Ht(h,()=>t.children??tt),$i(P),Xa(P,y=>c(y),()=>c()),pr(()=>p=mr(P,p,{class:nc(jc({variant:r(),size:o(),className:t.class})),type:d(),...m})),st(x,P)};Hc(C,x=>{u()?x(v):x(O,!1)})}st(e,b),gn()}export{Hm as $,hh as A,jd as B,Vm as C,Sp as D,pu as E,Km as F,qm as G,Ys as H,ng as I,ch as J,jm as K,dm as L,Gm as M,Mm as N,Lm as O,Qm as P,Cp as Q,Zl as R,Ep as S,Tm as T,$m as U,Dm as V,Rm as W,Nm as X,Fm as Y,Bm as Z,Xm as _,Om as a,mm as a0,hm as a1,Zm as a2,Jm as a3,Ym as a4,Gf as a5,nm as a6,sf as a7,jc as a8,rg as a9,tg as aa,Ns as ab,Ze as ac,yu as b,me as c,mr as d,tf as e,Os as f,ou as g,eg as h,of as i,nc as j,gm as k,mu as l,lh as m,Pm as n,Do as o,Im as p,vh as q,fh as r,Ht as s,pm as t,vr as u,hu as v,Ss as w,gu as x,zm as y,Wm as z};
