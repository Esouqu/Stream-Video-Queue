var ce=a=>{throw TypeError(a)};var fe=(a,t,e)=>t.has(a)||ce("Cannot "+e);var F=(a,t,e)=>(fe(a,t,"read from private field"),e?e.call(a):t.get(a)),M=(a,t,e)=>t.has(a)?ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),O=(a,t,e,n)=>(fe(a,t,"write to private field"),n?n.call(a,e):t.set(a,e),e);import{a as _,t as I,c as $}from"../chunks/disclose-version.Cz5Qo27d.js";import{p as N,j as S,a as V,c as w,D as be,r as C,J as Fe,l as H,f as Y,av as xe,t as J,s as x}from"../chunks/runtime.Ctm-79fp.js";import{o as he,b as Pe,p as D,i as W,r as me,l as ge,s as de,c as Se}from"../chunks/index-client.DpACmXYB.js";import{g as Ae,a as P,u as Ee,b as Te,c as B,s as X,d as Ie,m as ke,e as Me,t as ee,f as ye,h as te,I as Ce,i as we,j as De,P as Ne,k as Ve}from"../chunks/button.BBNELvsa.js";import{a as z,s as Re,b as Oe}from"../chunks/store.BTqSLNIM.js";import{i as $e,p as Ye}from"../chunks/stores.N1HH8j_I.js";import"../chunks/legacy._zovnSf6.js";var re={exports:{}},_e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/_e=function(){var a={},t={};return a.on=function(e,n){var d={name:e,handler:n};return t[e]=t[e]||[],t[e].unshift(d),d},a.off=function(e){var n=t[e.name].indexOf(e);n!==-1&&t[e.name].splice(n,1)},a.trigger=function(e,n){var d=t[e],o;if(d)for(o=d.length;o--;)d[o].handler(n)},a};var Le=_e,ae={exports:{}},ne={exports:{}},Z,ve;function Ue(){if(ve)return Z;ve=1;var a=1e3,t=a*60,e=t*60,n=e*24,d=n*7,o=n*365.25;Z=function(r,s){s=s||{};var i=typeof r;if(i==="string"&&r.length>0)return h(r);if(i==="number"&&isFinite(r))return s.long?m(r):v(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function h(r){if(r=String(r),!(r.length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(s){var i=parseFloat(s[1]),l=(s[2]||"ms").toLowerCase();switch(l){case"years":case"year":case"yrs":case"yr":case"y":return i*o;case"weeks":case"week":case"w":return i*d;case"days":case"day":case"d":return i*n;case"hours":case"hour":case"hrs":case"hr":case"h":return i*e;case"minutes":case"minute":case"mins":case"min":case"m":return i*t;case"seconds":case"second":case"secs":case"sec":case"s":return i*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function v(r){var s=Math.abs(r);return s>=n?Math.round(r/n)+"d":s>=e?Math.round(r/e)+"h":s>=t?Math.round(r/t)+"m":s>=a?Math.round(r/a)+"s":r+"ms"}function m(r){var s=Math.abs(r);return s>=n?u(r,s,n,"day"):s>=e?u(r,s,e,"hour"):s>=t?u(r,s,t,"minute"):s>=a?u(r,s,a,"second"):r+" ms"}function u(r,s,i,l){var p=s>=i*1.5;return Math.round(r/i)+" "+l+(p?"s":"")}return Z}function je(a){e.debug=e,e.default=e,e.coerce=m,e.disable=h,e.enable=d,e.enabled=v,e.humanize=Ue(),e.destroy=u,Object.keys(a).forEach(r=>{e[r]=a[r]}),e.names=[],e.skips=[],e.formatters={};function t(r){let s=0;for(let i=0;i<r.length;i++)s=(s<<5)-s+r.charCodeAt(i),s|=0;return e.colors[Math.abs(s)%e.colors.length]}e.selectColor=t;function e(r){let s,i=null,l,p;function c(...f){if(!c.enabled)return;const g=c,y=Number(new Date),b=y-(s||y);g.diff=b,g.prev=s,g.curr=y,s=y,f[0]=e.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let A=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(k,R)=>{if(k==="%%")return"%";A++;const j=e.formatters[R];if(typeof j=="function"){const q=f[A];k=j.call(g,q),f.splice(A,1),A--}return k}),e.formatArgs.call(g,f),(g.log||e.log).apply(g,f)}return c.namespace=r,c.useColors=e.useColors(),c.color=e.selectColor(r),c.extend=n,c.destroy=e.destroy,Object.defineProperty(c,"enabled",{enumerable:!0,configurable:!1,get:()=>i!==null?i:(l!==e.namespaces&&(l=e.namespaces,p=e.enabled(r)),p),set:f=>{i=f}}),typeof e.init=="function"&&e.init(c),c}function n(r,s){const i=e(this.namespace+(typeof s>"u"?":":s)+r);return i.log=this.log,i}function d(r){e.save(r),e.namespaces=r,e.names=[],e.skips=[];const s=(typeof r=="string"?r:"").trim().replace(" ",",").split(",").filter(Boolean);for(const i of s)i[0]==="-"?e.skips.push(i.slice(1)):e.names.push(i)}function o(r,s){let i=0,l=0,p=-1,c=0;for(;i<r.length;)if(l<s.length&&(s[l]===r[i]||s[l]==="*"))s[l]==="*"?(p=l,c=i,l++):(i++,l++);else if(p!==-1)l=p+1,c++,i=c;else return!1;for(;l<s.length&&s[l]==="*";)l++;return l===s.length}function h(){const r=[...e.names,...e.skips.map(s=>"-"+s)].join(",");return e.enable(""),r}function v(r){for(const s of e.skips)if(o(r,s))return!1;for(const s of e.names)if(o(r,s))return!0;return!1}function m(r){return r instanceof Error?r.stack||r.message:r}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}var qe=je;(function(a,t){var e={};t.formatArgs=d,t.save=o,t.load=h,t.useColors=n,t.storage=v(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function d(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+a.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;u.splice(1,0,r,"color: inherit");let s=0,i=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(s++,l==="%c"&&(i=s))}),u.splice(i,0,r)}t.log=console.debug||console.log||(()=>{});function o(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function h(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=e.DEBUG),u}function v(){try{return localStorage}catch{}}a.exports=qe(t);const{formatters:m}=a.exports;m.j=function(u){try{return JSON.stringify(u)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}})(ne,ne.exports);var Be=ne.exports,se={exports:{}},oe={exports:{}};(function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},a.exports=t.default})(oe,oe.exports);var ze=oe.exports;(function(a,t){Object.defineProperty(t,"__esModule",{value:!0});var e=ze,n=d(e);function d(o){return o&&o.__esModule?o:{default:o}}t.default={pauseVideo:{acceptableStates:[n.default.ENDED,n.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[n.default.ENDED,n.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[n.default.ENDED,n.default.PLAYING,n.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},a.exports=t.default})(se,se.exports);var Ge=se.exports,ie={exports:{}};(function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],a.exports=t.default})(ie,ie.exports);var He=ie.exports,le={exports:{}};(function(a,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe","getSphericalProperties","setSphericalProperties"],a.exports=t.default})(le,le.exports);var Je=le.exports;(function(a,t){Object.defineProperty(t,"__esModule",{value:!0});var e=Be,n=r(e),d=Ge,o=r(d),h=He,v=r(h),m=Je,u=r(m);function r(l){return l&&l.__esModule?l:{default:l}}const s=(0,n.default)("youtube-player"),i={};i.proxyEvents=l=>{const p={};for(const c of v.default){const f="on"+c.slice(0,1).toUpperCase()+c.slice(1);p[f]=g=>{s('event "%s"',f,g),l.trigger(c,g)}}return p},i.promisifyPlayer=(l,p=!1)=>{const c={};for(const f of u.default)p&&o.default[f]?c[f]=(...g)=>l.then(y=>{const b=o.default[f],A=y.getPlayerState(),Q=y[f].apply(y,g);return b.stateChangeRequired||Array.isArray(b.acceptableStates)&&!b.acceptableStates.includes(A)?new Promise(k=>{const R=()=>{const j=y.getPlayerState();let q;typeof b.timeout=="number"&&(q=setTimeout(()=>{y.removeEventListener("onStateChange",R),k()},b.timeout)),Array.isArray(b.acceptableStates)&&b.acceptableStates.includes(j)&&(y.removeEventListener("onStateChange",R),clearTimeout(q),k())};y.addEventListener("onStateChange",R)}).then(()=>Q):Q}):c[f]=(...g)=>l.then(y=>y[f].apply(y,g));return c},t.default=i,a.exports=t.default})(ae,ae.exports);var Qe=ae.exports,ue={exports:{}},Ze=function(t,e,n){var d=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");typeof e=="function"&&(n=e,e={}),e=e||{},n=n||function(){},o.type=e.type||"text/javascript",o.charset=e.charset||"utf8",o.async="async"in e?!!e.async:!0,o.src=t,e.attrs&&Ke(o,e.attrs),e.text&&(o.text=""+e.text);var h="onload"in o?pe:We;h(o,n),o.onload||pe(o,n),d.appendChild(o)};function Ke(a,t){for(var e in t)a.setAttribute(e,t[e])}function pe(a,t){a.onload=function(){this.onerror=this.onload=null,t(null,a)},a.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),a)}}function We(a,t){a.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,a))}}(function(a,t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ze,n=d(e);function d(o){return o&&o.__esModule?o:{default:o}}t.default=o=>new Promise(v=>{if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){v(window.YT);return}else{const u=window.location.protocol==="http:"?"http:":"https:";(0,n.default)(u+"//www.youtube.com/iframe_api",r=>{r&&o.trigger("error",r)})}const m=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{m&&m(),v(window.YT)}}),a.exports=t.default})(ue,ue.exports);var Xe=ue.exports;(function(a,t){Object.defineProperty(t,"__esModule",{value:!0});var e=Le,n=m(e),d=Qe,o=m(d),h=Xe,v=m(h);function m(r){return r&&r.__esModule?r:{default:r}}let u;t.default=(r,s={},i=!1)=>{const l=(0,n.default)();if(u||(u=(0,v.default)(l)),s.events)throw new Error("Event handlers cannot be overwritten.");if(typeof r=="string"&&!document.getElementById(r))throw new Error('Element "'+r+'" does not exist.');s.events=o.default.proxyEvents(l);const p=new Promise(f=>{typeof r=="object"&&r.playVideo instanceof Function?f(r):u.then(g=>{const y=new g.Player(r,s);return l.on("ready",()=>{f(y)}),null})}),c=o.default.promisifyPlayer(p,i);return c.on=l.on,c.off=l.off,c},a.exports=t.default})(re,re.exports);var et=re.exports;const tt=Ae(et);var rt=I('<div class="youtube-player-container border svelte-v6a6h2"><div class="youtube-player svelte-v6a6h2"></div></div>');function at(a,t){N(t,!0);let e=Fe(void 0);he(async()=>{S(e)&&P.setYoutubePlayer(tt(S(e),{playerVars:{rel:0}}))});var n=rt(),d=w(n);Pe(d,o=>be(e,o),()=>S(e)),C(n),_(a,n),V()}const nt="data-progress-root";var L,U,E,T,G;class st{constructor(t){M(this,L);M(this,U);M(this,E);M(this,T);M(this,G,H(()=>({role:"meter",value:F(this,E).current,max:F(this,T).current,"aria-valuemin":0,"aria-valuemax":F(this,T).current,"aria-valuenow":F(this,E).current,"data-value":F(this,E).current,"data-state":ot(F(this,E).current,F(this,T).current),"data-max":F(this,T).current,[nt]:""})));O(this,E,t.value),O(this,T,t.max),O(this,L,t.id),O(this,U,t.ref),Ee({id:F(this,L),ref:F(this,U)})}get props(){return S(F(this,G))}}L=new WeakMap,U=new WeakMap,E=new WeakMap,T=new WeakMap,G=new WeakMap;function ot(a,t){return a===null?"indeterminate":a===t?"loaded":"loading"}function it(a){return new st(a)}var lt=I("<div><!></div>");function ut(a,t){N(t,!0);let e=D(t,"value",3,0),n=D(t,"max",3,100),d=D(t,"id",19,Te),o=D(t,"ref",15,null),h=me(t,["$$slots","$$events","$$legacy","child","children","value","max","id","ref"]);const v=it({value:B.with(()=>e()),max:B.with(()=>n()),id:B.with(()=>d()),ref:B.with(()=>o(),l=>o(l))}),m=H(()=>ke(h,v.props));var u=$(),r=Y(u);{var s=l=>{var p=$(),c=Y(p);X(c,()=>t.child,()=>({props:S(m)})),_(l,p)},i=l=>{var p=lt();let c;var f=w(p);X(f,()=>t.children??xe),C(p),J(()=>c=Ie(p,c,{...S(m)})),_(l,p)};W(r,l=>{t.child?l(s):l(i,!1)})}_(a,u),V()}var dt=I("<div> </div>"),ct=I('<div class="relative grid overflow-hidden"></div>');function K(a,t){N(t,!0);let e=H(()=>t.value.toString().split(""));var n=ct();Me(n,23,()=>S(e),(d,o)=>d+`${o}`,(d,o,h)=>{var v=dt(),m=w(v,!0);C(v),J(()=>{ye(v,"style",`grid-column: ${S(h)+1}; grid-row: 1;`),z(m,S(o))}),ee(1,v,()=>te,()=>({y:-10,duration:300})),ee(2,v,()=>te,()=>({y:10,duration:300})),_(d,v)}),C(n),_(a,n),V()}function ft(a,t){const e=ge(t,["children","$$slots","$$events","$$legacy"]);Ce(a,de({name:"thumbs-up"},()=>e,{iconNode:[["path",{d:"M7 10v12"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"}]],children:(d,o)=>{var h=$(),v=Y(h);we(v,t,"default",{}),_(d,h)},$$slots:{default:!0}}))}function vt(a,t){const e=ge(t,["children","$$slots","$$events","$$legacy"]);Ce(a,de({name:"thumbs-down"},()=>e,{iconNode:[["path",{d:"M17 14V2"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z"}]],children:(d,o)=>{var h=$(),v=Y(h);we(v,t,"default",{}),_(d,h)},$$slots:{default:!0}}))}var pt=I('<div class="h-full w-full flex-1 bg-foreground transition-all"></div>');function ht(a,t){N(t,!0);let e=D(t,"ref",15,null),n=D(t,"max",3,100),d=me(t,["$$slots","$$events","$$legacy","ref","class","max","value"]);var o=$(),h=Y(o),v=H(()=>De("relative h-6 w-full overflow-hidden rounded-full bg-muted",t.class));Se(h,()=>ut,(m,u)=>{u(m,de({get class(){return S(v)},get value(){return t.value},get max(){return n()}},()=>d,{get ref(){return e()},set ref(r){e(r)},children:(r,s)=>{var i=pt();J(()=>ye(i,"style",`transform: translateX(-${100-100*(t.value??0)/(n()??1)}%)`)),_(r,i)},$$slots:{default:!0}}))}),_(a,o),V()}var mt=I('<div class="relative flex w-[27rem] flex-col items-center justify-center gap-1"><div class="flex w-full justify-between gap-4 text-sm font-medium"><div class="flex items-center gap-2"><!> <!> <span> </span></div> <div class="absolute left-[50%] flex translate-x-[-50%] gap-2 font-medium"><div class="flex items-center gap-1"><!> <span>/</span> <span> </span></div></div> <div class="flex items-center gap-2"><!> <!> <span> </span></div></div> <div class="relative w-full after:absolute after:left-[50%] after:top-0 after:h-full after:w-[0.125rem] after:translate-x-[-50%] after:bg-primary"><!></div></div>');function gt(a,t){N(t,!1),$e();var e=mt(),n=w(e),d=w(n),o=w(d);ft(o,{size:"1.25rem"});var h=x(o,2);K(h,{get value(){return P.poll.keep}});var v=x(h,2),m=w(v,!0);C(v),C(d);var u=x(d,2),r=w(u),s=w(r);K(s,{get value(){return P.poll.difference}});var i=x(s,4),l=w(i,!0);C(i),C(r),C(u);var p=x(u,2),c=w(p);vt(c,{size:"1.25rem"});var f=x(c,2);K(f,{get value(){return P.poll.skip}});var g=x(f,2),y=w(g,!0);C(g),C(p),C(n);var b=x(n,2),A=w(b);ht(A,{max:100,get value(){return P.poll.currentPercent},class:"h-1 w-full"}),C(b),C(e),J(()=>{z(m,P.poll.keepKeyword),z(l,P.poll.neededVotes),z(y,P.poll.skipKeyword)}),ee(3,e,()=>te,()=>({y:100})),_(a,e),V()}class yt{validateTokenEveryHour(){const e=setInterval(async()=>{const n=await this.validateToken(),d=n||await this.refreshToken();n||d||(clearInterval(e),location.reload())},36e5)}async refreshToken(){return(await fetch("/api/twitch/refresh",{method:"POST"}).then(e=>e)).status===200}async validateToken(){return(await fetch("/api/twitch/validate").then(e=>e)).status===200}async getUser(){const t=await this.validateToken(),e=t||await this.refreshToken();if(!(!t&&!e))return await fetch("/api/twitch/user").then(n=>n.json()).then(n=>n)}}const Ct=new yt;var wt=I('<div class="relative flex w-full flex-1 items-center justify-center"><!> <!></div>'),_t=I('<div class="relative grid h-full w-full grid-cols-[auto_25.6rem]"><div class="m-4 flex flex-col justify-center gap-4"><!> <!></div> <!></div>');function It(a,t){N(t,!0);const e=Re(),n=()=>Oe(Ye,"$page",e);let d=n().data.twitchUserData,o=n().data.donationAlertsUserData;he(()=>{Ve(1),d&&(Ct.validateTokenEveryHour(),P.twitchChatSocket.connect(d.login)),o&&P.centrifugoSocket.connect(o)}),Ne(a,{delayDuration:0,children:(h,v)=>{var m=_t(),u=w(m),r=w(u);at(r,{});var s=x(r,2);{var i=p=>{var c=wt(),f=w(c);gt(f,{});var g=x(f,2);W(g,y=>{}),C(c),_(p,c)};W(s,p=>{P.poll.isEnabled&&p(i)})}C(u);var l=x(u,2);X(l,()=>t.children),C(m),_(h,m)},$$slots:{default:!0}}),V()}export{It as component};
